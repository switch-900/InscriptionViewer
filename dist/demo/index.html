<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bitcoin Inscription Viewer</title>
    <script type="module" crossorigin>var e=Object.defineProperty,t=(t,n,i)=>((t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i)(t,"symbol"!=typeof n?n+"":n,i);function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i={exports:{}},r={},a=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function o(e,t,n){var i=null;if(void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),"key"in t)for(var r in n={},t)"key"!==r&&(n[r]=t[r]);else n=t;return t=n.ref,{$$typeof:a,type:e,key:i,ref:void 0!==t?t:null,props:n}}r.Fragment=s,r.jsx=o,r.jsxs=o,i.exports=r;var l=i.exports,c={exports:{}},u={},d=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.iterator;var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function T(e,t,n){this.props=e,this.context=t,this.refs=E,this.updater=n||M}function A(){}function C(e,t,n){this.props=e,this.context=t,this.refs=E,this.updater=n||M}T.prototype.isReactComponent={},T.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},T.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},A.prototype=T.prototype;var N=C.prototype=new A;N.constructor=C,w(N,T.prototype),N.isPureReactComponent=!0;var R=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function k(e,t,n,i,r,a){return n=a.ref,{$$typeof:d,type:e,key:t,ref:void 0!==n?n:null,props:a}}function U(e){return"object"==typeof e&&null!==e&&e.$$typeof===d}var I=/\/+/g;function D(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,i={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return i[e]})):t.toString(36);var n,i}function O(){}function z(e,t,n,i,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var s,o,l=!1;if(null===e)l=!0;else switch(a){case"bigint":case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case d:case h:l=!0;break;case b:return z((l=e._init)(e._payload),t,n,i,r)}}if(l)return r=r(e),l=""===i?"."+D(e,0):i,R(r)?(n="",null!=l&&(n=l.replace(I,"$&/")+"/"),z(r,t,n,"",function(e){return e})):null!=r&&(U(r)&&(s=r,o=n+(null==r.key||e&&e.key===r.key?"":(""+r.key).replace(I,"$&/")+"/")+l,r=k(s.type,o,void 0,0,0,s.props)),t.push(r)),1;l=0;var c,u=""===i?".":i+":";if(R(e))for(var f=0;f<e.length;f++)l+=z(i=e[f],t,n,a=u+D(i,f),r);else if("function"==typeof(f=null===(c=e)||"object"!=typeof c?null:"function"==typeof(c=S&&c[S]||c["@@iterator"])?c:null))for(e=f.call(e),f=0;!(i=e.next()).done;)l+=z(i=i.value,t,n,a=u+D(i,f++),r);else if("object"===a){if("function"==typeof e.then)return z(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(O,O):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return l}function F(e,t,n){if(null==e)return e;var i=[],r=0;return z(e,i,"","",function(e){return t.call(n,e,r++)}),i}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var B="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)};function H(){}u.Children={map:F,forEach:function(e,t,n){F(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return F(e,function(){t++}),t},toArray:function(e){return F(e,function(e){return e})||[]},only:function(e){if(!U(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},u.Component=T,u.Fragment=f,u.Profiler=m,u.PureComponent=C,u.StrictMode=p,u.Suspense=_,u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,u.__COMPILER_RUNTIME={__proto__:null,c:function(e){return L.H.useMemoCache(e)}},u.cache=function(e){return function(){return e.apply(null,arguments)}},u.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var i=w({},e.props),r=e.key;if(null!=t)for(a in void 0!==t.ref&&void 0,void 0!==t.key&&(r=""+t.key),t)!P.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(i[a]=t[a]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var s=Array(a),o=0;o<a;o++)s[o]=arguments[o+2];i.children=s}return k(e.type,r,void 0,0,0,i)},u.createContext=function(e){return(e={$$typeof:v,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:g,_context:e},e},u.createElement=function(e,t,n){var i,r={},a=null;if(null!=t)for(i in void 0!==t.key&&(a=""+t.key),t)P.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(r[i]=t[i]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];r.children=o}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===r[i]&&(r[i]=s[i]);return k(e,a,void 0,0,0,r)},u.createRef=function(){return{current:null}},u.forwardRef=function(e){return{$$typeof:x,render:e}},u.isValidElement=U,u.lazy=function(e){return{$$typeof:b,_payload:{_status:-1,_result:e},_init:j}},u.memo=function(e,t){return{$$typeof:y,type:e,compare:void 0===t?null:t}},u.startTransition=function(e){var t=L.T,n={};L.T=n;try{var i=e(),r=L.S;null!==r&&r(n,i),"object"==typeof i&&null!==i&&"function"==typeof i.then&&i.then(H,B)}catch(a){B(a)}finally{L.T=t}},u.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},u.use=function(e){return L.H.use(e)},u.useActionState=function(e,t,n){return L.H.useActionState(e,t,n)},u.useCallback=function(e,t){return L.H.useCallback(e,t)},u.useContext=function(e){return L.H.useContext(e)},u.useDebugValue=function(){},u.useDeferredValue=function(e,t){return L.H.useDeferredValue(e,t)},u.useEffect=function(e,t,n){var i=L.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)},u.useId=function(){return L.H.useId()},u.useImperativeHandle=function(e,t,n){return L.H.useImperativeHandle(e,t,n)},u.useInsertionEffect=function(e,t){return L.H.useInsertionEffect(e,t)},u.useLayoutEffect=function(e,t){return L.H.useLayoutEffect(e,t)},u.useMemo=function(e,t){return L.H.useMemo(e,t)},u.useOptimistic=function(e,t){return L.H.useOptimistic(e,t)},u.useReducer=function(e,t,n){return L.H.useReducer(e,t,n)},u.useRef=function(e){return L.H.useRef(e)},u.useState=function(e){return L.H.useState(e)},u.useSyncExternalStore=function(e,t,n){return L.H.useSyncExternalStore(e,t,n)},u.useTransition=function(){return L.H.useTransition()},u.version="19.1.0",c.exports=u;var V=c.exports;const G=n(V);var W={exports:{}},X={},q={exports:{}},Y={};
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,a=e[i];if(!(0<r(a,t)))break e;e[i]=t,e[n]=a,n=i}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,a=e.length,s=a>>>1;i<s;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>r(l,n))c<a&&0>r(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<a&&0>r(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,_="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var r=n(c);null!==r;){if(null===r.callback)i(c);else{if(!(r.startTime<=e))break;i(c),r.sortIndex=r.expirationTime,t(l,r)}r=n(c)}}function b(e){if(m=!1,y(e),!p)if(null!==n(l))p=!0,M||(M=!0,S());else{var t=n(c);null!==t&&L(b,t.startTime-e)}}var S,M=!1,w=-1,E=5,T=-1;function A(){return!!g||!(e.unstable_now()-T<E)}function C(){if(g=!1,M){var t=e.unstable_now();T=t;var r=!0;try{e:{p=!1,m&&(m=!1,x(w),w=-1),f=!0;var a=h;try{t:{for(y(t),d=n(l);null!==d&&!(d.expirationTime>t&&A());){var s=d.callback;if("function"==typeof s){d.callback=null,h=d.priorityLevel;var o=s(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){d.callback=o,y(t),r=!0;break t}d===n(l)&&i(l),y(t)}else i(l);d=n(l)}if(null!==d)r=!0;else{var u=n(c);null!==u&&L(b,u.startTime-t),r=!1}}break e}finally{d=null,h=a,f=!1}r=void 0}}finally{r?S():M=!1}}}if("function"==typeof _)S=function(){_(C)};else if("undefined"!=typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=C,S=function(){R.postMessage(null)}}else S=function(){v(C,0)};function L(t,n){w=v(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(E=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(i,r,a){var s=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,i){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return i={id:u++,callback:r,priorityLevel:i,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(i.sortIndex=a,t(c,i),null===n(l)&&i===n(c)&&(m?(x(w),w=-1):m=!0,L(b,a-s))):(i.sortIndex=o,t(l,i),p||f||(p=!0,M||(M=!0,S()))),i},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(Y),q.exports=Y;var $=q.exports,K={exports:{}},Z={},Q=V;function J(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ee(){}var te={d:{f:ee,r:function(){throw Error(J(522))},D:ee,C:ee,L:ee,m:ee,X:ee,S:ee,M:ee},p:0,findDOMNode:null},ne=Symbol.for("react.portal");var ie=Q.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function re(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}Z.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Z.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(J(299));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ne,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},Z.flushSync=function(e){var t=ie.T,n=te.p;try{if(ie.T=null,te.p=2,e)return e()}finally{ie.T=t,te.p=n,te.d.f()}},Z.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,te.d.C(e,t))},Z.prefetchDNS=function(e){"string"==typeof e&&te.d.D(e)},Z.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,i=re(n,t.crossOrigin),r="string"==typeof t.integrity?t.integrity:void 0,a="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?te.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:a}):"script"===n&&te.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:a,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},Z.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=re(t.as,t.crossOrigin);te.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&te.d.M(e)},Z.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,i=re(n,t.crossOrigin);te.d.L(e,n,{crossOrigin:i,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},Z.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=re(t.as,t.crossOrigin);te.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else te.d.m(e)},Z.requestFormReset=function(e){te.d.r(e)},Z.unstable_batchedUpdates=function(e,t){return e(t)},Z.useFormState=function(e,t,n){return ie.H.useFormState(e,t,n)},Z.useFormStatus=function(){return ie.H.useHostTransitionStatus()},Z.version="19.1.0",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),K.exports=Z;var ae=K.exports,se=$,oe=V,le=ae;
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ce(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ue(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function de(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function he(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function fe(e){if(de(e)!==e)throw Error(ce(188))}function pe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=pe(e)))return t;e=e.sibling}return null}var me=Object.assign,ge=Symbol.for("react.element"),ve=Symbol.for("react.transitional.element"),xe=Symbol.for("react.portal"),_e=Symbol.for("react.fragment"),ye=Symbol.for("react.strict_mode"),be=Symbol.for("react.profiler"),Se=Symbol.for("react.provider"),Me=Symbol.for("react.consumer"),we=Symbol.for("react.context"),Ee=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),Re=Symbol.for("react.activity"),Le=Symbol.for("react.memo_cache_sentinel"),Pe=Symbol.iterator;function ke(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Pe&&e[Pe]||e["@@iterator"])?e:null}var Ue=Symbol.for("react.client.reference");function Ie(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===Ue?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case _e:return"Fragment";case be:return"Profiler";case ye:return"StrictMode";case Te:return"Suspense";case Ae:return"SuspenseList";case Re:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case xe:return"Portal";case we:return(e.displayName||"Context")+".Provider";case Me:return(e._context.displayName||"Context")+".Consumer";case Ee:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Ce:return null!==(t=e.displayName||null)?t:Ie(e.type)||"Memo";case Ne:t=e._payload,e=e._init;try{return Ie(e(t))}catch(n){}}return null}var De=Array.isArray,Oe=oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ze=le.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe={pending:!1,data:null,method:null,action:null},je=[],Be=-1;function He(e){return{current:e}}function Ve(e){0>Be||(e.current=je[Be],je[Be]=null,Be--)}function Ge(e,t){Be++,je[Be]=e.current,e.current=t}var We=He(null),Xe=He(null),qe=He(null),Ye=He(null);function $e(e,t){switch(Ge(qe,t),Ge(Xe,e),Ge(We,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?oh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=lh(t=oh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ve(We),Ge(We,e)}function Ke(){Ve(We),Ve(Xe),Ve(qe)}function Ze(e){null!==e.memoizedState&&Ge(Ye,e);var t=We.current,n=lh(t,e.type);t!==n&&(Ge(Xe,e),Ge(We,n))}function Qe(e){Xe.current===e&&(Ve(We),Ve(Xe)),Ye.current===e&&(Ve(Ye),Zh._currentValue=Fe)}var Je=Object.prototype.hasOwnProperty,et=se.unstable_scheduleCallback,tt=se.unstable_cancelCallback,nt=se.unstable_shouldYield,it=se.unstable_requestPaint,rt=se.unstable_now,at=se.unstable_getCurrentPriorityLevel,st=se.unstable_ImmediatePriority,ot=se.unstable_UserBlockingPriority,lt=se.unstable_NormalPriority,ct=se.unstable_LowPriority,ut=se.unstable_IdlePriority,dt=se.log,ht=se.unstable_setDisableYieldValue,ft=null,pt=null;function mt(e){if("function"==typeof dt&&ht(e),pt&&"function"==typeof pt.setStrictMode)try{pt.setStrictMode(ft,e)}catch(t){}}var gt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(vt(e)/xt|0)|0},vt=Math.log,xt=Math.LN2;var _t=256,yt=4194304;function bt(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function St(e,t,n){var i=e.pendingLanes;if(0===i)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=134217727&i;return 0!==o?0!==(i=o&~a)?r=bt(i):0!==(s&=o)?r=bt(s):n||0!==(n=o&~e)&&(r=bt(n)):0!==(o=i&~a)?r=bt(o):0!==s?r=bt(s):n||0!==(n=i&~e)&&(r=bt(n)),0===r?0:0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(n=t&-t)||32===a&&4194048&n)?t:r}function Mt(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function wt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Et(){var e=_t;return!(4194048&(_t<<=1))&&(_t=256),e}function Tt(){var e=yt;return!(62914560&(yt<<=1))&&(yt=4194304),e}function At(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ct(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Nt(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-gt(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|4194090&n}function Rt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-gt(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Lt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pt(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function kt(){var e=ze.p;return 0!==e?e:void 0===(e=window.event)?32:ff(e.type)}var Ut=Math.random().toString(36).slice(2),It="__reactFiber$"+Ut,Dt="__reactProps$"+Ut,Ot="__reactContainer$"+Ut,zt="__reactEvents$"+Ut,Ft="__reactListeners$"+Ut,jt="__reactHandles$"+Ut,Bt="__reactResources$"+Ut,Ht="__reactMarker$"+Ut;function Vt(e){delete e[It],delete e[Dt],delete e[zt],delete e[Ft],delete e[jt]}function Gt(e){var t=e[It];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ot]||n[It]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Sh(e);null!==e;){if(n=e[It])return n;e=Sh(e)}return t}n=(e=n).parentNode}return null}function Wt(e){if(e=e[It]||e[Ot]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Xt(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(ce(33))}function qt(e){var t=e[Bt];return t||(t=e[Bt]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Yt(e){e[Ht]=!0}var $t=new Set,Kt={};function Zt(e,t){Qt(e,t),Qt(e+"Capture",t)}function Qt(e,t){for(Kt[e]=t,e=0;e<t.length;e++)$t.add(t[e])}var Jt,en,tn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nn={},rn={};function an(e,t,n){if(r=t,Je.call(rn,r)||!Je.call(nn,r)&&(tn.test(r)?rn[r]=!0:(nn[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function sn(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function on(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function ln(e){if(void 0===Jt)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Jt=t&&t[1]||"",en=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Jt+e+en}var cn=!1;function un(e,t){if(!e||cn)return"";cn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var i=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(a){i=a}e.call(n.prototype)}}else{try{throw Error()}catch(s){i=s}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&i&&"string"==typeof o.stack)return[o.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split("\n"),c=o.split("\n");for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(1!==i||1!==r)do{if(i--,0>--r||l[i]!==c[r]){var u="\n"+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=i&&0<=r);break}}}finally{cn=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ln(n):""}function dn(e){switch(e.tag){case 26:case 27:case 5:return ln(e.type);case 16:return ln("Lazy");case 13:return ln("Suspense");case 19:return ln("SuspenseList");case 0:case 15:return un(e.type,!1);case 11:return un(e.type.render,!1);case 1:return un(e.type,!0);case 31:return ln("Activity");default:return""}}function hn(e){try{var t="";do{t+=dn(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function fn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function pn(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function mn(e){e._valueTracker||(e._valueTracker=function(e){var t=pn(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function gn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=pn(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function vn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var xn=/[\n"\\]/g;function _n(e){return e.replace(xn,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yn(e,t,n,i,r,a,s,o){e.name="",null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+fn(t)):e.value!==""+fn(t)&&(e.value=""+fn(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?Sn(e,s,fn(t)):null!=n?Sn(e,s,fn(n)):null!=i&&e.removeAttribute("value"),null==r&&null!=a&&(e.defaultChecked=!!a),null!=r&&(e.checked=r&&"function"!=typeof r&&"symbol"!=typeof r),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+fn(o):e.removeAttribute("name")}function bn(e,t,n,i,r,a,s,o){if(null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.type=a),null!=t||null!=n){if(("submit"===a||"reset"===a)&&null==t)return;n=null!=n?""+fn(n):"",t=null!=t?""+fn(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}i="function"!=typeof(i=null!=i?i:r)&&"symbol"!=typeof i&&!!i,e.checked=o?e.checked:!!i,e.defaultChecked=!!i,null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.name=s)}function Sn(e,t,n){"number"===t&&vn(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Mn(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+fn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function wn(e,t,n){null==t||((t=""+fn(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+fn(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function En(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(ce(92));if(De(i)){if(1<i.length)throw Error(ce(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=fn(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i)}function Tn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var An=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cn(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!=typeof n||0===n||An.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Nn(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(ce(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Cn(e,r,i)}else for(var a in t)t.hasOwnProperty(a)&&Cn(e,a,t[a])}function Rn(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ln=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kn(e){return Pn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Un=null;function In(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dn=null,On=null;function zn(e){var t=Wt(e);if(t&&(e=t.stateNode)){var n=e[Dt]||null;e:switch(e=t.stateNode,t.type){case"input":if(yn(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+_n(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Dt]||null;if(!r)throw Error(ce(90));yn(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&gn(i)}break e;case"textarea":wn(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&Mn(e,!!n.multiple,t,!1)}}}var Fn=!1;function jn(e,t,n){if(Fn)return e(t,n);Fn=!0;try{return e(t)}finally{if(Fn=!1,(null!==Dn||null!==On)&&(Gu(),Dn&&(t=Dn,e=On,On=Dn=null,zn(t),e)))for(t=0;t<e.length;t++)zn(e[t])}}function Bn(e,t){var n=e.stateNode;if(null===n)return null;var i=n[Dt]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(ce(231,t,typeof n));return n}var Hn=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Vn=!1;if(Hn)try{var Gn={};Object.defineProperty(Gn,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",Gn,Gn),window.removeEventListener("test",Gn,Gn)}catch(wS){Vn=!1}var Wn=null,Xn=null,qn=null;function Yn(){if(qn)return qn;var e,t,n=Xn,i=n.length,r="value"in Wn?Wn.value:Wn.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[a-t];t++);return qn=r.slice(e,1<t?1-t:void 0)}function $n(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kn(){return!0}function Zn(){return!1}function Qn(e){function t(t,n,i,r,a){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Kn:Zn,this.isPropagationStopped=Zn,this}return me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kn)},persist:function(){},isPersistent:Kn}),t}var Jn,ei,ti,ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ii=Qn(ni),ri=me({},ni,{view:0,detail:0}),ai=Qn(ri),si=me({},ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vi,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ti&&(ti&&"mousemove"===e.type?(Jn=e.screenX-ti.screenX,ei=e.screenY-ti.screenY):ei=Jn=0,ti=e),Jn)},movementY:function(e){return"movementY"in e?e.movementY:ei}}),oi=Qn(si),li=Qn(me({},si,{dataTransfer:0})),ci=Qn(me({},ri,{relatedTarget:0})),ui=Qn(me({},ni,{animationName:0,elapsedTime:0,pseudoElement:0})),di=Qn(me({},ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hi=Qn(me({},ni,{data:0})),fi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mi[e])&&!!t[e]}function vi(){return gi}var xi=Qn(me({},ri,{key:function(e){if(e.key){var t=fi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$n(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vi,charCode:function(e){return"keypress"===e.type?$n(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$n(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),_i=Qn(me({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yi=Qn(me({},ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vi})),bi=Qn(me({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0})),Si=Qn(me({},si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Mi=Qn(me({},ni,{newState:0,oldState:0})),wi=[9,13,27,32],Ei=Hn&&"CompositionEvent"in window,Ti=null;Hn&&"documentMode"in document&&(Ti=document.documentMode);var Ai=Hn&&"TextEvent"in window&&!Ti,Ci=Hn&&(!Ei||Ti&&8<Ti&&11>=Ti),Ni=String.fromCharCode(32),Ri=!1;function Li(e,t){switch(e){case"keyup":return-1!==wi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pi(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ki=!1;var Ui={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ii(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ui[e.type]:"textarea"===t}function Di(e,t,n,i){Dn?On?On.push(i):On=[i]:Dn=i,0<(t=qd(t,"onChange")).length&&(n=new ii("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Oi=null,zi=null;function Fi(e){Fd(e,0)}function ji(e){if(gn(Xt(e)))return e}function Bi(e,t){if("change"===e)return t}var Hi=!1;if(Hn){var Vi;if(Hn){var Gi="oninput"in document;if(!Gi){var Wi=document.createElement("div");Wi.setAttribute("oninput","return;"),Gi="function"==typeof Wi.oninput}Vi=Gi}else Vi=!1;Hi=Vi&&(!document.documentMode||9<document.documentMode)}function Xi(){Oi&&(Oi.detachEvent("onpropertychange",qi),zi=Oi=null)}function qi(e){if("value"===e.propertyName&&ji(zi)){var t=[];Di(t,zi,e,In(e)),jn(Fi,t)}}function Yi(e,t,n){"focusin"===e?(Xi(),zi=n,(Oi=t).attachEvent("onpropertychange",qi)):"focusout"===e&&Xi()}function $i(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ji(zi)}function Ki(e,t){if("click"===e)return ji(t)}function Zi(e,t){if("input"===e||"change"===e)return ji(t)}var Qi="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Ji(e,t){if(Qi(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Je.call(t,r)||!Qi(e[r],t[r]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,i=er(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=er(i)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ir(e){for(var t=vn((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=vn((e=t.contentWindow).document)}return t}function rr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ar=Hn&&"documentMode"in document&&11>=document.documentMode,sr=null,or=null,lr=null,cr=!1;function ur(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==sr||sr!==vn(i)||("selectionStart"in(i=sr)&&rr(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},lr&&Ji(lr,i)||(lr=i,0<(i=qd(or,"onSelect")).length&&(t=new ii("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=sr)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},pr={};function mr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}Hn&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=mr("animationend"),vr=mr("animationiteration"),xr=mr("animationstart"),_r=mr("transitionrun"),yr=mr("transitionstart"),br=mr("transitioncancel"),Sr=mr("transitionend"),Mr=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Mr.set(e,t),Zt(t,[e])}wr.push("scrollEnd");var Tr=new WeakMap;function Ar(e,t){if("object"==typeof e&&null!==e){var n=Tr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:hn(t)},Tr.set(e,t),t)}return{value:e,source:t,stack:hn(t)}}var Cr=[],Nr=0,Rr=0;function Lr(){for(var e=Nr,t=Rr=Nr=0;t<e;){var n=Cr[t];Cr[t++]=null;var i=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var a=Cr[t];if(Cr[t++]=null,null!==i&&null!==r){var s=i.pending;null===s?r.next=r:(r.next=s.next,s.next=r),i.pending=r}0!==a&&Ir(n,r,a)}}function Pr(e,t,n,i){Cr[Nr++]=e,Cr[Nr++]=t,Cr[Nr++]=n,Cr[Nr++]=i,Rr|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function kr(e,t,n,i){return Pr(e,t,n,i),Dr(e)}function Ur(e,t){return Pr(e,null,null,t),Dr(e)}function Ir(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var r=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(i=a.alternate)&&(i.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(r=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,r&&null!==t&&(r=31-gt(n),null===(i=(e=a.hiddenUpdates)[r])?e[r]=[t]:i.push(t),t.lane=536870912|n),a):null}function Dr(e){if(50<Iu)throw Iu=0,Du=null,Error(ce(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function zr(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,i){return new zr(e,t,n,i)}function jr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Hr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,i,r,a){var s=0;if(i=e,"function"==typeof e)jr(e)&&(s=1);else if("string"==typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,We.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case Re:return(e=Fr(31,n,t,r)).elementType=Re,e.lanes=a,e;case _e:return Gr(n.children,r,a,t);case ye:s=8,r|=24;break;case be:return(e=Fr(12,n,t,2|r)).elementType=be,e.lanes=a,e;case Te:return(e=Fr(13,n,t,r)).elementType=Te,e.lanes=a,e;case Ae:return(e=Fr(19,n,t,r)).elementType=Ae,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Se:case we:s=10;break e;case Me:s=9;break e;case Ee:s=11;break e;case Ce:s=14;break e;case Ne:s=16,i=null;break e}s=29,n=Error(ce(130,null===e?"null":typeof e,"")),i=null}return(t=Fr(s,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Gr(e,t,n,i){return(e=Fr(7,e,i,t)).lanes=n,e}function Wr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function Xr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qr=[],Yr=0,$r=null,Kr=0,Zr=[],Qr=0,Jr=null,ea=1,ta="";function na(e,t){qr[Yr++]=Kr,qr[Yr++]=$r,$r=e,Kr=t}function ia(e,t,n){Zr[Qr++]=ea,Zr[Qr++]=ta,Zr[Qr++]=Jr,Jr=e;var i=ea;e=ta;var r=32-gt(i)-1;i&=~(1<<r),n+=1;var a=32-gt(t)+r;if(30<a){var s=r-r%5;a=(i&(1<<s)-1).toString(32),i>>=s,r-=s,ea=1<<32-gt(t)+r|n<<r|i,ta=a+e}else ea=1<<a|n<<r|i,ta=e}function ra(e){null!==e.return&&(na(e,1),ia(e,1,0))}function aa(e){for(;e===$r;)$r=qr[--Yr],qr[Yr]=null,Kr=qr[--Yr],qr[Yr]=null;for(;e===Jr;)Jr=Zr[--Qr],Zr[Qr]=null,ta=Zr[--Qr],Zr[Qr]=null,ea=Zr[--Qr],Zr[Qr]=null}var sa=null,oa=null,la=!1,ca=null,ua=!1,da=Error(ce(519));function ha(e){throw xa(Ar(Error(ce(418,"")),e)),da}function fa(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[It]=e,t[Dt]=i,n){case"dialog":jd("cancel",t),jd("close",t);break;case"iframe":case"object":case"embed":jd("load",t);break;case"video":case"audio":for(n=0;n<Od.length;n++)jd(Od[n],t);break;case"source":jd("error",t);break;case"img":case"image":case"link":jd("error",t),jd("load",t);break;case"details":jd("toggle",t);break;case"input":jd("invalid",t),bn(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),mn(t);break;case"select":jd("invalid",t);break;case"textarea":jd("invalid",t),En(t,i.value,i.defaultValue,i.children),mn(t)}"string"!=typeof(n=i.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||Jd(t.textContent,n)?(null!=i.popover&&(jd("beforetoggle",t),jd("toggle",t)),null!=i.onScroll&&jd("scroll",t),null!=i.onScrollEnd&&jd("scrollend",t),null!=i.onClick&&(t.onclick=eh),t=!0):t=!1,t||ha(e)}function pa(e){for(sa=e.return;sa;)switch(sa.tag){case 5:case 13:return void(ua=!1);case 27:case 3:return void(ua=!0);default:sa=sa.return}}function ma(e){if(e!==sa)return!1;if(!la)return pa(e),la=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ch(e.type,e.memoizedProps)),t=!t),t&&oa&&ha(e),pa(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ce(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){oa=yh(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}oa=null}}else 27===n?(n=oa,gh(e.type)?(e=bh,bh=null,oa=e):oa=n):oa=sa?yh(e.stateNode.nextSibling):null;return!0}function ga(){oa=sa=null,la=!1}function va(){var e=ca;return null!==e&&(null===Su?Su=e:Su.push.apply(Su,e),ca=null),e}function xa(e){null===ca?ca=[e]:ca.push(e)}var _a=He(null),ya=null,ba=null;function Sa(e,t,n){Ge(_a,t._currentValue),t._currentValue=n}function Ma(e){e._currentValue=_a.current,Ve(_a)}function wa(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t,n,i){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var a=r.dependencies;if(null!==a){var s=r.child;a=a.firstContext;e:for(;null!==a;){var o=a;a=r;for(var l=0;l<t.length;l++)if(o.context===t[l]){a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),wa(a.return,n,e),i||(s=null);break e}a=o.next}}else if(18===r.tag){if(null===(s=r.return))throw Error(ce(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),wa(s,n,e),s=null}else s=r.child;if(null!==s)s.return=r;else for(s=r;null!==s;){if(s===e){s=null;break}if(null!==(r=s.sibling)){r.return=s.return,s=r;break}s=s.return}r=s}}function Ta(e,t,n,i){e=null;for(var r=t,a=!1;null!==r;){if(!a)if(524288&r.flags)a=!0;else if(262144&r.flags)break;if(10===r.tag){var s=r.alternate;if(null===s)throw Error(ce(387));if(null!==(s=s.memoizedProps)){var o=r.type;Qi(r.pendingProps.value,s.value)||(null!==e?e.push(o):e=[o])}}else if(r===Ye.current){if(null===(s=r.alternate))throw Error(ce(387));s.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(Zh):e=[Zh])}r=r.return}null!==e&&Ea(t,e,n,i),t.flags|=262144}function Aa(e){for(e=e.firstContext;null!==e;){if(!Qi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ca(e){ya=e,ba=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Na(e){return La(ya,e)}function Ra(e,t){return null===ya&&Ca(e),La(e,t)}function La(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ba){if(null===e)throw Error(ce(308));ba=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ba=ba.next=t;return n}var Pa="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ka=se.unstable_scheduleCallback,Ua=se.unstable_NormalPriority,Ia={$$typeof:we,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Da(){return{controller:new Pa,data:new Map,refCount:0}}function Oa(e){e.refCount--,0===e.refCount&&ka(Ua,function(){e.controller.abort()})}var za=null,Fa=0,ja=0,Ba=null;function Ha(){if(0===--Fa&&null!==za){null!==Ba&&(Ba.status="fulfilled");var e=za;za=null,ja=0,Ba=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Va=Oe.S;Oe.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===za){var n=za=[];Fa=0,ja=Pd(),Ba={status:"pending",value:void 0,then:function(e){n.push(e)}}}Fa++,t.then(Ha,Ha)}(0,t),null!==Va&&Va(e,t)};var Ga=He(null);function Wa(){var e=Ga.current;return null!==e?e:su.pooledCache}function Xa(e,t){Ge(Ga,null===t?Ga.current:t.pool)}function qa(){var e=Wa();return null===e?null:{parent:Ia._currentValue,pool:e}}var Ya=Error(ce(460)),$a=Error(ce(474)),Ka=Error(ce(542)),Za={then:function(){}};function Qa(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ja(){}function es(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ja,Ja),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw is(e=t.reason),e;default:if("string"==typeof t.status)t.then(Ja,Ja);else{if(null!==(e=su)&&100<e.shellSuspendCounter)throw Error(ce(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw is(e=t.reason),e}throw ts=t,Ya}}var ts=null;function ns(){if(null===ts)throw Error(ce(459));var e=ts;return ts=null,e}function is(e){if(e===Ya||e===Ka)throw Error(ce(483))}var rs=!1;function as(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ss(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function os(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ls(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,2&au){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Dr(e),Ir(e,null,n),t}return Pr(e,i,t,n),Dr(e)}function cs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Rt(e,n)}}function us(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?r=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ds=!1;function hs(){if(ds){if(null!==Ba)throw Ba}}function fs(e,t,n,i){ds=!1;var r=e.updateQueue;rs=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=r.baseState;for(s=0,u=c=l=null,o=a;;){var h=-536870913&o.lane,f=h!==o.lane;if(f?(lu&h)===h:(i&h)===h){0!==h&&h===ja&&(ds=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,m=o;h=t;var g=n;switch(m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(g,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(g,d,h):p))break e;d=me({},d,h);break e;case 2:rs=!0}}null!==(h=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=r.callbacks)?r.callbacks=[h]:f.push(h))}else f={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(f=o).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null===a&&(r.shared.lanes=0),gu|=s,e.lanes=s,e.memoizedState=d}}function ps(e,t){if("function"!=typeof e)throw Error(ce(191,e));e.call(t)}function ms(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ps(n[e],t)}var gs=He(null),vs=He(0);function xs(e,t){Ge(vs,e=pu),Ge(gs,t),pu=e|t.baseLanes}function _s(){Ge(vs,pu),Ge(gs,gs.current)}function ys(){pu=vs.current,Ve(gs),Ve(vs)}var bs=0,Ss=null,Ms=null,ws=null,Es=!1,Ts=!1,As=!1,Cs=0,Ns=0,Rs=null,Ls=0;function Ps(){throw Error(ce(321))}function ks(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qi(e[n],t[n]))return!1;return!0}function Us(e,t,n,i,r,a){return bs=a,Ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Oe.H=null===e||null===e.memoizedState?$o:Ko,As=!1,a=n(i,r),As=!1,Ts&&(a=Ds(t,n,i,r)),Is(e),a}function Is(e){Oe.H=Yo;var t=null!==Ms&&null!==Ms.next;if(bs=0,ws=Ms=Ss=null,Es=!1,Ns=0,Rs=null,t)throw Error(ce(300));null===e||Rl||null!==(e=e.dependencies)&&Aa(e)&&(Rl=!0)}function Ds(e,t,n,i){Ss=e;var r=0;do{if(Ts&&(Rs=null),Ns=0,Ts=!1,25<=r)throw Error(ce(301));if(r+=1,ws=Ms=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}Oe.H=Zo,a=t(n,i)}while(Ts);return a}function Os(){var e=Oe.H,t=e.useState()[0];return t="function"==typeof t.then?Vs(t):t,e=e.useState()[0],(null!==Ms?Ms.memoizedState:null)!==e&&(Ss.flags|=1024),t}function zs(){var e=0!==Cs;return Cs=0,e}function Fs(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function js(e){if(Es){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Es=!1}bs=0,ws=Ms=Ss=null,Ts=!1,Ns=Cs=0,Rs=null}function Bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ws?Ss.memoizedState=ws=e:ws=ws.next=e,ws}function Hs(){if(null===Ms){var e=Ss.alternate;e=null!==e?e.memoizedState:null}else e=Ms.next;var t=null===ws?Ss.memoizedState:ws.next;if(null!==t)ws=t,Ms=e;else{if(null===e){if(null===Ss.alternate)throw Error(ce(467));throw Error(ce(310))}e={memoizedState:(Ms=e).memoizedState,baseState:Ms.baseState,baseQueue:Ms.baseQueue,queue:Ms.queue,next:null},null===ws?Ss.memoizedState=ws=e:ws=ws.next=e}return ws}function Vs(e){var t=Ns;return Ns+=1,null===Rs&&(Rs=[]),e=es(Rs,e,t),t=Ss,null===(null===ws?t.memoizedState:ws.next)&&(t=t.alternate,Oe.H=null===t||null===t.memoizedState?$o:Ko),e}function Gs(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Vs(e);if(e.$$typeof===we)return Na(e)}throw Error(ce(438,String(e)))}function Ws(e){var t=null,n=Ss.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=Ss.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Ss.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=Le;return t.index++,n}function Xs(e,t){return"function"==typeof t?t(e):t}function qs(e){return Ys(Hs(),Ms,e)}function Ys(e,t,n){var i=e.queue;if(null===i)throw Error(ce(311));i.lastRenderedReducer=n;var r=e.baseQueue,a=i.pending;if(null!==a){if(null!==r){var s=r.next;r.next=a.next,a.next=s}t.baseQueue=r=a,i.pending=null}if(a=e.baseState,null===r)e.memoizedState=a;else{var o=s=null,l=null,c=t=r.next,u=!1;do{var d=-536870913&c.lane;if(d!==c.lane?(lu&d)===d:(bs&d)===d){var h=c.revertLane;if(0===h)null!==l&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===ja&&(u=!0);else{if((bs&h)===h){c=c.next,h===ja&&(u=!0);continue}d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(o=l=d,s=a):l=l.next=d,Ss.lanes|=h,gu|=h}d=c.action,As&&n(a,d),a=c.hasEagerState?c.eagerState:n(a,d)}else h={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(o=l=h,s=a):l=l.next=h,Ss.lanes|=d,gu|=d;c=c.next}while(null!==c&&c!==t);if(null===l?s=a:l.next=o,!Qi(a,e.memoizedState)&&(Rl=!0,u&&null!==(n=Ba)))throw n;e.memoizedState=a,e.baseState=s,e.baseQueue=l,i.lastRenderedState=a}return null===r&&(i.lanes=0),[e.memoizedState,i.dispatch]}function $s(e){var t=Hs(),n=t.queue;if(null===n)throw Error(ce(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{a=e(a,s.action),s=s.next}while(s!==r);Qi(a,t.memoizedState)||(Rl=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Ks(e,t,n){var i=Ss,r=Hs(),a=la;if(a){if(void 0===n)throw Error(ce(407));n=n()}else n=t();var s=!Qi((Ms||r).memoizedState,n);if(s&&(r.memoizedState=n,Rl=!0),r=r.queue,yo(2048,8,Js.bind(null,i,r,e),[e]),r.getSnapshot!==t||s||null!==ws&&1&ws.memoizedState.tag){if(i.flags|=2048,vo(9,{destroy:void 0,resource:void 0},Qs.bind(null,i,r,n,t),null),null===su)throw Error(ce(349));a||124&bs||Zs(i,t,n)}return n}function Zs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Ss.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ss.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qs(e,t,n,i){t.value=n,t.getSnapshot=i,eo(t)&&to(e)}function Js(e,t,n){return n(function(){eo(t)&&to(e)})}function eo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qi(e,n)}catch(i){return!0}}function to(e){var t=Ur(e,2);null!==t&&Fu(t,e,2)}function no(e){var t=Bs();if("function"==typeof e){var n=e;if(e=n(),As){mt(!0);try{n()}finally{mt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:e},t}function io(e,t,n,i){return e.baseState=n,Ys(e,Ms,"function"==typeof i?i:Xs)}function ro(e,t,n,i,r){if(Wo(e))throw Error(ce(485));if(null!==(e=t.action)){var a={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==Oe.T?n(!0):a.isTransition=!1,i(a),null===(n=t.pending)?(a.next=t.pending=a,ao(t,a)):(a.next=n.next,t.pending=n.next=a)}}function ao(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var a=Oe.T,s={};Oe.T=s;try{var o=n(r,i),l=Oe.S;null!==l&&l(s,o),so(e,t,o)}catch(c){lo(e,t,c)}finally{Oe.T=a}}else try{so(e,t,a=n(r,i))}catch(u){lo(e,t,u)}}function so(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){oo(e,t,n)},function(n){return lo(e,t,n)}):oo(e,t,n)}function oo(e,t,n){t.status="fulfilled",t.value=n,co(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ao(e,n)))}function lo(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,co(t),t=t.next}while(t!==i)}e.action=null}function co(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function uo(e,t){return t}function ho(e,t){if(la){var n=su.formState;if(null!==n){e:{var i=Ss;if(la){if(oa){t:{for(var r=oa,a=ua;8!==r.nodeType;){if(!a){r=null;break t}if(null===(r=yh(r.nextSibling))){r=null;break t}}r="F!"===(a=r.data)||"F"===a?r:null}if(r){oa=yh(r.nextSibling),i="F!"===r.data;break e}}ha(i)}i=!1}i&&(t=n[0])}}return(n=Bs()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:t},n.queue=i,n=Ho.bind(null,Ss,i),i.dispatch=n,i=no(!1),a=Go.bind(null,Ss,!1,i.queue),r={state:t,dispatch:null,action:e,pending:null},(i=Bs()).queue=r,n=ro.bind(null,Ss,r,a,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function fo(e){return po(Hs(),Ms,e)}function po(e,t,n){if(t=Ys(e,t,uo)[0],e=qs(Xs)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var i=Vs(t)}catch(s){if(s===Ya)throw Ka;throw s}else i=t;var r=(t=Hs()).queue,a=r.dispatch;return n!==t.memoizedState&&(Ss.flags|=2048,vo(9,{destroy:void 0,resource:void 0},mo.bind(null,r,n),null)),[i,a,e]}function mo(e,t){e.action=t}function go(e){var t=Hs(),n=Ms;if(null!==n)return po(t,n,e);Hs(),t=t.memoizedState;var i=(n=Hs()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function vo(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},null===(t=Ss.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ss.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function xo(){return Hs().memoizedState}function _o(e,t,n,i){var r=Bs();i=void 0===i?null:i,Ss.flags|=e,r.memoizedState=vo(1|t,{destroy:void 0,resource:void 0},n,i)}function yo(e,t,n,i){var r=Hs();i=void 0===i?null:i;var a=r.memoizedState.inst;null!==Ms&&null!==i&&ks(i,Ms.memoizedState.deps)?r.memoizedState=vo(t,a,n,i):(Ss.flags|=e,r.memoizedState=vo(1|t,a,n,i))}function bo(e,t){_o(8390656,8,e,t)}function So(e,t){yo(2048,8,e,t)}function Mo(e,t){return yo(4,2,e,t)}function wo(e,t){return yo(4,4,e,t)}function Eo(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function To(e,t,n){n=null!=n?n.concat([e]):null,yo(4,4,Eo.bind(null,t,e),n)}function Ao(){}function Co(e,t){var n=Hs();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&ks(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=Hs();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&ks(t,i[1]))return i[0];if(i=e(),As){mt(!0);try{e()}finally{mt(!1)}}return n.memoizedState=[i,t],i}function Ro(e,t,n){return void 0===n||1073741824&bs?e.memoizedState=t:(e.memoizedState=n,e=zu(),Ss.lanes|=e,gu|=e,n)}function Lo(e,t,n,i){return Qi(n,t)?n:null!==gs.current?(e=Ro(e,n,i),Qi(e,t)||(Rl=!0),e):42&bs?(e=zu(),Ss.lanes|=e,gu|=e,t):(Rl=!0,e.memoizedState=n)}function Po(e,t,n,i,r){var a=ze.p;ze.p=0!==a&&8>a?a:8;var s,o,l,c=Oe.T,u={};Oe.T=u,Go(e,!1,t,n);try{var d=r(),h=Oe.S;if(null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)Vo(e,t,(s=i,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},d.then(function(){l.status="fulfilled",l.value=s;for(var e=0;e<o.length;e++)(0,o[e])(s)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l),Ou());else Vo(e,t,i,Ou())}catch(f){Vo(e,t,{then:function(){},status:"rejected",reason:f},Ou())}finally{ze.p=a,Oe.T=c}}function ko(){}function Uo(e,t,n,i){if(5!==e.tag)throw Error(ce(476));var r=Io(e).queue;Po(e,r,t,Fe,null===n?ko:function(){return Do(e),n(i)})}function Io(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:Fe,baseState:Fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:Fe},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Do(e){Vo(e,Io(e).next.queue,{},Ou())}function Oo(){return Na(Zh)}function zo(){return Hs().memoizedState}function Fo(){return Hs().memoizedState}function jo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ou(),i=ls(t,e=os(n),n);return null!==i&&(Fu(i,t,n),cs(i,t,n)),t={cache:Da()},void(e.payload=t)}t=t.return}}function Bo(e,t,n){var i=Ou();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Wo(e)?Xo(t,n):null!==(n=kr(e,t,n,i))&&(Fu(n,e,i),qo(n,t,i))}function Ho(e,t,n){Vo(e,t,n,Ou())}function Vo(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wo(e))Xo(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(r.hasEagerState=!0,r.eagerState=o,Qi(o,s))return Pr(e,t,r,0),null===su&&Lr(),!1}catch(l){}if(null!==(n=kr(e,t,r,i)))return Fu(n,e,i),qo(n,t,i),!0}return!1}function Go(e,t,n,i){if(i={lane:2,revertLane:Pd(),action:i,hasEagerState:!1,eagerState:null,next:null},Wo(e)){if(t)throw Error(ce(479))}else null!==(t=kr(e,n,i,2))&&Fu(t,e,2)}function Wo(e){var t=e.alternate;return e===Ss||null!==t&&t===Ss}function Xo(e,t){Ts=Es=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qo(e,t,n){if(4194048&n){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Rt(e,n)}}var Yo={readContext:Na,use:Gs,useCallback:Ps,useContext:Ps,useEffect:Ps,useImperativeHandle:Ps,useLayoutEffect:Ps,useInsertionEffect:Ps,useMemo:Ps,useReducer:Ps,useRef:Ps,useState:Ps,useDebugValue:Ps,useDeferredValue:Ps,useTransition:Ps,useSyncExternalStore:Ps,useId:Ps,useHostTransitionStatus:Ps,useFormState:Ps,useActionState:Ps,useOptimistic:Ps,useMemoCache:Ps,useCacheRefresh:Ps},$o={readContext:Na,use:Gs,useCallback:function(e,t){return Bs().memoizedState=[e,void 0===t?null:t],e},useContext:Na,useEffect:bo,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,_o(4194308,4,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4194308,4,e,t)},useInsertionEffect:function(e,t){_o(4,2,e,t)},useMemo:function(e,t){var n=Bs();t=void 0===t?null:t;var i=e();if(As){mt(!0);try{e()}finally{mt(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Bs();if(void 0!==n){var r=n(t);if(As){mt(!0);try{n(t)}finally{mt(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Bo.bind(null,Ss,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Bs().memoizedState=e},useState:function(e){var t=(e=no(e)).queue,n=Ho.bind(null,Ss,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ao,useDeferredValue:function(e,t){return Ro(Bs(),e,t)},useTransition:function(){var e=no(!1);return e=Po.bind(null,Ss,e.queue,!0,!1),Bs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Ss,r=Bs();if(la){if(void 0===n)throw Error(ce(407));n=n()}else{if(n=t(),null===su)throw Error(ce(349));124&lu||Zs(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,bo(Js.bind(null,i,a,e),[e]),i.flags|=2048,vo(9,{destroy:void 0,resource:void 0},Qs.bind(null,i,a,n,t),null),n},useId:function(){var e=Bs(),t=su.identifierPrefix;if(la){var n=ta;t="«"+t+"R"+(n=(ea&~(1<<32-gt(ea)-1)).toString(32)+n),0<(n=Cs++)&&(t+="H"+n.toString(32)),t+="»"}else t="«"+t+"r"+(n=Ls++).toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Oo,useFormState:ho,useActionState:ho,useOptimistic:function(e){var t=Bs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Go.bind(null,Ss,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ws,useCacheRefresh:function(){return Bs().memoizedState=jo.bind(null,Ss)}},Ko={readContext:Na,use:Gs,useCallback:Co,useContext:Na,useEffect:So,useImperativeHandle:To,useInsertionEffect:Mo,useLayoutEffect:wo,useMemo:No,useReducer:qs,useRef:xo,useState:function(){return qs(Xs)},useDebugValue:Ao,useDeferredValue:function(e,t){return Lo(Hs(),Ms.memoizedState,e,t)},useTransition:function(){var e=qs(Xs)[0],t=Hs().memoizedState;return["boolean"==typeof e?e:Vs(e),t]},useSyncExternalStore:Ks,useId:zo,useHostTransitionStatus:Oo,useFormState:fo,useActionState:fo,useOptimistic:function(e,t){return io(Hs(),0,e,t)},useMemoCache:Ws,useCacheRefresh:Fo},Zo={readContext:Na,use:Gs,useCallback:Co,useContext:Na,useEffect:So,useImperativeHandle:To,useInsertionEffect:Mo,useLayoutEffect:wo,useMemo:No,useReducer:$s,useRef:xo,useState:function(){return $s(Xs)},useDebugValue:Ao,useDeferredValue:function(e,t){var n=Hs();return null===Ms?Ro(n,e,t):Lo(n,Ms.memoizedState,e,t)},useTransition:function(){var e=$s(Xs)[0],t=Hs().memoizedState;return["boolean"==typeof e?e:Vs(e),t]},useSyncExternalStore:Ks,useId:zo,useHostTransitionStatus:Oo,useFormState:go,useActionState:go,useOptimistic:function(e,t){var n=Hs();return null!==Ms?io(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ws,useCacheRefresh:Fo},Qo=null,Jo=0;function el(e){var t=Jo;return Jo+=1,null===Qo&&(Qo=[]),es(Qo,e,t)}function tl(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function nl(e,t){if(t.$$typeof===ge)throw Error(ce(525));throw e=Object.prototype.toString.call(t),Error(ce(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function il(e){return(0,e._init)(e._payload)}function rl(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Br(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=67108866,n):i:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function o(e,t,n,i){return null===t||6!==t.tag?((t=Wr(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,i){var a=n.type;return a===_e?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===Ne&&il(a)===t.type)?(tl(t=r(t,n.props),n),t.return=e,t):(tl(t=Vr(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xr(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,i,a){return null===t||7!==t.tag?((t=Gr(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Wr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ve:return tl(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case xe:return(t=Xr(t,e.mode,n)).return=e,t;case Ne:return d(e,t=(0,t._init)(t._payload),n)}if(De(t)||ke(t))return(t=Gr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return d(e,el(t),n);if(t.$$typeof===we)return d(e,Ra(e,t),n);nl(e,t)}return null}function h(e,t,n,i){var r=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==r?null:o(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ve:return n.key===r?l(e,t,n,i):null;case xe:return n.key===r?c(e,t,n,i):null;case Ne:return h(e,t,n=(r=n._init)(n._payload),i)}if(De(n)||ke(n))return null!==r?null:u(e,t,n,i,null);if("function"==typeof n.then)return h(e,t,el(n),i);if(n.$$typeof===we)return h(e,t,Ra(e,n),i);nl(e,n)}return null}function f(e,t,n,i,r){if("string"==typeof i&&""!==i||"number"==typeof i||"bigint"==typeof i)return o(t,e=e.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case ve:return l(t,e=e.get(null===i.key?n:i.key)||null,i,r);case xe:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case Ne:return f(e,t,n,i=(0,i._init)(i._payload),r)}if(De(i)||ke(i))return u(t,e=e.get(n)||null,i,r,null);if("function"==typeof i.then)return f(e,t,n,el(i),r);if(i.$$typeof===we)return f(e,t,n,Ra(t,i),r);nl(t,i)}return null}function p(o,l,c,u){if("object"==typeof c&&null!==c&&c.type===_e&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case ve:e:{for(var m=c.key;null!==l;){if(l.key===m){if((m=c.type)===_e){if(7===l.tag){n(o,l.sibling),(u=r(l,c.props.children)).return=o,o=u;break e}}else if(l.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===Ne&&il(m)===l.type){n(o,l.sibling),tl(u=r(l,c.props),c),u.return=o,o=u;break e}n(o,l);break}t(o,l),l=l.sibling}c.type===_e?((u=Gr(c.props.children,o.mode,u,c.key)).return=o,o=u):(tl(u=Vr(c.type,c.key,c.props,null,o.mode,u),c),u.return=o,o=u)}return s(o);case xe:e:{for(m=c.key;null!==l;){if(l.key===m){if(4===l.tag&&l.stateNode.containerInfo===c.containerInfo&&l.stateNode.implementation===c.implementation){n(o,l.sibling),(u=r(l,c.children||[])).return=o,o=u;break e}n(o,l);break}t(o,l),l=l.sibling}(u=Xr(c,o.mode,u)).return=o,o=u}return s(o);case Ne:return p(o,l,c=(m=c._init)(c._payload),u)}if(De(c))return function(r,s,o,l){for(var c=null,u=null,p=s,m=s=0,g=null;null!==p&&m<o.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var v=h(r,p,o[m],l);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(r,p),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,p=g}if(m===o.length)return n(r,p),la&&na(r,m),c;if(null===p){for(;m<o.length;m++)null!==(p=d(r,o[m],l))&&(s=a(p,s,m),null===u?c=p:u.sibling=p,u=p);return la&&na(r,m),c}for(p=i(p);m<o.length;m++)null!==(g=f(p,r,m,o[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&p.forEach(function(e){return t(r,e)}),la&&na(r,m),c}(o,l,c,u);if(ke(c)){if("function"!=typeof(m=ke(c)))throw Error(ce(150));return function(r,s,o,l){if(null==o)throw Error(ce(151));for(var c=null,u=null,p=s,m=s=0,g=null,v=o.next();null!==p&&!v.done;m++,v=o.next()){p.index>m?(g=p,p=null):g=p.sibling;var x=h(r,p,v.value,l);if(null===x){null===p&&(p=g);break}e&&p&&null===x.alternate&&t(r,p),s=a(x,s,m),null===u?c=x:u.sibling=x,u=x,p=g}if(v.done)return n(r,p),la&&na(r,m),c;if(null===p){for(;!v.done;m++,v=o.next())null!==(v=d(r,v.value,l))&&(s=a(v,s,m),null===u?c=v:u.sibling=v,u=v);return la&&na(r,m),c}for(p=i(p);!v.done;m++,v=o.next())null!==(v=f(p,r,m,v.value,l))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v);return e&&p.forEach(function(e){return t(r,e)}),la&&na(r,m),c}(o,l,c=m.call(c),u)}if("function"==typeof c.then)return p(o,l,el(c),u);if(c.$$typeof===we)return p(o,l,Ra(o,c),u);nl(o,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==l&&6===l.tag?(n(o,l.sibling),(u=r(l,c)).return=o,o=u):(n(o,l),(u=Wr(c,o.mode,u)).return=o,o=u),s(o)):n(o,l)}return function(e,t,n,i){try{Jo=0;var r=p(e,t,n,i);return Qo=null,r}catch(s){if(s===Ya||s===Ka)throw s;var a=Fr(29,s,null,e.mode);return a.lanes=i,a.return=e,a}}}var al=rl(!0),sl=rl(!1),ol=He(null),ll=null;function cl(e){var t=e.alternate;Ge(fl,1&fl.current),Ge(ol,e),null===ll&&(null===t||null!==gs.current||null!==t.memoizedState)&&(ll=e)}function ul(e){if(22===e.tag){if(Ge(fl,fl.current),Ge(ol,e),null===ll){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ll=e)}}else dl()}function dl(){Ge(fl,fl.current),Ge(ol,ol.current)}function hl(e){Ve(ol),ll===e&&(ll=null),Ve(fl)}var fl=He(0);function pl(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||_h(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ml(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:me({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gl={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ou(),r=os(i);r.payload=t,null!=n&&(r.callback=n),null!==(t=ls(e,r,i))&&(Fu(t,e,i),cs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ou(),r=os(i);r.tag=1,r.payload=t,null!=n&&(r.callback=n),null!==(t=ls(e,r,i))&&(Fu(t,e,i),cs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ou(),i=os(n);i.tag=2,null!=t&&(i.callback=t),null!==(t=ls(e,i,n))&&(Fu(t,e,n),cs(t,e,n))}};function vl(e,t,n,i,r,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!Ji(n,i)||!Ji(r,a))}function xl(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&gl.enqueueReplaceState(t,t.state,null)}function _l(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var r in n===t&&(n=me({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}var yl="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)};function bl(e){yl(e)}function Sl(e){}function Ml(e){yl(e)}function wl(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function El(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Tl(e,t,n){return(n=os(n)).tag=3,n.payload={element:null},n.callback=function(){wl(e,t)},n}function Al(e){return(e=os(e)).tag=3,e}function Cl(e,t,n,i){var r=n.type.getDerivedStateFromError;if("function"==typeof r){var a=i.value;e.payload=function(){return r(a)},e.callback=function(){El(t,n,i)}}var s=n.stateNode;null!==s&&"function"==typeof s.componentDidCatch&&(e.callback=function(){El(t,n,i),"function"!=typeof r&&(null===Au?Au=new Set([this]):Au.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var Nl=Error(ce(461)),Rl=!1;function Ll(e,t,n,i){t.child=null===e?sl(t,null,n,i):al(t,e.child,n,i)}function Pl(e,t,n,i,r){n=n.render;var a=t.ref;if("ref"in i){var s={};for(var o in i)"ref"!==o&&(s[o]=i[o])}else s=i;return Ca(t),i=Us(e,t,n,s,a,r),o=zs(),null===e||Rl?(la&&o&&ra(t),t.flags|=1,Ll(e,t,i,r),t.child):(Fs(e,t,r),Ql(e,t,r))}function kl(e,t,n,i,r){if(null===e){var a=n.type;return"function"!=typeof a||jr(a)||void 0!==a.defaultProps||null!==n.compare?((e=Vr(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ul(e,t,a,i,r))}if(a=e.child,!Jl(e,r)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:Ji)(s,i)&&e.ref===t.ref)return Ql(e,t,r)}return t.flags|=1,(e=Br(a,i)).ref=t.ref,e.return=t,t.child=e}function Ul(e,t,n,i,r){if(null!==e){var a=e.memoizedProps;if(Ji(a,i)&&e.ref===t.ref){if(Rl=!1,t.pendingProps=i=a,!Jl(e,r))return t.lanes=e.lanes,Ql(e,t,r);131072&e.flags&&(Rl=!0)}}return zl(e,t,n,i,r)}function Il(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode){if(128&t.flags){if(i=null!==a?a.baseLanes|n:n,null!==e){for(r=t.child=e.child,a=0;null!==r;)a=a|r.lanes|r.childLanes,r=r.sibling;t.childLanes=a&~i}else t.childLanes=0,t.child=null;return Dl(e,t,i,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Dl(e,t,null!==a?a.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xa(0,null!==a?a.cachePool:null),null!==a?xs(t,a):_s(),ul(t)}else null!==a?(Xa(0,a.cachePool),xs(t,a),dl(),t.memoizedState=null):(null!==e&&Xa(0,null),_s(),dl());return Ll(e,t,r,n),t.child}function Dl(e,t,n,i){var r=Wa();return r=null===r?null:{parent:Ia._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&Xa(0,null),_s(),ul(t),null!==e&&Ta(e,t,i,!0),null}function Ol(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(ce(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function zl(e,t,n,i,r){return Ca(t),n=Us(e,t,n,i,void 0,r),i=zs(),null===e||Rl?(la&&i&&ra(t),t.flags|=1,Ll(e,t,n,r),t.child):(Fs(e,t,r),Ql(e,t,r))}function Fl(e,t,n,i,r,a){return Ca(t),t.updateQueue=null,n=Ds(t,i,n,r),Is(e),i=zs(),null===e||Rl?(la&&i&&ra(t),t.flags|=1,Ll(e,t,n,a),t.child):(Fs(e,t,a),Ql(e,t,a))}function jl(e,t,n,i,r){if(Ca(t),null===t.stateNode){var a=Or,s=n.contextType;"object"==typeof s&&null!==s&&(a=Na(s)),a=new n(i,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=gl,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=i,a.state=t.memoizedState,a.refs={},as(t),s=n.contextType,a.context="object"==typeof s&&null!==s?Na(s):Or,a.state=t.memoizedState,"function"==typeof(s=n.getDerivedStateFromProps)&&(ml(t,n,s,i),a.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(s=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),s!==a.state&&gl.enqueueReplaceState(a,a.state,null),fs(t,i,a,r),hs(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=_l(n,o);a.props=l;var c=a.context,u=n.contextType;s=Or,"object"==typeof u&&null!==u&&(s=Na(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o||c!==s)&&xl(t,a,i,s),rs=!1;var h=t.memoizedState;a.state=h,fs(t,i,a,r),hs(),c=t.memoizedState,o||h!==c||rs?("function"==typeof d&&(ml(t,n,d,i),c=t.memoizedState),(l=rs||vl(t,n,l,i,h,c,s))?(u||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),a.props=i,a.state=c,a.context=s,i=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,ss(e,t),u=_l(n,s=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=n.contextType,l=Or,"object"==typeof c&&null!==c&&(l=Na(c)),(c="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||h!==l)&&xl(t,a,i,l),rs=!1,h=t.memoizedState,a.state=h,fs(t,i,a,r),hs();var f=t.memoizedState;s!==d||h!==f||rs||null!==e&&null!==e.dependencies&&Aa(e.dependencies)?("function"==typeof o&&(ml(t,n,o,i),f=t.memoizedState),(u=rs||vl(t,n,u,i,h,f,l)||null!==e&&null!==e.dependencies&&Aa(e.dependencies))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return a=i,Ol(e,t),i=!!(128&t.flags),a||i?(a=t.stateNode,n=i&&"function"!=typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&i?(t.child=al(t,e.child,null,r),t.child=al(t,null,n,r)):Ll(e,t,n,r),t.memoizedState=a.state,e=t.child):e=Ql(e,t,r),e}function Bl(e,t,n,i){return ga(),t.flags|=256,Ll(e,t,n,i),t.child}var Hl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vl(e){return{baseLanes:e,cachePool:qa()}}function Gl(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=_u),e}function Wl(e,t,n){var i,r=t.pendingProps,a=!1,s=!!(128&t.flags);if((i=s)||(i=(null===e||null!==e.memoizedState)&&!!(2&fl.current)),i&&(a=!0,t.flags&=-129),i=!!(32&t.flags),t.flags&=-33,null===e){if(la){if(a?cl(t):dl(),la){var o,l=oa;if(o=l){e:{for(o=l,l=ua;8!==o.nodeType;){if(!l){l=null;break e}if(null===(o=yh(o.nextSibling))){l=null;break e}}l=o}null!==l?(t.memoizedState={dehydrated:l,treeContext:null!==Jr?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},(o=Fr(18,null,null,0)).stateNode=l,o.return=t,t.child=o,sa=t,oa=null,o=!0):o=!1}o||ha(t)}if(null!==(l=t.memoizedState)&&null!==(l=l.dehydrated))return _h(l)?t.lanes=32:t.lanes=536870912,null;hl(t)}return l=r.children,r=r.fallback,a?(dl(),l=ql({mode:"hidden",children:l},a=t.mode),r=Gr(r,a,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,(a=t.child).memoizedState=Vl(n),a.childLanes=Gl(e,i,n),t.memoizedState=Hl,r):(cl(t),Xl(t,l))}if(null!==(o=e.memoizedState)&&null!==(l=o.dehydrated)){if(s)256&t.flags?(cl(t),t.flags&=-257,t=Yl(e,t,n)):null!==t.memoizedState?(dl(),t.child=e.child,t.flags|=128,t=null):(dl(),a=r.fallback,l=t.mode,r=ql({mode:"visible",children:r.children},l),(a=Gr(a,l,n,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,al(t,e.child,null,n),(r=t.child).memoizedState=Vl(n),r.childLanes=Gl(e,i,n),t.memoizedState=Hl,t=a);else if(cl(t),_h(l)){if(i=l.nextSibling&&l.nextSibling.dataset)var c=i.dgst;i=c,(r=Error(ce(419))).stack="",r.digest=i,xa({value:r,source:null,stack:null}),t=Yl(e,t,n)}else if(Rl||Ta(e,t,n,!1),i=0!==(n&e.childLanes),Rl||i){if(null!==(i=su)&&(0!==(r=0!==((r=42&(r=n&-n)?1:Lt(r))&(i.suspendedLanes|n))?0:r)&&r!==o.retryLane))throw o.retryLane=r,Ur(e,r),Fu(i,e,r),Nl;"$?"===l.data||Ku(),t=Yl(e,t,n)}else"$?"===l.data?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,oa=yh(l.nextSibling),sa=t,la=!0,ca=null,ua=!1,null!==e&&(Zr[Qr++]=ea,Zr[Qr++]=ta,Zr[Qr++]=Jr,ea=e.id,ta=e.overflow,Jr=t),(t=Xl(t,r.children)).flags|=4096);return t}return a?(dl(),a=r.fallback,l=t.mode,c=(o=e.child).sibling,(r=Br(o,{mode:"hidden",children:r.children})).subtreeFlags=65011712&o.subtreeFlags,null!==c?a=Br(c,a):(a=Gr(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,null===(l=e.child.memoizedState)?l=Vl(n):(null!==(o=l.cachePool)?(c=Ia._currentValue,o=o.parent!==c?{parent:c,pool:c}:o):o=qa(),l={baseLanes:l.baseLanes|n,cachePool:o}),a.memoizedState=l,a.childLanes=Gl(e,i,n),t.memoizedState=Hl,r):(cl(t),e=(n=e.child).sibling,(n=Br(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Xl(e,t){return(t=ql({mode:"visible",children:t},e.mode)).return=e,e.child=t}function ql(e,t){return(e=Fr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Yl(e,t,n){return al(t,e.child,null,n),(e=Xl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $l(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),wa(e.return,t,n)}function Kl(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Zl(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(Ll(e,t,i.children,n),2&(i=fl.current))i=1&i|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$l(e,n,t);else if(19===e.tag)$l(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(Ge(fl,i),r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===pl(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Kl(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===pl(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Kl(t,!0,n,null,a);break;case"together":Kl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ql(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),gu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ta(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(ce(153));if(null!==t.child){for(n=Br(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Jl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Aa(e))}function ec(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Rl=!0;else{if(!(Jl(e,n)||128&t.flags))return Rl=!1,function(e,t,n){switch(t.tag){case 3:$e(t,t.stateNode.containerInfo),Sa(0,Ia,e.memoizedState.cache),ga();break;case 27:case 5:Ze(t);break;case 4:$e(t,t.stateNode.containerInfo);break;case 10:Sa(0,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(cl(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Wl(e,t,n):(cl(t),null!==(e=Ql(e,t,n))?e.sibling:null);cl(t);break;case 19:var r=!!(128&e.flags);if((i=0!==(n&t.childLanes))||(Ta(e,t,n,!1),i=0!==(n&t.childLanes)),r){if(i)return Zl(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ge(fl,fl.current),i)break;return null;case 22:case 23:return t.lanes=0,Il(e,t,n);case 24:Sa(0,Ia,e.memoizedState.cache)}return Ql(e,t,n)}(e,t,n);Rl=!!(131072&e.flags)}else Rl=!1,la&&1048576&t.flags&&ia(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,"function"!=typeof i){if(null!=i){if((r=i.$$typeof)===Ee){t.tag=11,t=Pl(null,t,i,e,n);break e}if(r===Ce){t.tag=14,t=kl(null,t,i,e,n);break e}}throw t=Ie(i)||i,Error(ce(306,t,""))}jr(i)?(e=_l(i,e),t.tag=1,t=jl(null,t,i,e,n)):(t.tag=0,t=zl(null,t,i,e,n))}return t;case 0:return zl(e,t,t.type,t.pendingProps,n);case 1:return jl(e,t,i=t.type,r=_l(i,t.pendingProps),n);case 3:e:{if($e(t,t.stateNode.containerInfo),null===e)throw Error(ce(387));i=t.pendingProps;var a=t.memoizedState;r=a.element,ss(e,t),fs(t,i,null,n);var s=t.memoizedState;if(i=s.cache,Sa(0,Ia,i),i!==a.cache&&Ea(t,[Ia],n,!0),hs(),i=s.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Bl(e,t,i,n);break e}if(i!==r){xa(r=Ar(Error(ce(424)),t)),t=Bl(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(oa=yh(e.firstChild),sa=t,la=!0,ca=null,ua=!0,n=sl(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ga(),i===r){t=Ql(e,t,n);break e}Ll(e,t,i,n)}t=t.child}return t;case 26:return Ol(e,t),null===e?(n=Lh(t.type,null,t.pendingProps,null))?t.memoizedState=n:la||(n=t.type,e=t.pendingProps,(i=sh(qe.current).createElement(n))[It]=t,i[Dt]=e,ih(i,n,e),Yt(i),t.stateNode=i):t.memoizedState=Lh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ze(t),null===e&&la&&(i=t.stateNode=Mh(t.type,t.pendingProps,qe.current),sa=t,ua=!0,r=oa,gh(t.type)?(bh=r,oa=yh(i.firstChild)):oa=r),Ll(e,t,t.pendingProps.children,n),Ol(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&la&&((r=i=oa)&&(null!==(i=function(e,t,n,i){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[Ht])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===a)return e}if(null===(e=yh(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,ua))?(t.stateNode=i,sa=t,oa=yh(i.firstChild),ua=!1,r=!0):r=!1),r||ha(t)),Ze(t),r=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,i=a.children,ch(r,a)?i=null:null!==s&&ch(r,s)&&(t.flags|=32),null!==t.memoizedState&&(r=Us(e,t,Os,null,null,n),Zh._currentValue=r),Ol(e,t),Ll(e,t,i,n),t.child;case 6:return null===e&&la&&((e=n=oa)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yh(e.nextSibling)))return null}return e}(n,t.pendingProps,ua))?(t.stateNode=n,sa=t,oa=null,e=!0):e=!1),e||ha(t)),null;case 13:return Wl(e,t,n);case 4:return $e(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=al(t,null,i,n):Ll(e,t,i,n),t.child;case 11:return Pl(e,t,t.type,t.pendingProps,n);case 7:return Ll(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ll(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Sa(0,t.type,i.value),Ll(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Ca(t),i=i(r=Na(r)),t.flags|=1,Ll(e,t,i,n),t.child;case 14:return kl(e,t,t.type,t.pendingProps,n);case 15:return Ul(e,t,t.type,t.pendingProps,n);case 19:return Zl(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},null===e?((n=ql(i,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Br(e.child,i)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Il(e,t,n);case 24:return Ca(t),i=Na(Ia),null===e?(null===(r=Wa())&&(r=su,a=Da(),r.pooledCache=a,a.refCount++,null!==a&&(r.pooledCacheLanes|=n),r=a),t.memoizedState={parent:i,cache:r},as(t),Sa(0,Ia,r)):(0!==(e.lanes&n)&&(ss(e,t),fs(t,null,null,n),hs()),r=e.memoizedState,a=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),Sa(0,Ia,i)):(i=a.cache,Sa(0,Ia,i),i!==r.cache&&Ea(t,[Ia],n,!0))),Ll(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(ce(156,t.tag))}function tc(e){e.flags|=4}function nc(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Gh(t)){if(null!==(t=ol.current)&&((4194048&lu)===lu?null!==ll:(62914560&lu)!==lu&&!(536870912&lu)||t!==ll))throw ts=Za,$a;e.flags|=8192}}function ic(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Tt():536870912,e.lanes|=t,yu|=t)}function rc(e,t){if(!la)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ac(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=65011712&r.subtreeFlags,i|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function sc(e,t,n){var i=t.pendingProps;switch(aa(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ac(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ma(Ia),Ke(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ma(t)?tc(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,va())),ac(t),null;case 26:return n=t.memoizedState,null===e?(tc(t),null!==n?(ac(t),nc(t,n)):(ac(t),t.flags&=-16777217)):n?n!==e.memoizedState?(tc(t),ac(t),nc(t,n)):(ac(t),t.flags&=-16777217):(e.memoizedProps!==i&&tc(t),ac(t),t.flags&=-16777217),null;case 27:Qe(t),n=qe.current;var r=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==i&&tc(t);else{if(!i){if(null===t.stateNode)throw Error(ce(166));return ac(t),null}e=We.current,ma(t)?fa(t):(e=Mh(r,i,n),t.stateNode=e,tc(t))}return ac(t),null;case 5:if(Qe(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&tc(t);else{if(!i){if(null===t.stateNode)throw Error(ce(166));return ac(t),null}if(e=We.current,ma(t))fa(t);else{switch(r=sh(qe.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=r.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof i.is?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e="string"==typeof i.is?r.createElement(n,{is:i.is}):r.createElement(n)}}e[It]=t,e[Dt]=i;e:for(r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&27!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;null===r.sibling;){if(null===r.return||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(ih(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&tc(t)}}return ac(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&tc(t);else{if("string"!=typeof i&&null===t.stateNode)throw Error(ce(166));if(e=qe.current,ma(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(r=sa))switch(r.tag){case 27:case 5:i=r.memoizedProps}e[It]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||Jd(e.nodeValue,n)))||ha(t)}else(e=sh(e).createTextNode(i))[It]=t,t.stateNode=e}return ac(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=ma(t),null!==i&&null!==i.dehydrated){if(null===e){if(!r)throw Error(ce(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(ce(317));r[It]=t}else ga(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ac(t),r=!1}else r=va(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(hl(t),t):(hl(t),null)}if(hl(t),128&t.flags)return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){r=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(r=i.alternate.memoizedState.cachePool.pool);var a=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(a=i.memoizedState.cachePool.pool),a!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),ic(t,t.updateQueue),ac(t),null;case 4:return Ke(),null===e&&Vd(t.stateNode.containerInfo),ac(t),null;case 10:return Ma(t.type),ac(t),null;case 19:if(Ve(fl),null===(r=t.memoizedState))return ac(t),null;if(i=!!(128&t.flags),null===(a=r.rendering))if(i)rc(r,!1);else{if(0!==mu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=pl(e))){for(t.flags|=128,rc(r,!1),e=a.updateQueue,t.updateQueue=e,ic(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Hr(n,e),n=n.sibling;return Ge(fl,1&fl.current|2),t.child}e=e.sibling}null!==r.tail&&rt()>Eu&&(t.flags|=128,i=!0,rc(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=pl(a))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ic(t,e),rc(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!la)return ac(t),null}else 2*rt()-r.renderingStartTime>Eu&&536870912!==n&&(t.flags|=128,i=!0,rc(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=rt(),t.sibling=null,e=fl.current,Ge(fl,i?1&e|2:1&e),t):(ac(t),null);case 22:case 23:return hl(t),ys(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?!!(536870912&n)&&!(128&t.flags)&&(ac(t),6&t.subtreeFlags&&(t.flags|=8192)):ac(t),null!==(n=t.updateQueue)&&ic(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&Ve(Ga),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ma(Ia),ac(t),null;case 25:case 30:return null}throw Error(ce(156,t.tag))}function oc(e,t){switch(aa(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ma(Ia),Ke(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Qe(t),null;case 13:if(hl(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ce(340));ga()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ve(fl),null;case 4:return Ke(),null;case 10:return Ma(t.type),null;case 22:case 23:return hl(t),ys(),null!==e&&Ve(Ga),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ma(Ia),null;default:return null}}function lc(e,t){switch(aa(t),t.tag){case 3:Ma(Ia),Ke();break;case 26:case 27:case 5:Qe(t);break;case 4:Ke();break;case 13:hl(t);break;case 19:Ve(fl);break;case 10:Ma(t.type);break;case 22:case 23:hl(t),ys(),null!==e&&Ve(Ga);break;case 24:Ma(Ia)}}function cc(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var a=n.create,s=n.inst;i=a(),s.destroy=i}n=n.next}while(n!==r)}}catch(o){fd(t,t.return,o)}}function uc(e,t,n){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var a=r.next;i=a;do{if((i.tag&e)===e){var s=i.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,r=t;var l=n,c=o;try{c()}catch(u){fd(r,l,u)}}}i=i.next}while(i!==a)}}catch(u){fd(t,t.return,u)}}function dc(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ms(t,n)}catch(i){fd(e,e.return,i)}}}function hc(e,t,n){n.props=_l(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){fd(e,t,i)}}function fc(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;default:i=e.stateNode}"function"==typeof n?e.refCleanup=n(i):n.current=i}}catch(r){fd(e,t,r)}}function pc(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"==typeof i)try{i()}catch(r){fd(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(a){fd(e,t,a)}else n.current=null}function mc(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){fd(e,e.return,r)}}function gc(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,s=null,o=null,l=null,c=null,u=null;for(f in n){var d=n[f];if(n.hasOwnProperty(f)&&null!=d)switch(f){case"checked":case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(f)||th(e,t,f,null,i,d)}}for(var h in i){var f=i[h];if(d=n[h],i.hasOwnProperty(h)&&(null!=f||null!=d))switch(h){case"type":a=f;break;case"name":r=f;break;case"checked":c=f;break;case"defaultChecked":u=f;break;case"value":s=f;break;case"defaultValue":o=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(ce(137,t));break;default:f!==d&&th(e,t,h,f,i,d)}}return void yn(e,s,o,l,c,u,a,r);case"select":for(a in f=s=o=h=null,n)if(l=n[a],n.hasOwnProperty(a)&&null!=l)switch(a){case"value":break;case"multiple":f=l;default:i.hasOwnProperty(a)||th(e,t,a,null,i,l)}for(r in i)if(a=i[r],l=n[r],i.hasOwnProperty(r)&&(null!=a||null!=l))switch(r){case"value":h=a;break;case"defaultValue":o=a;break;case"multiple":s=a;default:a!==l&&th(e,t,r,a,i,l)}return t=o,n=s,i=f,void(null!=h?Mn(e,!!n,h,!1):!!i!=!!n&&(null!=t?Mn(e,!!n,t,!0):Mn(e,!!n,n?[]:"",!1)));case"textarea":for(o in f=h=null,n)if(r=n[o],n.hasOwnProperty(o)&&null!=r&&!i.hasOwnProperty(o))switch(o){case"value":case"children":break;default:th(e,t,o,null,i,r)}for(s in i)if(r=i[s],a=n[s],i.hasOwnProperty(s)&&(null!=r||null!=a))switch(s){case"value":h=r;break;case"defaultValue":f=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(ce(91));break;default:r!==a&&th(e,t,s,r,i,a)}return void wn(e,h,f);case"option":for(var p in n)if(h=n[p],n.hasOwnProperty(p)&&null!=h&&!i.hasOwnProperty(p))if("selected"===p)e.selected=!1;else th(e,t,p,null,i,h);for(l in i)if(h=i[l],f=n[l],i.hasOwnProperty(l)&&h!==f&&(null!=h||null!=f))if("selected"===l)e.selected=h&&"function"!=typeof h&&"symbol"!=typeof h;else th(e,t,l,h,i,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)h=n[m],n.hasOwnProperty(m)&&null!=h&&!i.hasOwnProperty(m)&&th(e,t,m,null,i,h);for(c in i)if(h=i[c],f=n[c],i.hasOwnProperty(c)&&h!==f&&(null!=h||null!=f))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(ce(137,t));break;default:th(e,t,c,h,i,f)}return;default:if(Rn(t)){for(var g in n)h=n[g],n.hasOwnProperty(g)&&void 0!==h&&!i.hasOwnProperty(g)&&nh(e,t,g,void 0,i,h);for(u in i)h=i[u],f=n[u],!i.hasOwnProperty(u)||h===f||void 0===h&&void 0===f||nh(e,t,u,h,i,f);return}}for(var v in n)h=n[v],n.hasOwnProperty(v)&&null!=h&&!i.hasOwnProperty(v)&&th(e,t,v,null,i,h);for(d in i)h=i[d],f=n[d],!i.hasOwnProperty(d)||h===f||null==h&&null==f||th(e,t,d,h,i,f)}(i,e.type,n,t),i[Dt]=t}catch(r){fd(e,e.return,r)}}function vc(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&gh(e.type)||4===e.tag}function xc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||vc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&gh(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function _c(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=eh));else if(4!==i&&(27===i&&gh(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(_c(e,t,n),e=e.sibling;null!==e;)_c(e,t,n),e=e.sibling}function yc(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(27===i&&gh(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yc(e,t,n),e=e.sibling;null!==e;)yc(e,t,n),e=e.sibling}function bc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ih(t,i,n),t[It]=e,t[Dt]=n}catch(a){fd(e,e.return,a)}}var Sc=!1,Mc=!1,wc=!1,Ec="function"==typeof WeakSet?WeakSet:Set,Tc=null;function Ac(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:jc(e,n),4&i&&cc(5,n);break;case 1:if(jc(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){fd(n,n.return,s)}else{var r=_l(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){fd(n,n.return,o)}}64&i&&dc(n),512&i&&fc(n,n.return);break;case 3:if(jc(e,n),64&i&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ms(e,t)}catch(s){fd(n,n.return,s)}}break;case 27:null===t&&4&i&&bc(n);case 26:case 5:jc(e,n),null===t&&4&i&&mc(n),512&i&&fc(n,n.return);break;case 12:jc(e,n);break;case 13:jc(e,n),4&i&&kc(e,n),64&i&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,n=vd.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||Sc)){t=null!==t&&null!==t.memoizedState||Mc,r=Sc;var a=Mc;Sc=i,(Mc=t)&&!a?Hc(e,n,!!(8772&n.subtreeFlags)):jc(e,n),Sc=r,Mc=a}break;case 30:break;default:jc(e,n)}}function Cc(e){var t=e.alternate;null!==t&&(e.alternate=null,Cc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Vt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Nc=null,Rc=!1;function Lc(e,t,n){for(n=n.child;null!==n;)Pc(e,t,n),n=n.sibling}function Pc(e,t,n){if(pt&&"function"==typeof pt.onCommitFiberUnmount)try{pt.onCommitFiberUnmount(ft,n)}catch(a){}switch(n.tag){case 26:Mc||pc(n,t),Lc(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Mc||pc(n,t);var i=Nc,r=Rc;gh(n.type)&&(Nc=n.stateNode,Rc=!1),Lc(e,t,n),wh(n.stateNode),Nc=i,Rc=r;break;case 5:Mc||pc(n,t);case 6:if(i=Nc,r=Rc,Nc=null,Lc(e,t,n),Rc=r,null!==(Nc=i))if(Rc)try{(9===Nc.nodeType?Nc.body:"HTML"===Nc.nodeName?Nc.ownerDocument.body:Nc).removeChild(n.stateNode)}catch(s){fd(n,t,s)}else try{Nc.removeChild(n.stateNode)}catch(s){fd(n,t,s)}break;case 18:null!==Nc&&(Rc?(vh(9===(e=Nc).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Lf(e)):vh(Nc,n.stateNode));break;case 4:i=Nc,r=Rc,Nc=n.stateNode.containerInfo,Rc=!0,Lc(e,t,n),Nc=i,Rc=r;break;case 0:case 11:case 14:case 15:Mc||uc(2,n,t),Mc||uc(4,n,t),Lc(e,t,n);break;case 1:Mc||(pc(n,t),"function"==typeof(i=n.stateNode).componentWillUnmount&&hc(n,t,i)),Lc(e,t,n);break;case 21:Lc(e,t,n);break;case 22:Mc=(i=Mc)||null!==n.memoizedState,Lc(e,t,n),Mc=i;break;default:Lc(e,t,n)}}function kc(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Lf(e)}catch(n){fd(t,t.return,n)}}function Uc(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ec),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ec),t;default:throw Error(ce(435,e.tag))}}(e);t.forEach(function(t){var i=xd.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}function Ic(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i],a=e,s=t,o=s;e:for(;null!==o;){switch(o.tag){case 27:if(gh(o.type)){Nc=o.stateNode,Rc=!1;break e}break;case 5:Nc=o.stateNode,Rc=!1;break e;case 3:case 4:Nc=o.stateNode.containerInfo,Rc=!0;break e}o=o.return}if(null===Nc)throw Error(ce(160));Pc(a,s,r),Nc=null,Rc=!1,null!==(a=r.alternate)&&(a.return=null),r.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Oc(t,e),t=t.sibling}var Dc=null;function Oc(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ic(t,e),zc(e),4&i&&(uc(3,e,e.return),cc(3,e),uc(5,e,e.return));break;case 1:Ic(t,e),zc(e),512&i&&(Mc||null===n||pc(n,n.return)),64&i&&Sc&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var r=Dc;if(Ic(t,e),zc(e),512&i&&(Mc||null===n||pc(n,n.return)),4&i){var a=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":(!(a=r.getElementsByTagName("title")[0])||a[Ht]||a[It]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=r.createElement(i),r.head.insertBefore(a,r.querySelector("head > title"))),ih(a,i,n),a[It]=e,Yt(a),i=a;break e;case"link":var s=Hh("link","href",r).get(i+(n.href||""));if(s)for(var o=0;o<s.length;o++)if((a=s[o]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(o,1);break t}ih(a=r.createElement(i),i,n),r.head.appendChild(a);break;case"meta":if(s=Hh("meta","content",r).get(i+(n.content||"")))for(o=0;o<s.length;o++)if((a=s[o]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(o,1);break t}ih(a=r.createElement(i),i,n),r.head.appendChild(a);break;default:throw Error(ce(468,i))}a[It]=e,Yt(a),i=a}e.stateNode=i}else Vh(r,e.type,e.stateNode);else e.stateNode=Oh(r,i,e.memoizedProps);else a!==i?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===i?Vh(r,e.type,e.stateNode):Oh(r,i,e.memoizedProps)):null===i&&null!==e.stateNode&&gc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ic(t,e),zc(e),512&i&&(Mc||null===n||pc(n,n.return)),null!==n&&4&i&&gc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ic(t,e),zc(e),512&i&&(Mc||null===n||pc(n,n.return)),32&e.flags){r=e.stateNode;try{Tn(r,"")}catch(f){fd(e,e.return,f)}}4&i&&null!=e.stateNode&&gc(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&i&&(wc=!0);break;case 6:if(Ic(t,e),zc(e),4&i){if(null===e.stateNode)throw Error(ce(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(f){fd(e,e.return,f)}}break;case 3:if(Bh=null,r=Dc,Dc=Ah(t.containerInfo),Ic(t,e),Dc=r,zc(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Lf(t.containerInfo)}catch(f){fd(e,e.return,f)}wc&&(wc=!1,Fc(e));break;case 4:i=Dc,Dc=Ah(e.stateNode.containerInfo),Ic(t,e),zc(e),Dc=i;break;case 12:default:Ic(t,e),zc(e);break;case 13:Ic(t,e),zc(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(wu=rt()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Uc(e,i)));break;case 22:r=null!==e.memoizedState;var l=null!==n&&null!==n.memoizedState,c=Sc,u=Mc;if(Sc=c||r,Mc=u||l,Ic(t,e),Mc=u,Sc=c,zc(e),8192&i)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||l||Sc||Mc||Bc(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){l=n=t;try{if(a=l.stateNode,r)"function"==typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,h=null!=d&&d.hasOwnProperty("display")?d.display:null;o.style.display=null==h||"boolean"==typeof h?"":(""+h).trim()}}catch(f){fd(l,l.return,f)}}}else if(6===t.tag){if(null===n){l=t;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(f){fd(l,l.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Uc(e,n))));break;case 19:Ic(t,e),zc(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Uc(e,i)));case 30:case 21:}}function zc(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(vc(i)){n=i;break}i=i.return}if(null==n)throw Error(ce(160));switch(n.tag){case 27:var r=n.stateNode;yc(e,xc(e),r);break;case 5:var a=n.stateNode;32&n.flags&&(Tn(a,""),n.flags&=-33),yc(e,xc(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;_c(e,xc(e),s);break;default:throw Error(ce(161))}}catch(o){fd(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fc(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fc(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function jc(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ac(e,t.alternate,t),t=t.sibling}function Bc(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:uc(4,t,t.return),Bc(t);break;case 1:pc(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&hc(t,t.return,n),Bc(t);break;case 27:wh(t.stateNode);case 26:case 5:pc(t,t.return),Bc(t);break;case 22:null===t.memoizedState&&Bc(t);break;default:Bc(t)}e=e.sibling}}function Hc(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,r=e,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:Hc(r,a,n),cc(4,a);break;case 1:if(Hc(r,a,n),"function"==typeof(r=(i=a).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){fd(i,i.return,c)}if(null!==(r=(i=a).updateQueue)){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)ps(l[r],o)}catch(c){fd(i,i.return,c)}}n&&64&s&&dc(a),fc(a,a.return);break;case 27:bc(a);case 26:case 5:Hc(r,a,n),n&&null===i&&4&s&&mc(a),fc(a,a.return);break;case 12:Hc(r,a,n);break;case 13:Hc(r,a,n),n&&4&s&&kc(r,a);break;case 22:null===a.memoizedState&&Hc(r,a,n),fc(a,a.return);break;case 30:break;default:Hc(r,a,n)}t=t.sibling}}function Vc(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Oa(n))}function Gc(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oa(e))}function Wc(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Xc(e,t,n,i),t=t.sibling}function Xc(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Wc(e,t,n,i),2048&r&&cc(9,t);break;case 1:case 13:default:Wc(e,t,n,i);break;case 3:Wc(e,t,n,i),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oa(e)));break;case 12:if(2048&r){Wc(e,t,n,i),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;"function"==typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){fd(t,t.return,l)}}else Wc(e,t,n,i);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,null!==t.memoizedState?2&a._visibility?Wc(e,t,n,i):Yc(e,t):2&a._visibility?Wc(e,t,n,i):(a._visibility|=2,qc(e,t,n,i,!!(10256&t.subtreeFlags))),2048&r&&Vc(s,t);break;case 24:Wc(e,t,n,i),2048&r&&Gc(t.alternate,t)}}function qc(e,t,n,i,r){for(r=r&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,s=t,o=n,l=i,c=s.flags;switch(s.tag){case 0:case 11:case 15:qc(a,s,o,l,r),cc(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?qc(a,s,o,l,r):Yc(a,s):(u._visibility|=2,qc(a,s,o,l,r)),r&&2048&c&&Vc(s.alternate,s);break;case 24:qc(a,s,o,l,r),r&&2048&c&&Gc(s.alternate,s);break;default:qc(a,s,o,l,r)}t=t.sibling}}function Yc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Yc(n,i),2048&r&&Vc(i.alternate,i);break;case 24:Yc(n,i),2048&r&&Gc(i.alternate,i);break;default:Yc(n,i)}t=t.sibling}}var $c=8192;function Kc(e){if(e.subtreeFlags&$c)for(e=e.child;null!==e;)Zc(e),e=e.sibling}function Zc(e){switch(e.tag){case 26:Kc(e),e.flags&$c&&null!==e.memoizedState&&function(e,t,n){if(null===Wh)throw Error(ce(475));var i=Wh;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var r=Ph(n.href),a=e.querySelector(kh(r));if(a)return null!==(e=a._p)&&"object"==typeof e&&"function"==typeof e.then&&(i.count++,i=qh.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=a,void Yt(a);a=e.ownerDocument||e,n=Uh(n),(r=Eh.get(r))&&Fh(n,r),Yt(a=a.createElement("link"));var s=a;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ih(a,"link",n),t.instance=a}null===i.stylesheets&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(i.count++,t=qh.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dc,e.memoizedState,e.memoizedProps);break;case 5:default:Kc(e);break;case 3:case 4:var t=Dc;Dc=Ah(e.stateNode.containerInfo),Kc(e),Dc=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=$c,$c=16777216,Kc(e),$c=t):Kc(e))}}function Qc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Tc=i,nu(i,e)}Qc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)eu(e),e=e.sibling}function eu(e){switch(e.tag){case 0:case 11:case 15:Jc(e),2048&e.flags&&uc(9,e,e.return);break;case 3:case 12:default:Jc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,tu(e)):Jc(e)}}function tu(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Tc=i,nu(i,e)}Qc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:uc(8,t,t.return),tu(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,tu(t));break;default:tu(t)}e=e.sibling}}function nu(e,t){for(;null!==Tc;){var n=Tc;switch(n.tag){case 0:case 11:case 15:uc(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Oa(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,Tc=i;else e:for(n=e;null!==Tc;){var r=(i=Tc).sibling,a=i.return;if(Cc(i),i===n){Tc=null;break e}if(null!==r){r.return=a,Tc=r;break e}Tc=a}}}var iu={getCacheForType:function(e){var t=Na(Ia),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},ru="function"==typeof WeakMap?WeakMap:Map,au=0,su=null,ou=null,lu=0,cu=0,uu=null,du=!1,hu=!1,fu=!1,pu=0,mu=0,gu=0,vu=0,xu=0,_u=0,yu=0,bu=null,Su=null,Mu=!1,wu=0,Eu=1/0,Tu=null,Au=null,Cu=0,Nu=null,Ru=null,Lu=0,Pu=0,ku=null,Uu=null,Iu=0,Du=null;function Ou(){if(2&au&&0!==lu)return lu&-lu;if(null!==Oe.T){return 0!==ja?ja:Pd()}return kt()}function zu(){0===_u&&(_u=536870912&lu&&!la?536870912:Et());var e=ol.current;return null!==e&&(e.flags|=32),_u}function Fu(e,t,n){(e!==su||2!==cu&&9!==cu)&&null===e.cancelPendingCommit||(Xu(e,0),Vu(e,lu,_u,!1)),Ct(e,n),2&au&&e===su||(e===su&&(!(2&au)&&(vu|=n),4===mu&&Vu(e,lu,_u,!1)),Ed(e))}function ju(e,t,n){if(6&au)throw Error(ce(327));for(var i=!n&&!(124&t)&&0===(t&e.expiredLanes)||Mt(e,t),r=i?function(e,t){var n=au;au|=2;var i=Yu(),r=$u();su!==e||lu!==t?(Tu=null,Eu=rt()+500,Xu(e,t)):hu=Mt(e,t);e:for(;;)try{if(0!==cu&&null!==ou){t=ou;var a=uu;t:switch(cu){case 1:cu=0,uu=null,nd(e,t,a,1);break;case 2:case 9:if(Qa(a)){cu=0,uu=null,td(t);break}t=function(){2!==cu&&9!==cu||su!==e||(cu=7),Ed(e)},a.then(t,t);break e;case 3:cu=7;break e;case 4:cu=5;break e;case 7:Qa(a)?(cu=0,uu=null,td(t)):(cu=0,uu=null,nd(e,t,a,7));break;case 5:var s=null;switch(ou.tag){case 26:s=ou.memoizedState;case 5:case 27:var o=ou;if(!s||Gh(s)){cu=0,uu=null;var l=o.sibling;if(null!==l)ou=l;else{var c=o.return;null!==c?(ou=c,id(c)):ou=null}break t}}cu=0,uu=null,nd(e,t,a,5);break;case 6:cu=0,uu=null,nd(e,t,a,6);break;case 8:Wu(),mu=6;break e;default:throw Error(ce(462))}}Ju();break}catch(u){qu(e,u)}return ba=ya=null,Oe.H=i,Oe.A=r,au=n,null!==ou?0:(su=null,lu=0,Lr(),mu)}(e,t):Zu(e,t,!0),a=i;;){if(0===r){hu&&!i&&Vu(e,t,0,!1);break}if(n=e.current.alternate,!a||Hu(n)){if(2===r){if(a=t,e.errorRecoveryDisabledLanes&a)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var o=e;r=bu;var l=o.current.memoizedState.isDehydrated;if(l&&(Xu(o,s).flags|=256),2!==(s=Zu(o,s,!1))){if(fu&&!l){o.errorRecoveryDisabledLanes|=a,vu|=a,r=4;break e}a=Su,Su=r,null!==a&&(null===Su?Su=a:Su.push.apply(Su,a))}r=s}if(a=!1,2!==r)continue}}if(1===r){Xu(e,0),Vu(e,t,0,!0);break}e:{switch(i=e,a=r){case 0:case 1:throw Error(ce(345));case 4:if((4194048&t)!==t)break;case 6:Vu(i,t,_u,!du);break e;case 2:Su=null;break;case 3:case 5:break;default:throw Error(ce(329))}if((62914560&t)===t&&10<(r=wu+300-rt())){if(Vu(i,t,_u,!du),0!==St(i,0,!0))break e;i.timeoutHandle=dh(Bu.bind(null,i,n,Su,Tu,Mu,t,_u,vu,yu,du,a,2,-0,0),r)}else Bu(i,n,Su,Tu,Mu,t,_u,vu,yu,du,a,0,-0,0)}break}r=Zu(e,t,!1),a=!1}Ed(e)}function Bu(e,t,n,i,r,a,s,o,l,c,u,d,h,f){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||!(16785408&~d))&&(Wh={stylesheets:null,count:0,unsuspend:Xh},Zc(t),null!==(d=function(){if(null===Wh)throw Error(ce(475));var e=Wh;return e.stylesheets&&0===e.count&&$h(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&$h(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(ad.bind(null,e,t,a,n,i,r,s,o,l,u,1,h,f)),void Vu(e,a,s,!c);ad(e,t,a,n,i,r,s,o,l)}function Hu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!Qi(a(),r))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vu(e,t,n,i){t&=~xu,t&=~vu,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var a=31-gt(r),s=1<<a;i[a]=-1,r&=~s}0!==n&&Nt(e,n,t)}function Gu(){return!!(6&au)||(Td(0),!1)}function Wu(){if(null!==ou){if(0===cu)var e=ou.return;else ba=ya=null,js(e=ou),Qo=null,Jo=0,e=ou;for(;null!==e;)lc(e.alternate,e),e=e.return;ou=null}}function Xu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,hh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Wu(),su=e,ou=n=Br(e.current,null),lu=t,cu=0,uu=null,du=!1,hu=Mt(e,t),fu=!1,yu=_u=xu=vu=gu=mu=0,Su=bu=null,Mu=!1,8&t&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var r=31-gt(i),a=1<<r;t|=e[r],i&=~a}return pu=t,Lr(),n}function qu(e,t){Ss=null,Oe.H=Yo,t===Ya||t===Ka?(t=ns(),cu=3):t===$a?(t=ns(),cu=4):cu=t===Nl?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,uu=t,null===ou&&(mu=1,wl(e,Ar(t,e.current)))}function Yu(){var e=Oe.H;return Oe.H=Yo,null===e?Yo:e}function $u(){var e=Oe.A;return Oe.A=iu,e}function Ku(){mu=4,du||(4194048&lu)!==lu&&null!==ol.current||(hu=!0),!(134217727&gu)&&!(134217727&vu)||null===su||Vu(su,lu,_u,!1)}function Zu(e,t,n){var i=au;au|=2;var r=Yu(),a=$u();su===e&&lu===t||(Tu=null,Xu(e,t)),t=!1;var s=mu;e:for(;;)try{if(0!==cu&&null!==ou){var o=ou,l=uu;switch(cu){case 8:Wu(),s=6;break e;case 3:case 2:case 9:case 6:null===ol.current&&(t=!0);var c=cu;if(cu=0,uu=null,nd(e,o,l,c),n&&hu){s=0;break e}break;default:c=cu,cu=0,uu=null,nd(e,o,l,c)}}Qu(),s=mu;break}catch(u){qu(e,u)}return t&&e.shellSuspendCounter++,ba=ya=null,au=i,Oe.H=r,Oe.A=a,null===ou&&(su=null,lu=0,Lr()),s}function Qu(){for(;null!==ou;)ed(ou)}function Ju(){for(;null!==ou&&!nt();)ed(ou)}function ed(e){var t=ec(e.alternate,e,pu);e.memoizedProps=e.pendingProps,null===t?id(e):ou=t}function td(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Fl(n,t,t.pendingProps,t.type,void 0,lu);break;case 11:t=Fl(n,t,t.pendingProps,t.type.render,t.ref,lu);break;case 5:js(t);default:lc(n,t),t=ec(n,t=ou=Hr(t,pu),pu)}e.memoizedProps=e.pendingProps,null===t?id(e):ou=t}function nd(e,t,n,i){ba=ya=null,js(t),Qo=null,Jo=0;var r=t.return;try{if(function(e,t,n,i,r){if(n.flags|=32768,null!==i&&"object"==typeof i&&"function"==typeof i.then){if(null!==(t=n.alternate)&&Ta(t,n,r,!0),null!==(n=ol.current)){switch(n.tag){case 13:return null===ll?Ku():null===n.alternate&&0===mu&&(mu=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Za?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),pd(e,i,r)),!1;case 22:return n.flags|=65536,i===Za?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),pd(e,i,r)),!1}throw Error(ce(435,n.tag))}return pd(e,i,r),Ku(),!1}if(la)return null!==(t=ol.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==da&&xa(Ar(e=Error(ce(422),{cause:i}),n))):(i!==da&&xa(Ar(t=Error(ce(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,i=Ar(i,n),us(e,r=Tl(e.stateNode,i,r)),4!==mu&&(mu=2)),!1;var a=Error(ce(520),{cause:i});if(a=Ar(a,n),null===bu?bu=[a]:bu.push(a),4!==mu&&(mu=2),null===t)return!0;i=Ar(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,us(n,e=Tl(n.stateNode,i,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==Au&&Au.has(a))))return n.flags|=65536,r&=-r,n.lanes|=r,Cl(r=Al(r),e,n,i),us(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,lu))return mu=1,wl(e,Ar(n,e.current)),void(ou=null)}catch(a){if(null!==r)throw ou=r,a;return mu=1,wl(e,Ar(n,e.current)),void(ou=null)}32768&t.flags?(la||1===i?e=!0:hu||536870912&lu?e=!1:(du=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=ol.current)&&13===i.tag&&(i.flags|=16384))),rd(t,e)):id(t)}function id(e){var t=e;do{if(32768&t.flags)return void rd(t,du);e=t.return;var n=sc(t.alternate,t,pu);if(null!==n)return void(ou=n);if(null!==(t=t.sibling))return void(ou=t);ou=t=e}while(null!==t);0===mu&&(mu=5)}function rd(e,t){do{var n=oc(e.alternate,e);if(null!==n)return n.flags&=32767,void(ou=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ou=e);ou=e=n}while(null!==e);mu=6,ou=null}function ad(e,t,n,i,r,a,s,o,l){e.cancelPendingCommit=null;do{ud()}while(0!==Cu);if(6&au)throw Error(ce(327));if(null!==t){if(t===e.current)throw Error(ce(177));if(a=t.lanes|t.childLanes,function(e,t,n,i,r,a){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-gt(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==i&&Nt(e,i,0),0!==a&&0===r&&0!==e.tag&&(e.suspendedLanes|=a&~(s&~t))}(e,n,a|=Rr,s,o,l),e===su&&(ou=su=null,lu=0),Ru=t,Nu=e,Lu=n,Pu=a,ku=r,Uu=i,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,et(lt,function(){return dd(),null})):(e.callbackNode=null,e.callbackPriority=0),i=!!(13878&t.flags),13878&t.subtreeFlags||i){i=Oe.T,Oe.T=null,r=ze.p,ze.p=2,s=au,au|=4;try{!function(e,t){if(e=e.containerInfo,rh=sf,rr(e=ir(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(m){n=null;break e}var s=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(o=s+r),d!==a||0!==i&&3!==d.nodeType||(l=s+i),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++c===r&&(o=s),h===a&&++u===i&&(l=s),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ah={focusedElem:e,selectionRange:n},sf=!1,Tc=t;null!==Tc;)if(e=(t=Tc).child,1024&t.subtreeFlags&&null!==e)e.return=t,Tc=e;else for(;null!==Tc;){switch(a=(t=Tc).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,r=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var p=_l(n.type,r,(n.elementType,n.type));e=i.getSnapshotBeforeUpdate(p,a),i.__reactInternalSnapshotBeforeUpdate=e}catch(g){fd(n,n.return,g)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))xh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":xh(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(ce(163))}if(null!==(e=t.sibling)){e.return=t.return,Tc=e;break}Tc=t.return}}(e,t)}finally{au=s,ze.p=r,Oe.T=i}}Cu=1,sd(),od(),ld()}}function sd(){if(1===Cu){Cu=0;var e=Nu,t=Ru,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=Oe.T,Oe.T=null;var i=ze.p;ze.p=2;var r=au;au|=4;try{Oc(t,e);var a=ah,s=ir(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&rr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(s=g,g=m,m=s);var v=tr(o,m),x=tr(o,g);if(v&&x&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==x.node||f.focusOffset!==x.offset)){var _=d.createRange();_.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(_),f.extend(x.node,x.offset)):(_.setEnd(x.node,x.offset),f.addRange(_))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<d.length;o++){var y=d[o];y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}sf=!!rh,ah=rh=null}finally{au=r,ze.p=i,Oe.T=n}}e.current=t,Cu=2}}function od(){if(2===Cu){Cu=0;var e=Nu,t=Ru,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=Oe.T,Oe.T=null;var i=ze.p;ze.p=2;var r=au;au|=4;try{Ac(e,t.alternate,t)}finally{au=r,ze.p=i,Oe.T=n}}Cu=3}}function ld(){if(4===Cu||3===Cu){Cu=0,it();var e=Nu,t=Ru,n=Lu,i=Uu;10256&t.subtreeFlags||10256&t.flags?Cu=5:(Cu=0,Ru=Nu=null,cd(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Au=null),Pt(n),t=t.stateNode,pt&&"function"==typeof pt.onCommitFiberRoot)try{pt.onCommitFiberRoot(ft,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==i){t=Oe.T,r=ze.p,ze.p=2,Oe.T=null;try{for(var a=e.onRecoverableError,s=0;s<i.length;s++){var o=i[s];a(o.value,{componentStack:o.stack})}}finally{Oe.T=t,ze.p=r}}3&Lu&&ud(),Ed(e),r=e.pendingLanes,4194090&n&&42&r?e===Du?Iu++:(Iu=0,Du=e):Iu=0,Td(0)}}function cd(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Oa(t)))}function ud(e){return sd(),od(),ld(),dd()}function dd(){if(5!==Cu)return!1;var e=Nu,t=Pu;Pu=0;var n=Pt(Lu),i=Oe.T,r=ze.p;try{ze.p=32>n?32:n,Oe.T=null,n=ku,ku=null;var a=Nu,s=Lu;if(Cu=0,Ru=Nu=null,Lu=0,6&au)throw Error(ce(331));var o=au;if(au|=4,eu(a.current),Xc(a,a.current,s,n),au=o,Td(0,!1),pt&&"function"==typeof pt.onPostCommitFiberRoot)try{pt.onPostCommitFiberRoot(ft,a)}catch(l){}return!0}finally{ze.p=r,Oe.T=i,cd(e,t)}}function hd(e,t,n){t=Ar(n,t),null!==(e=ls(e,t=Tl(e.stateNode,t,2),2))&&(Ct(e,2),Ed(e))}function fd(e,t,n){if(3===e.tag)hd(e,e,n);else for(;null!==t;){if(3===t.tag){hd(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===Au||!Au.has(i))){e=Ar(n,e),null!==(i=ls(t,n=Al(2),2))&&(Cl(n,i,t,e),Ct(i,2),Ed(i));break}}t=t.return}}function pd(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ru;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(fu=!0,r.add(n),e=md.bind(null,e,t,n),t.then(e,e))}function md(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,su===e&&(lu&n)===n&&(4===mu||3===mu&&(62914560&lu)===lu&&300>rt()-wu?!(2&au)&&Xu(e,0):xu|=n,yu===lu&&(yu=0)),Ed(e)}function gd(e,t){0===t&&(t=Tt()),null!==(e=Ur(e,t))&&(Ct(e,t),Ed(e))}function vd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),gd(e,n)}function xd(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(ce(314))}null!==i&&i.delete(t),gd(e,n)}var _d=null,yd=null,bd=!1,Sd=!1,Md=!1,wd=0;function Ed(e){e!==yd&&null===e.next&&(null===yd?_d=yd=e:yd=yd.next=e),Sd=!0,bd||(bd=!0,ph(function(){6&au?et(st,Ad):Cd()}))}function Td(e,t){if(!Md&&Sd){Md=!0;do{for(var n=!1,i=_d;null!==i;){if(0!==e){var r=i.pendingLanes;if(0===r)var a=0;else{var s=i.suspendedLanes,o=i.pingedLanes;a=(1<<31-gt(42|e)+1)-1,a=201326741&(a&=r&~(s&~o))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Ld(i,a))}else a=lu,!(3&(a=St(i,i===su?a:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||Mt(i,a)||(n=!0,Ld(i,a));i=i.next}}while(n);Md=!1}}function Ad(){Cd()}function Cd(){Sd=bd=!1;var e=0;0!==wd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==uh&&(uh=e,!0);return uh=null,!1}()&&(e=wd),wd=0);for(var t=rt(),n=null,i=_d;null!==i;){var r=i.next,a=Nd(i,t);0===a?(i.next=null,null===n?_d=r:n.next=r,null===r&&(yd=n)):(n=i,(0!==e||3&a)&&(Sd=!0)),i=r}Td(e)}function Nd(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var s=31-gt(a),o=1<<s,l=r[s];-1===l?0!==(o&n)&&0===(o&i)||(r[s]=wt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(n=lu,n=St(e,e===(t=su)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===n||e===t&&(2===cu||9===cu)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&tt(i),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Mt(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&tt(i),Pt(n)){case 2:case 8:n=ot;break;case 32:default:n=lt;break;case 268435456:n=ut}return i=Rd.bind(null,e),n=et(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&tt(i),e.callbackPriority=2,e.callbackNode=null,2}function Rd(e,t){if(0!==Cu&&5!==Cu)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ud()&&e.callbackNode!==n)return null;var i=lu;return 0===(i=St(e,e===su?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(ju(e,i,t),Nd(e,rt()),null!=e.callbackNode&&e.callbackNode===n?Rd.bind(null,e):null)}function Ld(e,t){if(ud())return null;ju(e,t,!0)}function Pd(){return 0===wd&&(wd=Et()),wd}function kd(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:kn(""+e)}function Ud(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Id=0;Id<wr.length;Id++){var Dd=wr[Id];Er(Dd.toLowerCase(),"on"+(Dd[0].toUpperCase()+Dd.slice(1)))}Er(gr,"onAnimationEnd"),Er(vr,"onAnimationIteration"),Er(xr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(_r,"onTransitionRun"),Er(yr,"onTransitionStart"),Er(br,"onTransitionCancel"),Er(Sr,"onTransitionEnd"),Qt("onMouseEnter",["mouseout","mouseover"]),Qt("onMouseLeave",["mouseout","mouseover"]),Qt("onPointerEnter",["pointerout","pointerover"]),Qt("onPointerLeave",["pointerout","pointerover"]),Zt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Od));function Fd(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var s=i.length-1;0<=s;s--){var o=i[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&r.isPropagationStopped())break e;a=o,r.currentTarget=c;try{a(r)}catch(u){yl(u)}r.currentTarget=null,a=l}else for(s=0;s<i.length;s++){if(l=(o=i[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&r.isPropagationStopped())break e;a=o,r.currentTarget=c;try{a(r)}catch(u){yl(u)}r.currentTarget=null,a=l}}}}function jd(e,t){var n=t[zt];void 0===n&&(n=t[zt]=new Set);var i=e+"__bubble";n.has(i)||(Gd(t,e,2,!1),n.add(i))}function Bd(e,t,n){var i=0;t&&(i|=4),Gd(n,e,i,t)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function Vd(e){if(!e[Hd]){e[Hd]=!0,$t.forEach(function(t){"selectionchange"!==t&&(zd.has(t)||Bd(t,!1,e),Bd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hd]||(t[Hd]=!0,Bd("selectionchange",!1,t))}}function Gd(e,t,n,i){switch(ff(t)){case 2:var r=of;break;case 8:r=lf;break;default:r=cf}n=r.bind(null,t,n,e),r=void 0,!Vn||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wd(e,t,n,i,r){var a=i;if(!(1&t||2&t||null===i))e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var o=i.stateNode.containerInfo;if(o===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&s.stateNode.containerInfo===r)return;s=s.return}for(;null!==o;){if(null===(s=Gt(o)))return;if(5===(l=s.tag)||6===l||26===l||27===l){i=a=s;continue e}o=o.parentNode}}i=i.return}jn(function(){var i=a,r=In(n),s=[];e:{var o=Mr.get(e);if(void 0!==o){var l=ii,c=e;switch(e){case"keypress":if(0===$n(n))break e;case"keydown":case"keyup":l=xi;break;case"focusin":c="focus",l=ci;break;case"focusout":c="blur",l=ci;break;case"beforeblur":case"afterblur":l=ci;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=oi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=li;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=yi;break;case gr:case vr:case xr:l=ui;break;case Sr:l=bi;break;case"scroll":case"scrollend":l=ai;break;case"wheel":l=Si;break;case"copy":case"cut":case"paste":l=di;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_i;break;case"toggle":case"beforetoggle":l=Mi}var u=!!(4&t),d=!u&&("scroll"===e||"scrollend"===e),h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=i;null!==p;){var m=p;if(f=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===f||null===h||null!=(m=Bn(p,h))&&u.push(Xd(p,m,f)),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,r),s.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Un||!(c=n.relatedTarget||n.fromElement)||!Gt(c)&&!c[Ot])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?Gt(c):null)&&(d=de(c),u=c.tag,c!==d||5!==u&&27!==u&&6!==u)&&(c=null)):(l=null,c=i),l!==c)){if(u=oi,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=_i,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Xt(l),f=null==c?o:Xt(c),(o=new u(m,p+"leave",l,n,r)).target=d,o.relatedTarget=f,m=null,Gt(r)===i&&((u=new u(h,p+"enter",c,n,r)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Yd(f))p++;for(f=0,m=h;m;m=Yd(m))f++;for(;0<p-f;)u=Yd(u),p--;for(;0<f-p;)h=Yd(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yd(u),h=Yd(h)}u=null}else u=null;null!==l&&$d(s,o,l,u,!1),null!==c&&null!==d&&$d(s,d,c,u,!0)}if("select"===(l=(o=i?Xt(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Bi;else if(Ii(o))if(Hi)g=Zi;else{g=$i;var v=Yi}else!(l=o.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?i&&Rn(i.elementType)&&(g=Bi):g=Ki;switch(g&&(g=g(e,i))?Di(s,g,n,r):(v&&v(e,o,i),"focusout"===e&&i&&"number"===o.type&&null!=i.memoizedProps.value&&Sn(o,"number",o.value)),v=i?Xt(i):window,e){case"focusin":(Ii(v)||"true"===v.contentEditable)&&(sr=v,or=i,lr=null);break;case"focusout":lr=or=sr=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(s,n,r);break;case"selectionchange":if(ar)break;case"keydown":case"keyup":ur(s,n,r)}var x;if(Ei)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ki?Li(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Ci&&"ko"!==n.locale&&(ki||"onCompositionStart"!==_?"onCompositionEnd"===_&&ki&&(x=Yn()):(Xn="value"in(Wn=r)?Wn.value:Wn.textContent,ki=!0)),0<(v=qd(i,_)).length&&(_=new hi(_,e,null,n,r),s.push({event:_,listeners:v}),x?_.data=x:null!==(x=Pi(n))&&(_.data=x))),(x=Ai?function(e,t){switch(e){case"compositionend":return Pi(t);case"keypress":return 32!==t.which?null:(Ri=!0,Ni);case"textInput":return(e=t.data)===Ni&&Ri?null:e;default:return null}}(e,n):function(e,t){if(ki)return"compositionend"===e||!Ei&&Li(e,t)?(e=Yn(),qn=Xn=Wn=null,ki=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ci&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(_=qd(i,"onBeforeInput")).length&&(v=new hi("onBeforeInput","beforeinput",null,n,r),s.push({event:v,listeners:_}),v.data=x)),function(e,t,n,i,r){if("submit"===t&&n&&n.stateNode===r){var a=kd((r[Dt]||null).action),s=i.submitter;s&&null!==(t=(t=s[Dt]||null)?kd(t.formAction):s.getAttribute("formAction"))&&(a=t,s=null);var o=new ii("action","action",null,i,r);e.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==wd){var e=s?Ud(r,s):new FormData(r);Uo(n,{pending:!0,data:e,method:r.method,action:a},null,e)}}else"function"==typeof a&&(o.preventDefault(),e=s?Ud(r,s):new FormData(r),Uo(n,{pending:!0,data:e,method:r.method,action:a},a,e))},currentTarget:r}]})}}(s,e,i,n,r)}Fd(s,t)})}function Xd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qd(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===a||(null!=(r=Bn(e,n))&&i.unshift(Xd(e,r,a)),null!=(r=Bn(e,t))&&i.push(Xd(e,r,a))),3===e.tag)return i;e=e.return}return[]}function Yd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function $d(e,t,n,i,r){for(var a=t._reactName,s=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===i)break;5!==o&&26!==o&&27!==o||null===c||(l=c,r?null!=(c=Bn(n,a))&&s.unshift(Xd(n,c,l)):r||null!=(c=Bn(n,a))&&s.push(Xd(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Kd=/\r\n?/g,Zd=/\u0000|\uFFFD/g;function Qd(e){return("string"==typeof e?e:""+e).replace(Kd,"\n").replace(Zd,"")}function Jd(e,t){return t=Qd(t),Qd(e)===t}function eh(){}function th(e,t,n,i,r,a){switch(n){case"children":"string"==typeof i?"body"===t||"textarea"===t&&""===i||Tn(e,i):("number"==typeof i||"bigint"==typeof i)&&"body"!==t&&Tn(e,""+i);break;case"className":sn(e,"class",i);break;case"tabIndex":sn(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":sn(e,n,i);break;case"style":Nn(e,i,a);break;case"data":if("object"!==t){sn(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"==typeof i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=kn(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"==typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&th(e,t,"name",r.name,r,null),th(e,t,"formEncType",r.formEncType,r,null),th(e,t,"formMethod",r.formMethod,r,null),th(e,t,"formTarget",r.formTarget,r,null)):(th(e,t,"encType",r.encType,r,null),th(e,t,"method",r.method,r,null),th(e,t,"target",r.target,r,null))),null==i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=kn(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=eh);break;case"onScroll":null!=i&&jd("scroll",e);break;case"onScrollEnd":null!=i&&jd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(ce(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(ce(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"muted":e.muted=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"==typeof i||"boolean"==typeof i||"symbol"==typeof i){e.removeAttribute("xlink:href");break}n=kn(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"==typeof i||"symbol"==typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":jd("beforetoggle",e),jd("toggle",e),an(e,"popover",i);break;case"xlinkActuate":on(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":on(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":on(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":on(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":on(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":on(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":on(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":on(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":on(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":an(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&an(e,n=Ln.get(n)||n,i)}}function nh(e,t,n,i,r,a){switch(n){case"style":Nn(e,i,a);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(ce(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(ce(60));e.innerHTML=n}}break;case"children":"string"==typeof i?Tn(e,i):("number"==typeof i||"bigint"==typeof i)&&Tn(e,""+i);break;case"onScroll":null!=i&&jd("scroll",e);break;case"onScrollEnd":null!=i&&jd("scrollend",e);break;case"onClick":null!=i&&(e.onclick=eh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Kt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"==typeof(a=null!=(a=e[Dt]||null)?a[n]:null)&&e.removeEventListener(t,a,r),"function"!=typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):an(e,n,i):("function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r)))}}function ih(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jd("error",e),jd("load",e);var i,r=!1,a=!1;for(i in n)if(n.hasOwnProperty(i)){var s=n[i];if(null!=s)switch(i){case"src":r=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ce(137,t));default:th(e,t,i,s,n,null)}}return a&&th(e,t,"srcSet",n.srcSet,n,null),void(r&&th(e,t,"src",n.src,n,null));case"input":jd("invalid",e);var o=i=s=a=null,l=null,c=null;for(r in n)if(n.hasOwnProperty(r)){var u=n[r];if(null!=u)switch(r){case"name":a=u;break;case"type":s=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":i=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(ce(137,t));break;default:th(e,t,r,u,n,null)}}return bn(e,i,o,l,c,s,a,!1),void mn(e);case"select":for(a in jd("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(o=n[a]))switch(a){case"value":i=o;break;case"defaultValue":s=o;break;case"multiple":r=o;default:th(e,t,a,o,n,null)}return t=i,n=s,e.multiple=!!r,void(null!=t?Mn(e,!!r,t,!1):null!=n&&Mn(e,!!r,n,!0));case"textarea":for(s in jd("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(o=n[s]))switch(s){case"value":r=o;break;case"defaultValue":a=o;break;case"children":i=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(ce(91));break;default:th(e,t,s,o,n,null)}return En(e,r,a,i),void mn(e);case"option":for(l in n)if(n.hasOwnProperty(l)&&null!=(r=n[l]))if("selected"===l)e.selected=r&&"function"!=typeof r&&"symbol"!=typeof r;else th(e,t,l,r,n,null);return;case"dialog":jd("beforetoggle",e),jd("toggle",e),jd("cancel",e),jd("close",e);break;case"iframe":case"object":jd("load",e);break;case"video":case"audio":for(r=0;r<Od.length;r++)jd(Od[r],e);break;case"image":jd("error",e),jd("load",e);break;case"details":jd("toggle",e);break;case"embed":case"source":case"link":jd("error",e),jd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(ce(137,t));default:th(e,t,c,r,n,null)}return;default:if(Rn(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(r=n[u])&&nh(e,t,u,r,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(null!=(r=n[o])&&th(e,t,o,r,n,null))}var rh=null,ah=null;function sh(e){return 9===e.nodeType?e:e.ownerDocument}function oh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ch(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var uh=null;var dh="function"==typeof setTimeout?setTimeout:void 0,hh="function"==typeof clearTimeout?clearTimeout:void 0,fh="function"==typeof Promise?Promise:void 0,ph="function"==typeof queueMicrotask?queueMicrotask:void 0!==fh?function(e){return fh.resolve(null).then(e).catch(mh)}:dh;function mh(e){setTimeout(function(){throw e})}function gh(e){return"head"===e}function vh(e,t){var n=t,i=0,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0<i&&8>i){n=i;var s=e.ownerDocument;if(1&n&&wh(s.documentElement),2&n&&wh(s.body),4&n)for(wh(n=s.head),s=n.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[Ht]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=o}}if(0===r)return e.removeChild(a),void Lf(t);r--}else"$"===n||"$?"===n||"$!"===n?r++:i=n.charCodeAt(0)-48;else i=0;n=a}while(n);Lf(t)}function xh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":xh(n),Vt(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function _h(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bh=null;function Sh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Mh(e,t,n){switch(t=sh(n),e){case"html":if(!(e=t.documentElement))throw Error(ce(452));return e;case"head":if(!(e=t.head))throw Error(ce(453));return e;case"body":if(!(e=t.body))throw Error(ce(454));return e;default:throw Error(ce(451))}}function wh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Vt(e)}var Eh=new Map,Th=new Set;function Ah(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Ch=ze.d;ze.d={f:function(){var e=Ch.f(),t=Gu();return e||t},r:function(e){var t=Wt(e);null!==t&&5===t.tag&&"form"===t.type?Do(t):Ch.r(e)},D:function(e){Ch.D(e),Rh("dns-prefetch",e,null)},C:function(e,t){Ch.C(e,t),Rh("preconnect",e,t)},L:function(e,t,n){Ch.L(e,t,n);var i=Nh;if(i&&e&&t){var r='link[rel="preload"][as="'+_n(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+_n(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(r+='[imagesizes="'+_n(n.imageSizes)+'"]')):r+='[href="'+_n(e)+'"]';var a=r;switch(t){case"style":a=Ph(e);break;case"script":a=Ih(e)}Eh.has(a)||(e=me({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Eh.set(a,e),null!==i.querySelector(r)||"style"===t&&i.querySelector(kh(a))||"script"===t&&i.querySelector(Dh(a))||(ih(t=i.createElement("link"),"link",e),Yt(t),i.head.appendChild(t)))}},m:function(e,t){Ch.m(e,t);var n=Nh;if(n&&e){var i=t&&"string"==typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+_n(i)+'"][href="'+_n(e)+'"]',a=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Ih(e)}if(!Eh.has(a)&&(e=me({rel:"modulepreload",href:e},t),Eh.set(a,e),null===n.querySelector(r))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Dh(a)))return}ih(i=n.createElement("link"),"link",e),Yt(i),n.head.appendChild(i)}}},X:function(e,t){Ch.X(e,t);var n=Nh;if(n&&e){var i=qt(n).hoistableScripts,r=Ih(e),a=i.get(r);a||((a=n.querySelector(Dh(r)))||(e=me({src:e,async:!0},t),(t=Eh.get(r))&&jh(e,t),Yt(a=n.createElement("script")),ih(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}},S:function(e,t,n){Ch.S(e,t,n);var i=Nh;if(i&&e){var r=qt(i).hoistableStyles,a=Ph(e);t=t||"default";var s=r.get(a);if(!s){var o={loading:0,preload:null};if(s=i.querySelector(kh(a)))o.loading=5;else{e=me({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Eh.get(a))&&Fh(e,n);var l=s=i.createElement("link");Yt(l),ih(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,zh(s,t,i)}s={type:"stylesheet",instance:s,count:1,state:o},r.set(a,s)}}},M:function(e,t){Ch.M(e,t);var n=Nh;if(n&&e){var i=qt(n).hoistableScripts,r=Ih(e),a=i.get(r);a||((a=n.querySelector(Dh(r)))||(e=me({src:e,async:!0,type:"module"},t),(t=Eh.get(r))&&jh(e,t),Yt(a=n.createElement("script")),ih(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}};var Nh="undefined"==typeof document?null:document;function Rh(e,t,n){var i=Nh;if(i&&"string"==typeof t&&t){var r=_n(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"==typeof n&&(r+='[crossorigin="'+n+'"]'),Th.has(r)||(Th.add(r),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(r)&&(ih(t=i.createElement("link"),"link",e),Yt(t),i.head.appendChild(t)))}}function Lh(e,t,n,i){var r,a,s,o,l=(l=qe.current)?Ah(l):null;if(!l)throw Error(ce(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Ph(n.href),(i=(n=qt(l).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Ph(n.href);var c=qt(l).hoistableStyles,u=c.get(e);if(u||(l=l.ownerDocument||l,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,u),(c=l.querySelector(kh(e)))&&!c._p&&(u.instance=c,u.state.loading=5),Eh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Eh.set(e,n),c||(r=l,a=e,s=n,o=u.state,r.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=r.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),ih(a,"link",s),Yt(a),r.head.appendChild(a))))),t&&null===i)throw Error(ce(528,""));return u}if(t&&null!==i)throw Error(ce(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Ih(n),(i=(n=qt(l).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(ce(444,e))}}function Ph(e){return'href="'+_n(e)+'"'}function kh(e){return'link[rel="stylesheet"]['+e+"]"}function Uh(e){return me({},e,{"data-precedence":e.precedence,precedence:null})}function Ih(e){return'[src="'+_n(e)+'"]'}function Dh(e){return"script[async]"+e}function Oh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+_n(n.href)+'"]');if(i)return t.instance=i,Yt(i),i;var r=me({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Yt(i=(e.ownerDocument||e).createElement("style")),ih(i,"style",r),zh(i,n.precedence,e),t.instance=i;case"stylesheet":r=Ph(n.href);var a=e.querySelector(kh(r));if(a)return t.state.loading|=4,t.instance=a,Yt(a),a;i=Uh(n),(r=Eh.get(r))&&Fh(i,r),Yt(a=(e.ownerDocument||e).createElement("link"));var s=a;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ih(a,"link",i),t.state.loading|=4,zh(a,n.precedence,e),t.instance=a;case"script":return a=Ih(n.src),(r=e.querySelector(Dh(a)))?(t.instance=r,Yt(r),r):(i=n,(r=Eh.get(a))&&jh(i=me({},n),r),Yt(r=(e=e.ownerDocument||e).createElement("script")),ih(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(ce(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,zh(i,n.precedence,e));return t.instance}function zh(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,a=r,s=0;s<i.length;s++){var o=i[s];if(o.dataset.precedence===t)a=o;else if(a!==r)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function jh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Bh=null;function Hh(e,t,n){if(null===Bh){var i=new Map,r=Bh=new Map;r.set(n,i)}else(i=(r=Bh).get(n))||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var a=n[r];if(!(a[Ht]||a[It]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var s=a.getAttribute(t)||"";s=e+s;var o=i.get(s);o?o.push(a):i.set(s,[a])}}return i}function Vh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Gh(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Wh=null;function Xh(){}function qh(){if(this.count--,0===this.count)if(this.stylesheets)$h(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Yh=null;function $h(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Yh=new Map,t.forEach(Kh,e),Yh=null,qh.call(e))}function Kh(e,t){if(!(4&t.state.loading)){var n=Yh.get(e);if(n)var i=n.get(null);else{n=new Map,Yh.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<r.length;a++){var s=r[a];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),i=s)}i&&n.set(null,i)}s=(r=t.instance).getAttribute("data-precedence"),(a=n.get(s)||i)===i&&n.set(null,r),n.set(s,r),this.count++,i=qh.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),a?a.parentNode.insertBefore(r,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var Zh={$$typeof:we,Provider:null,Consumer:null,_currentValue:Fe,_currentValue2:Fe,_threadCount:0};function Qh(e,t,n,i,r,a,s,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=At(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.hiddenUpdates=At(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Jh(e,t,n,i,r,a,s,o,l,c,u,d){return e=new Qh(e,t,n,s,o,l,c,d),t=1,!0===a&&(t|=24),a=Fr(3,null,null,t),e.current=a,a.stateNode=e,(t=Da()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:i,isDehydrated:n,cache:t},as(a),e}function ef(e){return e?e=Or:Or}function tf(e,t,n,i,r,a){r=ef(r),null===i.context?i.context=r:i.pendingContext=r,(i=os(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(i.callback=a),null!==(n=ls(e,i,t))&&(Fu(n,0,t),cs(n,e,t))}function nf(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rf(e,t){nf(e,t),(e=e.alternate)&&nf(e,t)}function af(e){if(13===e.tag){var t=Ur(e,67108864);null!==t&&Fu(t,0,67108864),rf(e,67108864)}}var sf=!0;function of(e,t,n,i){var r=Oe.T;Oe.T=null;var a=ze.p;try{ze.p=2,cf(e,t,n,i)}finally{ze.p=a,Oe.T=r}}function lf(e,t,n,i){var r=Oe.T;Oe.T=null;var a=ze.p;try{ze.p=8,cf(e,t,n,i)}finally{ze.p=a,Oe.T=r}}function cf(e,t,n,i){if(sf){var r=uf(i);if(null===r)Wd(e,t,i,df,n),Sf(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return mf=Mf(mf,e,t,n,i,r),!0;case"dragenter":return gf=Mf(gf,e,t,n,i,r),!0;case"mouseover":return vf=Mf(vf,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return xf.set(a,Mf(xf.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,_f.set(a,Mf(_f.get(a)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Sf(e,i),4&t&&-1<bf.indexOf(e)){for(;null!==r;){var a=Wt(r);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var s=bt(a.pendingLanes);if(0!==s){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-gt(s);o.entanglements[1]|=l,s&=~l}Ed(a),!(6&au)&&(Eu=rt()+500,Td(0))}}break;case 13:null!==(o=Ur(a,2))&&Fu(o,0,2),Gu(),rf(a,2)}if(null===(a=uf(i))&&Wd(e,t,i,df,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else Wd(e,t,i,null,n)}}function uf(e){return hf(e=In(e))}var df=null;function hf(e){if(df=null,null!==(e=Gt(e))){var t=de(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=he(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return df=e,null}function ff(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case st:return 2;case ot:return 8;case lt:case ct:return 32;case ut:return 268435456;default:return 32}default:return 32}}var pf=!1,mf=null,gf=null,vf=null,xf=new Map,_f=new Map,yf=[],bf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sf(e,t){switch(e){case"focusin":case"focusout":mf=null;break;case"dragenter":case"dragleave":gf=null;break;case"mouseover":case"mouseout":vf=null;break;case"pointerover":case"pointerout":xf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_f.delete(t.pointerId)}}function Mf(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=Wt(t))&&af(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function wf(e){var t=Gt(e.target);if(null!==t){var n=de(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=he(n)))return e.blockedOn=t,void function(e,t){var n=ze.p;try{return ze.p=e,t()}finally{ze.p=n}}(e.priority,function(){if(13===n.tag){var e=Ou();e=Lt(e);var t=Ur(n,e);null!==t&&Fu(t,0,e),rf(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ef(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=uf(e.nativeEvent);if(null!==n)return null!==(t=Wt(n))&&af(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Un=i,n.target.dispatchEvent(i),Un=null,t.shift()}return!0}function Tf(e,t,n){Ef(e)&&n.delete(t)}function Af(){pf=!1,null!==mf&&Ef(mf)&&(mf=null),null!==gf&&Ef(gf)&&(gf=null),null!==vf&&Ef(vf)&&(vf=null),xf.forEach(Tf),_f.forEach(Tf)}function Cf(e,t){e.blockedOn===t&&(e.blockedOn=null,pf||(pf=!0,se.unstable_scheduleCallback(se.unstable_NormalPriority,Af)))}var Nf=null;function Rf(e){Nf!==e&&(Nf=e,se.unstable_scheduleCallback(se.unstable_NormalPriority,function(){Nf===e&&(Nf=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if("function"!=typeof i){if(null===hf(i||n))continue;break}var a=Wt(n);null!==a&&(e.splice(t,3),t-=3,Uo(a,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Lf(e){function t(t){return Cf(t,e)}null!==mf&&Cf(mf,e),null!==gf&&Cf(gf,e),null!==vf&&Cf(vf,e),xf.forEach(t),_f.forEach(t);for(var n=0;n<yf.length;n++){var i=yf[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<yf.length&&null===(n=yf[0]).blockedOn;)wf(n),null===n.blockedOn&&yf.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var r=n[i],a=n[i+1],s=r[Dt]||null;if("function"==typeof a)s||Rf(n);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(r=a,s=a[Dt]||null)o=s.formAction;else if(null!==hf(r))continue}else o=s.action;"function"==typeof o?n[i+1]=o:(n.splice(i,3),i-=3),Rf(n)}}}function Pf(e){this._internalRoot=e}function kf(e){this._internalRoot=e}kf.prototype.render=Pf.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ce(409));tf(t.current,Ou(),e,t,null,null)},kf.prototype.unmount=Pf.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;tf(e.current,2,null,e,null,null),Gu(),t[Ot]=null}},kf.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yf.length&&0!==t&&t<yf[n].priority;n++);yf.splice(n,0,e),0===n&&wf(e)}};var Uf=oe.version;if("19.1.0"!==Uf)throw Error(ce(527,Uf,"19.1.0"));ze.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ce(188));throw e=Object.keys(e).join(","),Error(ce(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=de(e)))throw Error(ce(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return fe(r),e;if(a===i)return fe(r),t;a=a.sibling}throw Error(ce(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,o=r.child;o;){if(o===n){s=!0,n=r,i=a;break}if(o===i){s=!0,i=r,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,i=r;break}if(o===i){s=!0,i=a,n=r;break}o=o.sibling}if(!s)throw Error(ce(189))}}if(n.alternate!==i)throw Error(ce(190))}if(3!==n.tag)throw Error(ce(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?pe(e):null)?null:e.stateNode};var If={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Oe,reconcilerVersion:"19.1.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Df.isDisabled&&Df.supportsFiber)try{ft=Df.inject(If),pt=Df}catch(ES){}}X.createRoot=function(e,t){if(!ue(e))throw Error(ce(299));var n=!1,i="",r=bl,a=Sl,s=Ml;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(s=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jh(e,1,!1,null,0,n,i,r,a,s,0,null),e[Ot]=t.current,Vd(e),new Pf(t)},X.hydrateRoot=function(e,t,n){if(!ue(e))throw Error(ce(299));var i=!1,r="",a=bl,s=Sl,o=Ml,l=null;return null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(s=n.onCaughtError),void 0!==n.onRecoverableError&&(o=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(l=n.formState)),(t=Jh(e,1,!0,t,0,i,r,a,s,o,0,l)).context=ef(null),n=t.current,(r=os(i=Lt(i=Ou()))).callback=null,ls(n,r,i),n=i,t.current.lanes=n,Ct(t,n),Ed(t),e[Ot]=t.current,Vd(e),new kf(t)},X.version="19.1.0",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(ES){}}(),W.exports=X;var Of=W.exports;
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ff=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),jf=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Bf={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=V.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:s,...o},l)=>V.createElement("svg",{ref:l,...Bf,width:t,height:t,stroke:e,strokeWidth:i?24*Number(n)/Number(t):n,className:Ff("lucide",r),...!a&&!jf(o)&&{"aria-hidden":"true"},...o},[...s.map(([e,t])=>V.createElement(e,t)),...Array.isArray(a)?a:[a]])),Vf=(e,t)=>{const n=V.forwardRef(({className:n,...i},r)=>{return V.createElement(Hf,{ref:r,iconNode:t,className:Ff(`lucide-${a=zf(e),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...i});var a});return n.displayName=zf(e),n},Gf=Vf("bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),Wf=Vf("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Xf=Vf("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),qf=Vf("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Yf=Vf("expand",[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]]),$f=Vf("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Kf=Vf("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Zf=Vf("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Qf=Vf("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Jf=Vf("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ep=Vf("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),tp=Vf("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),np=Vf("minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]),ip=Vf("move-3d",[["path",{d:"M5 3v16h16",key:"1mqmf9"}],["path",{d:"m5 19 6-6",key:"jh6hbb"}],["path",{d:"m2 6 3-3 3 3",key:"tkyvxa"}],["path",{d:"m18 16 3 3-3 3",key:"1d4glt"}]]),rp=Vf("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),ap=Vf("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),sp=Vf("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),op=Vf("rectangle-horizontal",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]),lp=Vf("rectangle-vertical",[["rect",{width:"12",height:"20",x:"6",y:"2",rx:"2",key:"1oxtiu"}]]),cp=Vf("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),up=Vf("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),dp=Vf("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),hp=Vf("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),fp=Vf("skip-back",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),pp=Vf("skip-forward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),mp=Vf("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),gp=Vf("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),vp=Vf("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),xp=Vf("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),_p=Vf("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),yp=Vf("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),bp=Vf("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Sp=G.forwardRef(({className:e="",variant:t="default",size:n="default",children:i,...r},a)=>{const s=`inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ${{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"}[t]} ${{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[n]} ${e}`;return l.jsx("button",{className:s,ref:a,...r,children:i})});
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */async function Mp(e){try{const n=e.includes("/inscription/")||e.includes("/inscriptions")||e.includes("/block/")||e.includes("/sat/")||e.includes("/address/")||e.includes("/output/")||e.includes("/r/");let i,r=!1;try{const t={};if(n?(t.Accept="application/json",t["User-Agent"]="InscriptionViewer/1.0.0"):t.Range="bytes=0-8191",i=await fetch(e,{headers:t}),206!==i.status||n)if(416!==i.status||n){if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`)}else i=await fetch(e);else r=!0}catch(t){i=await fetch(e)}if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const a=i.headers.get("content-type")||"application/octet-stream",s=(i.headers.get("content-length"),await i.arrayBuffer()),o=new Uint8Array(r?s:s.slice(0,8192)),l=new TextDecoder("utf-8",{fatal:!1});let c="";try{c=l.decode(o)}catch{}const u=function(e,t,n,i){var r;const a=e.toLowerCase(),s=new URL(i).pathname,o=null==(r=s.split(".").pop())?void 0:r.toLowerCase();if(a.includes("application/json")||a.includes("text/json"))return{detectedType:"json",renderStrategy:"native",fileExtension:"json",encoding:"utf-8",isInlineable:!0};if(a.startsWith("text/"))return"text/html"===a?{detectedType:"html",renderStrategy:"native",fileExtension:o,isInlineable:!0}:{detectedType:"text",renderStrategy:"native",fileExtension:o,encoding:"utf-8",isInlineable:!0};if(a.startsWith("image/"))return"image/svg+xml"===a?{detectedType:"svg",renderStrategy:"native",fileExtension:o,isInlineable:!0}:{detectedType:"image",renderStrategy:"native",fileExtension:o,isInlineable:!0};if(a.startsWith("audio/"))return{detectedType:"audio",renderStrategy:"native",fileExtension:o,isInlineable:!0};if(a.startsWith("video/"))return{detectedType:"video",renderStrategy:"native",fileExtension:o,isInlineable:!0};if(a.startsWith("model/"))return{detectedType:"3d",renderStrategy:"native",fileExtension:o,isInlineable:!0};if(a.startsWith("application/")){if(a.includes("json"))return{detectedType:"json",renderStrategy:"native",fileExtension:o,isInlineable:!0};if(a.includes("gltf")||a.includes("obj")||["obj","gltf","glb","stl","3ds","dae","fbx","blend"].includes(o||""))return{detectedType:"3d",renderStrategy:"native",fileExtension:o,isInlineable:!0};if("application/pdf"===a||a.includes("document"))return{detectedType:"binary",renderStrategy:"iframe",fileExtension:o,isInlineable:!1}}if(n){if(n.includes("<!DOCTYPE")||n.includes("<html")||n.includes("<head>")||n.includes("<body>"))return{detectedType:"html",renderStrategy:"native",fileExtension:o,isInlineable:!0};const e=n.trim();if(e.startsWith("{")&&e.includes("}")||e.startsWith("[")&&e.includes("]"))try{return JSON.parse(e),{detectedType:"json",renderStrategy:"native",fileExtension:o,isInlineable:!0}}catch{}return n.includes("<svg")||n.includes('xmlns="http://www.w3.org/2000/svg"')?{detectedType:"svg",renderStrategy:"native",fileExtension:o,isInlineable:!0}:{detectedType:"text",renderStrategy:"native",fileExtension:o,encoding:"utf-8",isInlineable:!0}}if(t.length>=4){const e=Array.from(t.slice(0,4)).map(e=>e.toString(16).padStart(2,"0")).join("");if("89504e47"===e)return{detectedType:"image",renderStrategy:"native",fileExtension:"png",isInlineable:!0};if(e.startsWith("ffd8"))return{detectedType:"image",renderStrategy:"native",fileExtension:"jpg",isInlineable:!0};if("47494638"===e)return{detectedType:"image",renderStrategy:"native",fileExtension:"gif",isInlineable:!0};if("52494646"===e)return{detectedType:"image",renderStrategy:"native",fileExtension:"webp",isInlineable:!0}}return{detectedType:"binary",renderStrategy:"iframe",fileExtension:o,isInlineable:!1}}(a,o,c,e);return{contentInfo:{...u,mimeType:a},preview:"text"===u.detectedType?c.slice(0,200):void 0}}catch(n){return{contentInfo:{mimeType:"application/octet-stream",detectedType:"unknown",renderStrategy:"iframe",isInlineable:!1},error:n.message}}}Sp.displayName="Button";const wp=new class{constructor(e=100,n=30){t(this,"cache",new Map),t(this,"maxSize"),t(this,"maxAge"),this.maxSize=e,this.maxAge=60*n*1e3}get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>this.maxAge?(this.cache.delete(e),null):t.data:null}set(e,t,n){if(this.cache.size>=this.maxSize){const e=this.cache.keys().next().value;e&&this.cache.delete(e)}this.cache.set(e,{data:t,timestamp:Date.now(),contentType:n})}has(e){const t=this.cache.get(e);return!!t&&(!(Date.now()-t.timestamp>this.maxAge)||(this.cache.delete(e),!1))}delete(e){return this.cache.delete(e)}clear(){this.cache.clear()}getStats(){return{size:this.cache.size,maxSize:this.maxSize,maxAge:this.maxAge}}async fetchContent(e){var t;const n=this.get(e);if(n)return{data:n,contentType:(null==(t=this.cache.get(e))?void 0:t.contentType)||"text/plain"};try{const t=await fetch(e,{headers:{Accept:"application/json","User-Agent":"InscriptionViewer/1.0.0"}});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const n=t.headers.get("content-type")||"text/plain";let i;if(n.includes("application/json"))i=await t.json();else if(n.includes("text/"))i=await t.text();else if(n.startsWith("image/")||n.startsWith("audio/")||n.startsWith("video/"))i=e;else{const e=await t.blob();i=URL.createObjectURL(e)}return this.set(e,i,n),{data:i,contentType:n}}catch(i){throw i}}cleanup(){const e=Date.now(),t=[];this.cache.forEach((n,i)=>{e-n.timestamp>this.maxAge&&t.push(i)}),t.forEach(e=>this.cache.delete(e))}};function Ep({content:e,mimeType:t,fileExtension:n,maxHeight:i=400,showControls:r=!0}){const[a,s]=G.useState(!1),o=G.useMemo(()=>t.includes("javascript")||t.includes("json")||t.includes("xml")||t.includes("html")||["javascript","typescript","json","html","css","xml","yaml","python","java","c","cpp","rust","go"].some(e=>t.includes(e))||["js","ts","jsx","tsx","json","html","css","xml","yaml","yml","py","java","c","cpp","rs","go","php","rb","sql"].includes(n||""),[t,n]),c=G.useMemo(()=>{if(t.includes("javascript"))return"javascript";if(t.includes("typescript"))return"typescript";if(t.includes("json"))return"json";if(t.includes("html"))return"html";if(t.includes("css"))return"css";if(t.includes("xml"))return"xml";if(t.includes("yaml"))return"yaml";if(t.includes("python"))return"python";return{js:"javascript",ts:"typescript",jsx:"javascript",tsx:"typescript",json:"json",html:"html",css:"css",xml:"xml",yaml:"yaml",yml:"yaml",py:"python",java:"java",c:"c",cpp:"cpp",rs:"rust",go:"go",php:"php",rb:"ruby",sql:"sql"}[n||""]||"text"},[t,n]);return l.jsxs("div",{className:"w-full h-full flex flex-col bg-white dark:bg-gray-900",children:[r&&l.jsxs("div",{className:"flex justify-between items-center p-2 border-b bg-gray-50 dark:bg-gray-800",children:[l.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[l.jsx("span",{className:"font-mono",children:c}),l.jsxs("span",{className:"ml-2",children:["(",e.length.toLocaleString()," chars)"]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:async()=>{try{await navigator.clipboard.writeText(e),s(!0),setTimeout(()=>s(!1),2e3)}catch(ES){}},className:"h-6 px-2 text-xs",children:[l.jsx(Xf,{className:"h-3 w-3 mr-1"}),a?"Copied!":"Copy"]}),l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:()=>{const i=new Blob([e],{type:t}),r=URL.createObjectURL(i),a=document.createElement("a");a.href=r,a.download=`content.${n||"txt"}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)},className:"h-6 px-2 text-xs",children:[l.jsx(qf,{className:"h-3 w-3 mr-1"}),"Download"]})]})]}),l.jsx("div",{className:"flex-1 overflow-auto w-full h-full",children:l.jsx("pre",{className:"text-xs p-4 w-full h-full overflow-auto font-mono whitespace-pre-wrap break-words "+(o?"bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200":"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"),style:{maxHeight:i-(r?60:0),minHeight:"100px",minWidth:"100%"},children:e})})]})}function Tp({src:e,alt:t="Inscription image",mimeType:n,fileExtension:i,maxHeight:r=400,showControls:a=!0}){const[s,o]=G.useState(1),[c,u]=G.useState(0),[d,h]=G.useState(!1),[f,p]=G.useState(!1),[m,g]=G.useState(!1),[v,x]=G.useState(null);return m?l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx("div",{className:"text-2xl mb-2",children:"🖼️"}),l.jsx("div",{className:"text-sm",children:"Failed to load image"}),l.jsxs("div",{className:"text-xs mt-1 text-gray-400",children:[n," • ",i]})]})}):l.jsxs("div",{className:"w-full h-full flex flex-col bg-white dark:bg-gray-900",children:[a&&f&&l.jsxs("div",{className:"flex justify-between items-center p-2 border-b bg-gray-50 dark:bg-gray-800",children:[l.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[l.jsx("span",{className:"font-mono",children:n.split("/")[1]}),v&&l.jsxs("span",{className:"ml-2",children:[v.width," × ",v.height]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>o(Math.max(.1,s-.2)),className:"h-6 px-2 text-xs",disabled:s<=.2,children:l.jsx(bp,{className:"h-3 w-3"})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>o(Math.min(5,s+.2)),className:"h-6 px-2 text-xs",disabled:s>=5,children:l.jsx(yp,{className:"h-3 w-3"})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>u((c+90)%360),className:"h-6 px-2 text-xs",children:l.jsx(dp,{className:"h-3 w-3"})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>{o(1),u(0)},className:"h-6 px-2 text-xs",children:"Reset"}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>h(!d),className:"h-6 px-2 text-xs",children:l.jsx(ep,{className:"h-3 w-3"})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:async()=>{try{const t=await fetch(e),n=await t.blob(),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=`image.${i||"png"}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}catch(ES){}},className:"h-6 px-2 text-xs",children:l.jsx(qf,{className:"h-3 w-3"})})]})]}),l.jsxs("div",{className:"flex-1 overflow-hidden flex items-center justify-center bg-gray-50 dark:bg-gray-800 "+(d?"fixed inset-0 z-50 bg-black":""),style:{maxHeight:d?"100vh":r,minHeight:d?"100vh":"100px"},children:[l.jsx("img",{src:e,alt:t,className:"w-full h-full object-contain transition-transform duration-200",style:{transform:`scale(${s}) rotate(${c}deg)`,cursor:s>1?"move":"default",maxWidth:"100%",maxHeight:"100%"},onLoad:e=>{p(!0);const t=e.target;x({width:t.naturalWidth,height:t.naturalHeight})},onError:()=>g(!0),draggable:!1}),!f&&!m&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),l.jsx("div",{className:"text-sm",children:"Loading image..."})]})}),d&&l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>h(!1),className:"absolute top-4 right-4 bg-black/50 text-white hover:bg-black/70",children:"✕ Exit Fullscreen"})]})]})}const Ap=({value:e,onValueChange:t,min:n=0,max:i=100,step:r=1,className:a="",disabled:s=!1})=>{const o=V.useCallback(e=>{const n=parseFloat(e.target.value);t([n])},[t]),c=(e[0]-n)/(i-n)*100;return l.jsx("div",{className:`relative w-full ${a}`,children:l.jsx("div",{className:"relative",children:l.jsx("input",{type:"range",min:n,max:i,step:r,value:e[0],onChange:o,disabled:s,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500",style:{background:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${c}%, #e5e7eb ${c}%, #e5e7eb 100%)`}})})})};function Cp({src:e,mimeType:t,fileExtension:n,maxHeight:i=400,showControls:r=!0}){const a=G.useRef(null),[s,o]=G.useState(!1),[c,u]=G.useState(0),[d,h]=G.useState(0),[f,p]=G.useState(1),[m,g]=G.useState(!1),[v,x]=G.useState(!1),[_,y]=G.useState(!1),[b,S]=G.useState(null),[M,w]=G.useState(null);G.useEffect(()=>{const e=a.current;if(!e)return;const t=()=>u(e.currentTime),n=()=>h(e.duration),i=()=>o(!1),r=()=>x(!0),s=()=>S("Failed to load video"),l=()=>{w({width:e.videoWidth,height:e.videoHeight})};return e.addEventListener("timeupdate",t),e.addEventListener("durationchange",n),e.addEventListener("ended",i),e.addEventListener("canplay",r),e.addEventListener("error",s),e.addEventListener("loadedmetadata",l),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("durationchange",n),e.removeEventListener("ended",i),e.removeEventListener("canplay",r),e.removeEventListener("error",s),e.removeEventListener("loadedmetadata",l)}},[]);const E=()=>{const e=a.current;e&&(s?e.pause():e.play(),o(!s))},T=e=>{const t=a.current;t&&(t.currentTime=Math.max(0,Math.min(d,t.currentTime+e)))},A=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60);return t>0?`${t}:${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${n}:${i.toString().padStart(2,"0")}`};return b?l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx("div",{className:"text-2xl mb-2",children:"🎬"}),l.jsx("div",{className:"text-sm",children:"Failed to load video"}),l.jsxs("div",{className:"text-xs mt-1 text-gray-400",children:[t," • ",n]})]})}):l.jsxs("div",{className:"w-full h-full flex flex-col bg-black",children:[r&&v&&l.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-900 text-white text-xs",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-mono",children:t.split("/")[1].toUpperCase()}),M&&l.jsxs("span",{className:"ml-2",children:[M.width," × ",M.height]})]}),l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:async()=>{try{const t=await fetch(e),i=await t.blob(),r=URL.createObjectURL(i),a=document.createElement("a");a.href=r,a.download=`video.${n||"mp4"}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}catch(ES){}},className:"h-6 px-2 text-xs text-white hover:bg-gray-700",children:[l.jsx(qf,{className:"h-3 w-3 mr-1"}),"Download"]})]}),l.jsxs("div",{className:"flex-1 relative bg-black flex items-center justify-center",style:{minHeight:"200px"},children:[l.jsx("video",{ref:a,src:e,className:"w-full h-full object-contain",style:{maxHeight:i-(r?100:0),maxWidth:"100%"},onClick:E,onError:()=>S("Failed to load video")}),!v&&!b&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black",children:l.jsxs("div",{className:"text-center text-white",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),l.jsx("div",{className:"text-sm",children:"Loading video..."})]})}),v&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer opacity-0 hover:opacity-100 transition-opacity bg-black/20",onClick:E,children:l.jsx("div",{className:"bg-black/50 rounded-full p-4",children:s?l.jsx(rp,{className:"h-8 w-8 text-white"}):l.jsx(ap,{className:"h-8 w-8 text-white"})})})]}),r&&v&&l.jsxs("div",{className:"p-3 bg-gray-900 text-white",children:[d>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx(Ap,{value:[d>0?c/d*100:0],onValueChange:e=>{const t=a.current;if(!t||!d)return;const n=e[0]/100*d;t.currentTime=n,u(n)},max:100,step:.1,className:"w-full"}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[l.jsx("span",{children:A(c)}),l.jsx("span",{children:A(d)})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>T(-10),className:"h-8 w-8 p-0 text-white hover:bg-gray-700",children:l.jsx(fp,{className:"h-4 w-4"})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:E,className:"h-10 w-10 p-0 rounded-full text-white hover:bg-gray-700",children:s?l.jsx(rp,{className:"h-5 w-5"}):l.jsx(ap,{className:"h-5 w-5"})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>T(10),className:"h-8 w-8 p-0 text-white hover:bg-gray-700",children:l.jsx(pp,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>{const e=a.current;e&&(m?(e.volume=f,g(!1)):(e.volume=0,g(!0)))},className:"h-8 w-8 p-0 text-white hover:bg-gray-700",children:m||0===f?l.jsx(xp,{className:"h-4 w-4"}):l.jsx(vp,{className:"h-4 w-4"})}),l.jsx("div",{className:"w-20",children:l.jsx(Ap,{value:[m?0:100*f],onValueChange:e=>{const t=a.current;if(!t)return;const n=e[0]/100;t.volume=n,p(n),g(0===n)},max:100,step:1})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>{const e=a.current;e&&(_?document.exitFullscreen&&document.exitFullscreen():e.requestFullscreen&&e.requestFullscreen(),y(!_))},className:"h-8 w-8 p-0 text-white hover:bg-gray-700",children:l.jsx(ep,{className:"h-4 w-4"})})]})]})]})]})}function Np({src:e,mimeType:t,fileExtension:n,maxHeight:i=300,showControls:r=!0}){const a=G.useRef(null),[s,o]=G.useState(!1),[c,u]=G.useState(0),[d,h]=G.useState(0),[f,p]=G.useState(1),[m,g]=G.useState(!1),[v,x]=G.useState(!1),[_,y]=G.useState(null);G.useEffect(()=>{const e=a.current;if(!e)return;const t=()=>u(e.currentTime),n=()=>h(e.duration),i=()=>o(!1),r=()=>x(!0),s=()=>y("Failed to load audio");return e.addEventListener("timeupdate",t),e.addEventListener("durationchange",n),e.addEventListener("ended",i),e.addEventListener("canplay",r),e.addEventListener("error",s),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("durationchange",n),e.removeEventListener("ended",i),e.removeEventListener("canplay",r),e.removeEventListener("error",s)}},[]);const b=e=>{const t=a.current;t&&(t.currentTime=Math.max(0,Math.min(d,t.currentTime+e)))},S=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return _?l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx("div",{className:"text-2xl mb-2",children:"🎵"}),l.jsx("div",{className:"text-sm",children:"Failed to load audio"}),l.jsxs("div",{className:"text-xs mt-1 text-gray-400",children:[t," • ",n]})]})}):l.jsxs("div",{className:"w-full h-full flex flex-col bg-white dark:bg-gray-900",children:[l.jsx("audio",{ref:a,src:e,preload:"metadata"}),l.jsx("div",{className:"flex-1 flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 min-h-32",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🎵"}),l.jsx("div",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:"Audio Player"}),l.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t.split("/")[1].toUpperCase()," • ",n]}),d>0&&l.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Duration: ",S(d)]})]})}),r&&l.jsxs("div",{className:"p-4 border-t bg-gray-50 dark:bg-gray-800",children:[d>0&&l.jsxs("div",{className:"mb-4",children:[l.jsx(Ap,{value:[d>0?c/d*100:0],onValueChange:e=>{const t=a.current;if(!t||!d)return;const n=e[0]/100*d;t.currentTime=n,u(n)},max:100,step:.1,className:"w-full"}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsx("span",{children:S(c)}),l.jsx("span",{children:S(d)})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>b(-10),disabled:!v,className:"h-8 w-8 p-0",children:l.jsx(fp,{className:"h-4 w-4"})}),l.jsx(Sp,{variant:"default",size:"sm",onClick:()=>{const e=a.current;e&&(s?e.pause():e.play(),o(!s))},disabled:!v,className:"h-10 w-10 p-0 rounded-full",children:s?l.jsx(rp,{className:"h-5 w-5"}):l.jsx(ap,{className:"h-5 w-5"})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>b(10),disabled:!v,className:"h-8 w-8 p-0",children:l.jsx(pp,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>{const e=a.current;e&&(m?(e.volume=f,g(!1)):(e.volume=0,g(!0)))},className:"h-8 w-8 p-0",children:m||0===f?l.jsx(xp,{className:"h-4 w-4"}):l.jsx(vp,{className:"h-4 w-4"})}),l.jsx("div",{className:"w-20",children:l.jsx(Ap,{value:[m?0:100*f],onValueChange:e=>{const t=a.current;if(!t)return;const n=e[0]/100;t.volume=n,p(n),g(0===n)},max:100,step:1})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:async()=>{try{const t=await fetch(e),i=await t.blob(),r=URL.createObjectURL(i),a=document.createElement("a");a.href=r,a.download=`audio.${n||"mp3"}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}catch(ES){}},className:"h-8 w-8 p-0",children:l.jsx(qf,{className:"h-4 w-4"})})]})]})]})]})}function Rp({content:e,mimeType:t,maxHeight:n=400,showControls:i=!0}){const[r,a]=G.useState(null),[s,o]=G.useState(null),[c,u]=G.useState(new Set),[d,h]=G.useState(!1),[f,p]=G.useState(!1);G.useEffect(()=>{try{const t=JSON.parse(e);a(t),o(null)}catch(ES){o(ES.message),a(null)}},[e]);const m=async()=>{try{await navigator.clipboard.writeText(e),p(!0),setTimeout(()=>p(!1),2e3)}catch(ES){}},g=e=>{const t=new Set(c);t.has(e)?t.delete(e):t.add(e),u(t)},v=(e,t="",n=0)=>{if(null===e)return l.jsx("span",{className:"text-gray-500",children:"null"});if("boolean"==typeof e)return l.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:e.toString()});if("number"==typeof e)return l.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:e});if("string"==typeof e)return l.jsxs("span",{className:"text-green-600 dark:text-green-400",children:['"',e,'"']});if(Array.isArray(e)){const i=c.has(t);return l.jsxs("div",{children:[l.jsx("span",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 px-1 rounded",onClick:()=>g(t),children:l.jsxs("span",{className:"text-gray-500",children:[i?"►":"▼"," [",e.length,"]"]})}),!i&&l.jsx("div",{className:"ml-4",children:e.map((i,r)=>l.jsxs("div",{className:"font-mono text-sm",children:[l.jsxs("span",{className:"text-gray-400",children:[r,": "]}),v(i,`${t}[${r}]`,n+1),r<e.length-1&&l.jsx("span",{className:"text-gray-500",children:","})]},r))})]})}if("object"==typeof e){const i=Object.keys(e),r=c.has(t);return l.jsxs("div",{children:[l.jsx("span",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 px-1 rounded",onClick:()=>g(t),children:l.jsxs("span",{className:"text-gray-500",children:[r?"►":"▼"," ",`{${i.length}}`]})}),!r&&l.jsx("div",{className:"ml-4",children:i.map((r,a)=>l.jsxs("div",{className:"font-mono text-sm",children:[l.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:['"',r,'"']}),l.jsx("span",{className:"text-gray-500",children:": "}),v(e[r],t?`${t}.${r}`:r,n+1),a<i.length-1&&l.jsx("span",{className:"text-gray-500",children:","})]},r))})]})}return l.jsx("span",{children:String(e)})};return s?l.jsxs("div",{className:"w-full h-full flex flex-col bg-white dark:bg-gray-900",children:[i&&l.jsxs("div",{className:"flex justify-between items-center p-2 border-b bg-red-50 dark:bg-red-900/20",children:[l.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:l.jsx("span",{className:"font-mono",children:"Invalid JSON"})}),l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:m,className:"h-6 px-2 text-xs",children:[l.jsx(Xf,{className:"h-3 w-3 mr-1"}),"Copy Raw"]})]}),l.jsxs("div",{className:"flex-1 p-4",children:[l.jsx("div",{className:"text-red-600 dark:text-red-400 mb-2",children:"JSON Parse Error:"}),l.jsx("div",{className:"text-sm text-red-500 mb-4",children:s}),l.jsx("pre",{className:"text-xs font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-auto whitespace-pre-wrap",children:e})]})]}):l.jsxs("div",{className:"w-full h-full flex flex-col bg-white dark:bg-gray-900",children:[i&&l.jsxs("div",{className:"flex justify-between items-center p-2 border-b bg-gray-50 dark:bg-gray-800",children:[l.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[l.jsx("span",{className:"font-mono",children:"JSON"}),l.jsxs("span",{className:"ml-2",children:["(",e.length.toLocaleString()," chars)"]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:()=>{if(d)u(new Set);else{const e=new Set,t=(n,i="")=>{"object"==typeof n&&null!==n&&(i&&e.add(i),Object.keys(n).forEach(e=>{const r=i?`${i}.${e}`:e;t(n[e],r)}))};r&&t(r),u(e)}h(!d)},className:"h-6 px-2 text-xs",children:[d?l.jsx(Yf,{className:"h-3 w-3 mr-1"}):l.jsx(np,{className:"h-3 w-3 mr-1"}),d?"Expand":"Collapse"]}),l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:m,className:"h-6 px-2 text-xs",children:[l.jsx(Xf,{className:"h-3 w-3 mr-1"}),f?"Copied!":"Copy"]}),l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:()=>{const t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download="data.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)},className:"h-6 px-2 text-xs",children:[l.jsx(qf,{className:"h-3 w-3 mr-1"}),"Download"]})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 font-mono text-sm w-full h-full",style:{maxHeight:n-(i?60:0),minHeight:"100px",minWidth:"100%"},children:r&&v(r)})]})}function Lp({content:e,src:t,mimeType:n,maxHeight:i=400,showControls:r=!0}){const[a,s]=G.useState(!1),[o,c]=G.useState(null),u=G.useRef(null),d=G.useMemo(()=>{if(!e)return t;try{const t=new Blob([e],{type:"text/html"});return URL.createObjectURL(t)}catch(ES){return c(ES.message),null}},[e,t]);G.useEffect(()=>()=>{d&&d.startsWith("blob:")&&URL.revokeObjectURL(d)},[d]);return o?l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx("div",{className:"text-2xl mb-2",children:"🌐"}),l.jsx("div",{className:"text-sm",children:"Failed to render HTML"}),l.jsx("div",{className:"text-xs mt-1 text-gray-400",children:o})]})}):l.jsxs("div",{className:"w-full h-full flex flex-col bg-white dark:bg-gray-900",children:[r&&l.jsxs("div",{className:"flex justify-between items-center p-2 border-b bg-gray-50 dark:bg-gray-800",children:[l.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[l.jsx("span",{className:"font-mono",children:"HTML"}),e&&l.jsxs("span",{className:"ml-2",children:["(",e.length.toLocaleString()," chars)"]})]}),l.jsxs("div",{className:"flex gap-1",children:[e&&l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:()=>s(!a),className:"h-6 px-2 text-xs",children:[a?l.jsx(Zf,{className:"h-3 w-3 mr-1"}):l.jsx(Kf,{className:"h-3 w-3 mr-1"}),a?"Rendered":"Source"]}),l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:()=>{d&&window.open(d,"_blank")},className:"h-6 px-2 text-xs",children:[l.jsx($f,{className:"h-3 w-3 mr-1"}),"Open"]}),e&&l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:()=>{const t=new Blob([e||""],{type:"text/html"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download="content.html",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)},className:"h-6 px-2 text-xs",children:[l.jsx(qf,{className:"h-3 w-3 mr-1"}),"Download"]})]})]}),l.jsx("div",{className:"flex-1 overflow-hidden",children:a&&e?l.jsx("pre",{className:"text-xs p-4 h-full overflow-auto font-mono whitespace-pre-wrap break-words bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200",style:{maxHeight:i},children:e}):l.jsx("iframe",{ref:u,src:d||void 0,className:"w-full h-full border-0",style:{maxHeight:i},sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox",title:"HTML Content",onError:()=>c("Failed to load HTML content")})})]})}
/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Pp="160",kp=0,Up=1,Ip=2,Dp=100,Op=101,zp=102,Fp=200,jp=201,Bp=202,Hp=203,Vp=204,Gp=205,Wp=206,Xp=207,qp=208,Yp=209,$p=210,Kp=211,Zp=212,Qp=213,Jp=214,em=301,tm=302,nm=306,im=1e3,rm=1001,am=1002,sm=1003,om=1004,lm=1005,cm=1006,um=1007,dm=1008,hm=1009,fm=1012,pm=1013,mm=1014,gm=1015,vm=1016,xm=1020,_m=1023,ym=1026,bm=1027,Sm=33776,Mm=33777,wm=33778,Em=33779,Tm=36492,Am=3001,Cm="",Nm="srgb",Rm="srgb-linear",Lm="display-p3",Pm="display-p3-linear",km="linear",Um="srgb",Im="rec709",Dm="p3",Om=7680,zm=512,Fm=513,jm=514,Bm=515,Hm=516,Vm=517,Gm=518,Wm=519,Xm="300 es",qm=1035,Ym=2e3,$m=2001;class Km{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}const Zm=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Qm=Math.PI/180,Jm=180/Math.PI;function eg(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Zm[255&e]+Zm[e>>8&255]+Zm[e>>16&255]+Zm[e>>24&255]+"-"+Zm[255&t]+Zm[t>>8&255]+"-"+Zm[t>>16&15|64]+Zm[t>>24&255]+"-"+Zm[63&n|128]+Zm[n>>8&255]+"-"+Zm[n>>16&255]+Zm[n>>24&255]+Zm[255&i]+Zm[i>>8&255]+Zm[i>>16&255]+Zm[i>>24&255]).toLowerCase()}function tg(e,t,n){return Math.max(t,Math.min(n,e))}function ng(e,t,n){return(1-n)*e+n*t}function ig(e){return!(e&e-1)&&0!==e}function rg(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function ag(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function sg(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}class og{constructor(e=0,t=0){og.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(tg(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class lg{constructor(e,t,n,i,r,a,s,o,l){lg.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,a,s,o,l)}set(e,t,n,i,r,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],f=n[8],p=i[0],m=i[3],g=i[6],v=i[1],x=i[4],_=i[7],y=i[2],b=i[5],S=i[8];return r[0]=a*p+s*v+o*y,r[3]=a*m+s*x+o*b,r[6]=a*g+s*_+o*S,r[1]=l*p+c*v+u*y,r[4]=l*m+c*x+u*b,r[7]=l*g+c*_+u*S,r[2]=d*p+h*v+f*y,r[5]=d*m+h*x+f*b,r[8]=d*g+h*_+f*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-n*r*c+n*s*o+i*r*l-i*a*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=c*a-s*l,d=s*o-c*r,h=l*r-a*o,f=t*u+n*d+i*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(i*l-c*n)*p,e[2]=(s*n-i*a)*p,e[3]=d*p,e[4]=(c*t-i*o)*p,e[5]=(i*r-s*t)*p,e[6]=h*p,e[7]=(n*o-l*t)*p,e[8]=(a*t-n*r)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,a,s){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-i*l,i*o,-i*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(cg.makeScale(e,t)),this}rotate(e){return this.premultiply(cg.makeRotation(-e)),this}translate(e,t){return this.premultiply(cg.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const cg=new lg;function ug(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function dg(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function hg(){const e=dg("canvas");return e.style.display="block",e}const fg={};function pg(e){e in fg||(fg[e]=!0)}const mg=(new lg).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),gg=(new lg).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),vg={[Rm]:{transfer:km,primaries:Im,toReference:e=>e,fromReference:e=>e},[Nm]:{transfer:Um,primaries:Im,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[Pm]:{transfer:km,primaries:Dm,toReference:e=>e.applyMatrix3(gg),fromReference:e=>e.applyMatrix3(mg)},[Lm]:{transfer:Um,primaries:Dm,toReference:e=>e.convertSRGBToLinear().applyMatrix3(gg),fromReference:e=>e.applyMatrix3(mg).convertLinearToSRGB()}},xg=new Set([Rm,Pm]),_g={enabled:!0,_workingColorSpace:Rm,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!xg.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const i=vg[t].toReference;return(0,vg[n].fromReference)(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return vg[e].primaries},getTransfer:function(e){return e===Cm?km:vg[e].transfer}};function yg(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function bg(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Sg;class Mg{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Sg&&(Sg=dg("canvas")),Sg.width=e.width,Sg.height=e.height;const n=Sg.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Sg}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=dg("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*yg(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*yg(t[e]/255)):t[e]=yg(t[e]);return{data:t,width:e.width,height:e.height}}return e}}let wg=0;class Eg{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:wg++}),this.uuid=eg(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(Tg(i[t].image)):e.push(Tg(i[t]))}else e=Tg(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function Tg(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Mg.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:{}}let Ag=0;class Cg extends Km{constructor(e=Cg.DEFAULT_IMAGE,t=Cg.DEFAULT_MAPPING,n=1001,i=1001,r=1006,a=1008,s=1023,o=1009,l=Cg.DEFAULT_ANISOTROPY,c=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ag++}),this.uuid=eg(),this.name="",this.source=new Eg(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new og(0,0),this.repeat=new og(1,1),this.center=new og(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new lg,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof c?this.colorSpace=c:(pg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===Am?Nm:Cm),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case im:e.x=e.x-Math.floor(e.x);break;case rm:e.x=e.x<0?0:1;break;case am:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case im:e.y=e.y-Math.floor(e.y);break;case rm:e.y=e.y<0?0:1;break;case am:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return pg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Nm?Am:3e3}set encoding(e){pg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Am?Nm:Cm}}Cg.DEFAULT_IMAGE=null,Cg.DEFAULT_MAPPING=300,Cg.DEFAULT_ANISOTROPY=1;class Ng{constructor(e=0,t=0,n=0,i=1){Ng.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const a=.01,s=.1,o=e.elements,l=o[0],c=o[4],u=o[8],d=o[1],h=o[5],f=o[9],p=o[2],m=o[6],g=o[10];if(Math.abs(c-d)<a&&Math.abs(u-p)<a&&Math.abs(f-m)<a){if(Math.abs(c+d)<s&&Math.abs(u+p)<s&&Math.abs(f+m)<s&&Math.abs(l+h+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,v=(g+1)/2,x=(c+d)/4,_=(u+p)/4,y=(f+m)/4;return e>o&&e>v?e<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=x/n,r=_/n):o>v?o<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=x/i,r=y/i):v<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=_/r,i=y/r),this.set(n,i,r,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Rg extends Km{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ng(0,0,e,t),this.scissorTest=!1,this.viewport=new Ng(0,0,e,t);const i={width:e,height:t,depth:1};void 0!==n.encoding&&(pg("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Am?Nm:Cm),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:cm,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new Cg(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Eg(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Lg extends Rg{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Pg extends Cg{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=sm,this.minFilter=sm,this.wrapR=rm,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kg extends Cg{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=sm,this.minFilter=sm,this.wrapR=rm,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ug{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,a,s){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const d=r[a+0],h=r[a+1],f=r[a+2],p=r[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=d,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(u!==p||o!==d||l!==h||c!==f){let e=1-s;const t=o*d+l*h+c*f+u*p,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),a=Math.atan2(r,t*n);e=Math.sin(e*a)/r,s=Math.sin(s*a)/r}const r=s*n;if(o=o*e+d*r,l=l*e+h*r,c=c*e+f*r,u=u*e+p*r,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,a){const s=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[a],d=r[a+1],h=r[a+2],f=r[a+3];return e[t]=s*f+c*u+o*h-l*d,e[t+1]=o*f+c*d+l*u-s*h,e[t+2]=l*f+c*h+s*d-o*u,e[t+3]=c*f-s*u-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,r=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(i/2),u=s(r/2),d=o(n/2),h=o(i/2),f=o(r/2);switch(a){case"XYZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"YXZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"ZXY":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"ZYX":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"YZX":this._x=d*c*u+l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u-d*h*f;break;case"XZY":this._x=d*c*u-l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u+d*h*f}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],u=t[10],d=n+s+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(a-i)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-o)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(r+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(r-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(a-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(tg(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+a*s+i*l-r*o,this._y=i*c+a*o+r*s-n*l,this._z=r*c+a*l+n*o-i*s,this._w=a*c-n*s-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,a=this._w;let s=a*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ig{constructor(e=0,t=0,n=0){Ig.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Og.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Og.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,s=e.z,o=e.w,l=2*(a*i-s*n),c=2*(s*t-r*i),u=2*(r*n-a*t);return this.x=t+o*l+a*u-s*c,this.y=n+o*c+s*l-r*u,this.z=i+o*u+r*c-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,a=t.x,s=t.y,o=t.z;return this.x=i*o-r*s,this.y=r*a-n*o,this.z=n*s-i*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Dg.copy(this).projectOnVector(e),this.sub(Dg)}reflect(e){return this.sub(Dg.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(tg(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Dg=new Ig,Og=new Ug;class zg{constructor(e=new Ig(1/0,1/0,1/0),t=new Ig(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(jg.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(jg.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=jg.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,jg):jg.fromBufferAttribute(i,t),jg.applyMatrix4(e.matrixWorld),this.expandByPoint(jg);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Bg.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Bg.copy(n.boundingBox)),Bg.applyMatrix4(e.matrixWorld),this.union(Bg)}const i=e.children;for(let r=0,a=i.length;r<a;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,jg),jg.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Yg),$g.subVectors(this.max,Yg),Hg.subVectors(e.a,Yg),Vg.subVectors(e.b,Yg),Gg.subVectors(e.c,Yg),Wg.subVectors(Vg,Hg),Xg.subVectors(Gg,Vg),qg.subVectors(Hg,Gg);let t=[0,-Wg.z,Wg.y,0,-Xg.z,Xg.y,0,-qg.z,qg.y,Wg.z,0,-Wg.x,Xg.z,0,-Xg.x,qg.z,0,-qg.x,-Wg.y,Wg.x,0,-Xg.y,Xg.x,0,-qg.y,qg.x,0];return!!Qg(t,Hg,Vg,Gg,$g)&&(t=[1,0,0,0,1,0,0,0,1],!!Qg(t,Hg,Vg,Gg,$g)&&(Kg.crossVectors(Wg,Xg),t=[Kg.x,Kg.y,Kg.z],Qg(t,Hg,Vg,Gg,$g)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,jg).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(jg).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Fg[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fg[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fg[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fg[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fg[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fg[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fg[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fg[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fg)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Fg=[new Ig,new Ig,new Ig,new Ig,new Ig,new Ig,new Ig,new Ig],jg=new Ig,Bg=new zg,Hg=new Ig,Vg=new Ig,Gg=new Ig,Wg=new Ig,Xg=new Ig,qg=new Ig,Yg=new Ig,$g=new Ig,Kg=new Ig,Zg=new Ig;function Qg(e,t,n,i,r){for(let a=0,s=e.length-3;a<=s;a+=3){Zg.fromArray(e,a);const s=r.x*Math.abs(Zg.x)+r.y*Math.abs(Zg.y)+r.z*Math.abs(Zg.z),o=t.dot(Zg),l=n.dot(Zg),c=i.dot(Zg);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const Jg=new zg,ev=new Ig,tv=new Ig;class nv{constructor(e=new Ig,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Jg.setFromPoints(e).getCenter(n);let i=0;for(let r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ev.subVectors(e,this.center);const t=ev.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(ev,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(tv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ev.copy(e.center).add(tv)),this.expandByPoint(ev.copy(e.center).sub(tv))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const iv=new Ig,rv=new Ig,av=new Ig,sv=new Ig,ov=new Ig,lv=new Ig,cv=new Ig;class uv{constructor(e=new Ig,t=new Ig(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,iv)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=iv.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(iv.copy(this.origin).addScaledVector(this.direction,t),iv.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){rv.copy(e).add(t).multiplyScalar(.5),av.copy(t).sub(e).normalize(),sv.copy(this.origin).sub(rv);const r=.5*e.distanceTo(t),a=-this.direction.dot(av),s=sv.dot(this.direction),o=-sv.dot(av),l=sv.lengthSq(),c=Math.abs(1-a*a);let u,d,h,f;if(c>0)if(u=a*o-s,d=a*s-o,f=r*c,u>=0)if(d>=-f)if(d<=f){const e=1/c;u*=e,d*=e,h=u*(u+a*d+2*s)+d*(a*u+d+2*o)+l}else d=r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d=-r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d<=-f?(u=Math.max(0,-(-a*r+s)),d=u>0?-r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l):d<=f?(u=0,d=Math.min(Math.max(-r,-o),r),h=d*(d+2*o)+l):(u=Math.max(0,-(a*r+s)),d=u>0?r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l);else d=a>0?-r:r,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(rv).addScaledVector(av,d),h}intersectSphere(e,t){iv.subVectors(e.center,this.origin);const n=iv.dot(this.direction),i=iv.dot(iv)-n*n,r=e.radius*e.radius;if(i>r)return null;const a=Math.sqrt(r-i),s=n-a,o=n+a;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),c>=0?(r=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(r=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),n>a||r>i?null:((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),u>=0?(s=(e.min.z-d.z)*u,o=(e.max.z-d.z)*u):(s=(e.max.z-d.z)*u,o=(e.min.z-d.z)*u),n>o||s>i?null:((s>n||n!=n)&&(n=s),(o<i||i!=i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,iv)}intersectTriangle(e,t,n,i,r){ov.subVectors(t,e),lv.subVectors(n,e),cv.crossVectors(ov,lv);let a,s=this.direction.dot(cv);if(s>0){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}sv.subVectors(this.origin,e);const o=a*this.direction.dot(lv.crossVectors(sv,lv));if(o<0)return null;const l=a*this.direction.dot(ov.cross(sv));if(l<0)return null;if(o+l>s)return null;const c=-a*sv.dot(cv);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class dv{constructor(e,t,n,i,r,a,s,o,l,c,u,d,h,f,p,m){dv.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,a,s,o,l,c,u,d,h,f,p,m)}set(e,t,n,i,r,a,s,o,l,c,u,d,h,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new dv).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/hv.setFromMatrixColumn(e,0).length(),r=1/hv.setFromMatrixColumn(e,1).length(),a=1/hv.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=a*c,n=a*u,i=s*c,r=s*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-s*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e+r*s,t[4]=i*s-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e-r*s,t[4]=-a*u,t[8]=i+n*s,t[1]=n+i*s,t[5]=a*c,t[9]=r-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,n=a*u,i=s*c,r=s*u;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=a*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=s*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(pv,e,mv)}lookAt(e,t,n){const i=this.elements;return xv.subVectors(e,t),0===xv.lengthSq()&&(xv.z=1),xv.normalize(),gv.crossVectors(n,xv),0===gv.lengthSq()&&(1===Math.abs(n.z)?xv.x+=1e-4:xv.z+=1e-4,xv.normalize(),gv.crossVectors(n,xv)),gv.normalize(),vv.crossVectors(xv,gv),i[0]=gv.x,i[4]=vv.x,i[8]=xv.x,i[1]=gv.y,i[5]=vv.y,i[9]=xv.y,i[2]=gv.z,i[6]=vv.z,i[10]=xv.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],x=n[7],_=n[11],y=n[15],b=i[0],S=i[4],M=i[8],w=i[12],E=i[1],T=i[5],A=i[9],C=i[13],N=i[2],R=i[6],L=i[10],P=i[14],k=i[3],U=i[7],I=i[11],D=i[15];return r[0]=a*b+s*E+o*N+l*k,r[4]=a*S+s*T+o*R+l*U,r[8]=a*M+s*A+o*L+l*I,r[12]=a*w+s*C+o*P+l*D,r[1]=c*b+u*E+d*N+h*k,r[5]=c*S+u*T+d*R+h*U,r[9]=c*M+u*A+d*L+h*I,r[13]=c*w+u*C+d*P+h*D,r[2]=f*b+p*E+m*N+g*k,r[6]=f*S+p*T+m*R+g*U,r[10]=f*M+p*A+m*L+g*I,r[14]=f*w+p*C+m*P+g*D,r[3]=v*b+x*E+_*N+y*k,r[7]=v*S+x*T+_*R+y*U,r[11]=v*M+x*A+_*L+y*I,r[15]=v*w+x*C+_*P+y*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+r*o*u-i*l*u-r*s*d+n*l*d+i*s*h-n*o*h)+e[7]*(+t*o*h-t*l*d+r*a*d-i*a*h+i*l*c-r*o*c)+e[11]*(+t*l*u-t*s*h-r*a*u+n*a*h+r*s*c-n*l*c)+e[15]*(-i*s*c-t*o*u+t*s*d+i*a*u-n*a*d+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*d*l+p*o*h-s*m*h-u*o*g+s*d*g,x=f*d*l-c*m*l-f*o*h+a*m*h+c*o*g-a*d*g,_=c*p*l-f*u*l+f*s*h-a*p*h-c*s*g+a*u*g,y=f*u*o-c*p*o-f*s*d+a*p*d+c*s*m-a*u*m,b=t*v+n*x+i*_+r*y;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/b;return e[0]=v*S,e[1]=(p*d*r-u*m*r-p*i*h+n*m*h+u*i*g-n*d*g)*S,e[2]=(s*m*r-p*o*r+p*i*l-n*m*l-s*i*g+n*o*g)*S,e[3]=(u*o*r-s*d*r-u*i*l+n*d*l+s*i*h-n*o*h)*S,e[4]=x*S,e[5]=(c*m*r-f*d*r+f*i*h-t*m*h-c*i*g+t*d*g)*S,e[6]=(f*o*r-a*m*r-f*i*l+t*m*l+a*i*g-t*o*g)*S,e[7]=(a*d*r-c*o*r+c*i*l-t*d*l-a*i*h+t*o*h)*S,e[8]=_*S,e[9]=(f*u*r-c*p*r-f*n*h+t*p*h+c*n*g-t*u*g)*S,e[10]=(a*p*r-f*s*r+f*n*l-t*p*l-a*n*g+t*s*g)*S,e[11]=(c*s*r-a*u*r-c*n*l+t*u*l+a*n*h-t*s*h)*S,e[12]=y*S,e[13]=(c*p*i-f*u*i+f*n*d-t*p*d-c*n*m+t*u*m)*S,e[14]=(f*s*i-a*p*i-f*n*o+t*p*o+a*n*m-t*s*m)*S,e[15]=(a*u*i-c*s*i+c*n*o-t*u*o-a*n*d+t*s*d)*S,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,s=e.y,o=e.z,l=r*a,c=r*s;return this.set(l*a+n,l*s-i*o,l*o+i*s,0,l*s+i*o,c*s+n,c*o-i*a,0,l*o-i*s,c*o+i*a,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,c=a+a,u=s+s,d=r*l,h=r*c,f=r*u,p=a*c,m=a*u,g=s*u,v=o*l,x=o*c,_=o*u,y=n.x,b=n.y,S=n.z;return i[0]=(1-(p+g))*y,i[1]=(h+_)*y,i[2]=(f-x)*y,i[3]=0,i[4]=(h-_)*b,i[5]=(1-(d+g))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(f+x)*S,i[9]=(m-v)*S,i[10]=(1-(d+p))*S,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=hv.set(i[0],i[1],i[2]).length();const a=hv.set(i[4],i[5],i[6]).length(),s=hv.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],fv.copy(this);const o=1/r,l=1/a,c=1/s;return fv.elements[0]*=o,fv.elements[1]*=o,fv.elements[2]*=o,fv.elements[4]*=l,fv.elements[5]*=l,fv.elements[6]*=l,fv.elements[8]*=c,fv.elements[9]*=c,fv.elements[10]*=c,t.setFromRotationMatrix(fv),n.x=r,n.y=a,n.z=s,this}makePerspective(e,t,n,i,r,a,s=2e3){const o=this.elements,l=2*r/(t-e),c=2*r/(n-i),u=(t+e)/(t-e),d=(n+i)/(n-i);let h,f;if(s===Ym)h=-(a+r)/(a-r),f=-2*a*r/(a-r);else{if(s!==$m)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);h=-a/(a-r),f=-a*r/(a-r)}return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,i,r,a,s=2e3){const o=this.elements,l=1/(t-e),c=1/(n-i),u=1/(a-r),d=(t+e)*l,h=(n+i)*c;let f,p;if(s===Ym)f=(a+r)*u,p=-2*u;else{if(s!==$m)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);f=r*u,p=-1*u}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=p,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const hv=new Ig,fv=new dv,pv=new Ig(0,0,0),mv=new Ig(1,1,1),gv=new Ig,vv=new Ig,xv=new Ig,_v=new dv,yv=new Ug;class bv{constructor(e=0,t=0,n=0,i=bv.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],a=i[4],s=i[8],o=i[1],l=i[5],c=i[9],u=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(tg(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-tg(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(tg(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-tg(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(tg(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-tg(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,h),this._y=0)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return _v.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_v,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return yv.setFromEuler(this),this.setFromQuaternion(yv,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}bv.DEFAULT_ORDER="XYZ";class Sv{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let Mv=0;const wv=new Ig,Ev=new Ug,Tv=new dv,Av=new Ig,Cv=new Ig,Nv=new Ig,Rv=new Ug,Lv=new Ig(1,0,0),Pv=new Ig(0,1,0),kv=new Ig(0,0,1),Uv={type:"added"},Iv={type:"removed"};class Dv extends Km{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Mv++}),this.uuid=eg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Dv.DEFAULT_UP.clone();const e=new Ig,t=new bv,n=new Ug,i=new Ig(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new dv},normalMatrix:{value:new lg}}),this.matrix=new dv,this.matrixWorld=new dv,this.matrixAutoUpdate=Dv.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Dv.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Sv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ev.setFromAxisAngle(e,t),this.quaternion.multiply(Ev),this}rotateOnWorldAxis(e,t){return Ev.setFromAxisAngle(e,t),this.quaternion.premultiply(Ev),this}rotateX(e){return this.rotateOnAxis(Lv,e)}rotateY(e){return this.rotateOnAxis(Pv,e)}rotateZ(e){return this.rotateOnAxis(kv,e)}translateOnAxis(e,t){return wv.copy(e).applyQuaternion(this.quaternion),this.position.add(wv.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Lv,e)}translateY(e){return this.translateOnAxis(Pv,e)}translateZ(e){return this.translateOnAxis(kv,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Tv.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Av.copy(e):Av.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Cv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Tv.lookAt(Cv,Av,this.up):Tv.lookAt(Av,Cv,this.up),this.quaternion.setFromRotationMatrix(Tv),i&&(Tv.extractRotation(i.matrixWorld),Ev.setFromRotationMatrix(Tv),this.quaternion.premultiply(Ev.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this||e&&e.isObject3D&&(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Uv)),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Iv)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Tv.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Tv.multiply(e.parent.matrixWorld)),e.applyMatrix4(Tv),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cv,e,Nv),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cv,Rv,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),null!==this.boundingBox&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=a(e.geometries),i=a(e.materials),r=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function a(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}Dv.DEFAULT_UP=new Ig(0,1,0),Dv.DEFAULT_MATRIX_AUTO_UPDATE=!0,Dv.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ov=new Ig,zv=new Ig,Fv=new Ig,jv=new Ig,Bv=new Ig,Hv=new Ig,Vv=new Ig,Gv=new Ig,Wv=new Ig,Xv=new Ig;let qv=!1;class Yv{constructor(e=new Ig,t=new Ig,n=new Ig){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Ov.subVectors(e,t),i.cross(Ov);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){Ov.subVectors(i,t),zv.subVectors(n,t),Fv.subVectors(e,t);const a=Ov.dot(Ov),s=Ov.dot(zv),o=Ov.dot(Fv),l=zv.dot(zv),c=zv.dot(Fv),u=a*l-s*s;if(0===u)return r.set(0,0,0),null;const d=1/u,h=(l*o-s*c)*d,f=(a*c-s*o)*d;return r.set(1-h-f,f,h)}static containsPoint(e,t,n,i){return null!==this.getBarycoord(e,t,n,i,jv)&&(jv.x>=0&&jv.y>=0&&jv.x+jv.y<=1)}static getUV(e,t,n,i,r,a,s,o){return!1===qv&&(qv=!0),this.getInterpolation(e,t,n,i,r,a,s,o)}static getInterpolation(e,t,n,i,r,a,s,o){return null===this.getBarycoord(e,t,n,i,jv)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(r,jv.x),o.addScaledVector(a,jv.y),o.addScaledVector(s,jv.z),o)}static isFrontFacing(e,t,n,i){return Ov.subVectors(n,t),zv.subVectors(e,t),Ov.cross(zv).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ov.subVectors(this.c,this.b),zv.subVectors(this.a,this.b),.5*Ov.cross(zv).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Yv.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Yv.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return!1===qv&&(qv=!0),Yv.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}getInterpolation(e,t,n,i,r){return Yv.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return Yv.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Yv.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let a,s;Bv.subVectors(i,n),Hv.subVectors(r,n),Gv.subVectors(e,n);const o=Bv.dot(Gv),l=Hv.dot(Gv);if(o<=0&&l<=0)return t.copy(n);Wv.subVectors(e,i);const c=Bv.dot(Wv),u=Hv.dot(Wv);if(c>=0&&u<=c)return t.copy(i);const d=o*u-c*l;if(d<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(n).addScaledVector(Bv,a);Xv.subVectors(e,r);const h=Bv.dot(Xv),f=Hv.dot(Xv);if(f>=0&&h<=f)return t.copy(r);const p=h*l-o*f;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(n).addScaledVector(Hv,s);const m=c*f-h*u;if(m<=0&&u-c>=0&&h-f>=0)return Vv.subVectors(r,i),s=(u-c)/(u-c+(h-f)),t.copy(i).addScaledVector(Vv,s);const g=1/(m+p+d);return a=p*g,s=d*g,t.copy(n).addScaledVector(Bv,a).addScaledVector(Hv,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const $v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Kv={h:0,s:0,l:0},Zv={h:0,s:0,l:0};function Qv(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Jv{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Nm){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,_g.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=_g.workingColorSpace){return this.r=e,this.g=t,this.b=n,_g.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=_g.workingColorSpace){var r;if(e=(e%(r=1)+r)%r,t=tg(t,0,1),n=tg(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=Qv(r,i,e+1/3),this.g=Qv(r,i,e),this.b=Qv(r,i,e-1/3)}return _g.toWorkingColorSpace(this,i),this}setStyle(e,t=Nm){function n(e){void 0!==e&&parseFloat(e)}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let e;const r=i[1],a=i[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(e[4]),this.setRGB(Math.min(255,parseInt(e[1],10))/255,Math.min(255,parseInt(e[2],10))/255,Math.min(255,parseInt(e[3],10))/255,t);if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(e[4]),this.setRGB(Math.min(100,parseInt(e[1],10))/100,Math.min(100,parseInt(e[2],10))/100,Math.min(100,parseInt(e[3],10))/100,t);break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(e[4]),this.setHSL(parseFloat(e[1])/360,parseFloat(e[2])/100,parseFloat(e[3])/100,t)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=i[1],n=e.length;if(3===n)return this.setRGB(parseInt(e.charAt(0),16)/15,parseInt(e.charAt(1),16)/15,parseInt(e.charAt(2),16)/15,t);if(6===n)return this.setHex(parseInt(e,16),t)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Nm){const n=$v[e.toLowerCase()];return void 0!==n&&this.setHex(n,t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=yg(e.r),this.g=yg(e.g),this.b=yg(e.b),this}copyLinearToSRGB(e){return this.r=bg(e.r),this.g=bg(e.g),this.b=bg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Nm){return _g.fromWorkingColorSpace(ex.copy(this),e),65536*Math.round(tg(255*ex.r,0,255))+256*Math.round(tg(255*ex.g,0,255))+Math.round(tg(255*ex.b,0,255))}getHexString(e=Nm){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=_g.workingColorSpace){_g.fromWorkingColorSpace(ex.copy(this),t);const n=ex.r,i=ex.g,r=ex.b,a=Math.max(n,i,r),s=Math.min(n,i,r);let o,l;const c=(s+a)/2;if(s===a)o=0,l=0;else{const e=a-s;switch(l=c<=.5?e/(a+s):e/(2-a-s),a){case n:o=(i-r)/e+(i<r?6:0);break;case i:o=(r-n)/e+2;break;case r:o=(n-i)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=_g.workingColorSpace){return _g.fromWorkingColorSpace(ex.copy(this),t),e.r=ex.r,e.g=ex.g,e.b=ex.b,e}getStyle(e=Nm){_g.fromWorkingColorSpace(ex.copy(this),e);const t=ex.r,n=ex.g,i=ex.b;return e!==Nm?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(e,t,n){return this.getHSL(Kv),this.setHSL(Kv.h+e,Kv.s+t,Kv.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Kv),e.getHSL(Zv);const n=ng(Kv.h,Zv.h,t),i=ng(Kv.s,Zv.s,t),r=ng(Kv.l,Zv.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ex=new Jv;Jv.NAMES=$v;let tx=0;class nx extends Km{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:tx++}),this.uuid=eg(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Dp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Jv(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Om,this.stencilZFail=Om,this.stencilZPass=Om,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n)continue;const i=this[t];void 0!==i&&(i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==Dp&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Om&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Om&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Om&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class ix extends nx{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Jv(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const rx=new Ig,ax=new og;class sx{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=gm,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)ax.fromBufferAttribute(this,t),ax.applyMatrix3(e),this.setXY(t,ax.x,ax.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)rx.fromBufferAttribute(this,t),rx.applyMatrix3(e),this.setXYZ(t,rx.x,rx.y,rx.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)rx.fromBufferAttribute(this,t),rx.applyMatrix4(e),this.setXYZ(t,rx.x,rx.y,rx.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)rx.fromBufferAttribute(this,t),rx.applyNormalMatrix(e),this.setXYZ(t,rx.x,rx.y,rx.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)rx.fromBufferAttribute(this,t),rx.transformDirection(e),this.setXYZ(t,rx.x,rx.y,rx.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ag(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=sg(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ag(t,this.array)),t}setX(e,t){return this.normalized&&(t=sg(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ag(t,this.array)),t}setY(e,t){return this.normalized&&(t=sg(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ag(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sg(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ag(t,this.array)),t}setW(e,t){return this.normalized&&(t=sg(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=sg(t,this.array),n=sg(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=sg(t,this.array),n=sg(n,this.array),i=sg(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=sg(t,this.array),n=sg(n,this.array),i=sg(i,this.array),r=sg(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class ox extends sx{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class lx extends sx{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class cx extends sx{constructor(e,t,n){super(new Float32Array(e),t,n)}}let ux=0;const dx=new dv,hx=new Dv,fx=new Ig,px=new zg,mx=new zg,gx=new Ig;class vx extends Km{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ux++}),this.uuid=eg(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ug(e)?lx:ox)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new lg).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return dx.makeRotationFromQuaternion(e),this.applyMatrix4(dx),this}rotateX(e){return dx.makeRotationX(e),this.applyMatrix4(dx),this}rotateY(e){return dx.makeRotationY(e),this.applyMatrix4(dx),this}rotateZ(e){return dx.makeRotationZ(e),this.applyMatrix4(dx),this}translate(e,t,n){return dx.makeTranslation(e,t,n),this.applyMatrix4(dx),this}scale(e,t,n){return dx.makeScale(e,t,n),this.applyMatrix4(dx),this}lookAt(e){return hx.lookAt(e),hx.updateMatrix(),this.applyMatrix4(hx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fx).negate(),this.translate(fx.x,fx.y,fx.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new cx(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new zg);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingBox.set(new Ig(-1/0,-1/0,-1/0),new Ig(1/0,1/0,1/0));else{if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];px.setFromBufferAttribute(n),this.morphTargetsRelative?(gx.addVectors(this.boundingBox.min,px.min),this.boundingBox.expandByPoint(gx),gx.addVectors(this.boundingBox.max,px.max),this.boundingBox.expandByPoint(gx)):(this.boundingBox.expandByPoint(px.min),this.boundingBox.expandByPoint(px.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new nv);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingSphere.set(new Ig,1/0);else if(e){const n=this.boundingSphere.center;if(px.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];mx.setFromBufferAttribute(n),this.morphTargetsRelative?(gx.addVectors(px.min,mx.min),px.expandByPoint(gx),gx.addVectors(px.max,mx.max),px.expandByPoint(gx)):(px.expandByPoint(mx.min),px.expandByPoint(mx.max))}px.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)gx.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(gx));if(t)for(let r=0,a=t.length;r<a;r++){const a=t[r],s=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)gx.fromBufferAttribute(a,t),s&&(fx.fromBufferAttribute(e,t),gx.add(fx)),i=Math.max(i,n.distanceToSquared(gx))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return;const n=e.array,i=t.position.array,r=t.normal.array,a=t.uv.array,s=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new sx(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let E=0;E<s;E++)l[E]=new Ig,c[E]=new Ig;const u=new Ig,d=new Ig,h=new Ig,f=new og,p=new og,m=new og,g=new Ig,v=new Ig;function x(e,t,n){u.fromArray(i,3*e),d.fromArray(i,3*t),h.fromArray(i,3*n),f.fromArray(a,2*e),p.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(u),h.sub(u),p.sub(f),m.sub(f);const r=1/(p.x*m.y-m.x*p.y);isFinite(r)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(r),v.copy(h).multiplyScalar(p.x).addScaledVector(d,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let _=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let E=0,T=_.length;E<T;++E){const e=_[E],t=e.start;for(let i=t,r=t+e.count;i<r;i+=3)x(n[i+0],n[i+1],n[i+2])}const y=new Ig,b=new Ig,S=new Ig,M=new Ig;function w(e){S.fromArray(r,3*e),M.copy(S);const t=l[e];y.copy(t),y.sub(S.multiplyScalar(S.dot(t))).normalize(),b.crossVectors(M,t);const n=b.dot(c[e])<0?-1:1;o[4*e]=y.x,o[4*e+1]=y.y,o[4*e+2]=y.z,o[4*e+3]=n}for(let E=0,T=_.length;E<T;++E){const e=_[E],t=e.start;for(let i=t,r=t+e.count;i<r;i+=3)w(n[i+0]),w(n[i+1]),w(n[i+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new sx(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Ig,r=new Ig,a=new Ig,s=new Ig,o=new Ig,l=new Ig,c=new Ig,u=new Ig;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),f=e.getX(d+1),p=e.getX(d+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,f),a.fromBufferAttribute(t,p),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),s.fromBufferAttribute(n,h),o.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),s.add(c),o.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(f,o.x,o.y,o.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)gx.fromBufferAttribute(e,t),gx.normalize(),e.setXYZ(t,gx.x,gx.y,gx.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i);let s=0,o=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)a[o++]=n[s++]}return new sx(a,i,r)}if(null===this.index)return this;const t=new vx,n=this.index.array,i=this.attributes;for(const s in i){const r=e(i[s],n);t.setAttribute(s,r)}const r=this.morphAttributes;for(const s in r){const i=[],a=r[s];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);i.push(r)}t.morphAttributes[s]=i}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,o=a.length;s<o;s++){const e=a[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const i={};let r=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[o]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let l=0,c=a.length;l<c;l++){const e=a[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const xx=new dv,_x=new uv,yx=new nv,bx=new Ig,Sx=new Ig,Mx=new Ig,wx=new Ig,Ex=new Ig,Tx=new Ig,Ax=new og,Cx=new og,Nx=new og,Rx=new Ig,Lx=new Ig,Px=new Ig,kx=new Ig,Ux=new Ig;class Ix extends Dv{constructor(e=new vx,t=new ix){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(r&&s){Tx.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=s[n],o=r[n];0!==i&&(Ex.fromBufferAttribute(o,e),a?Tx.addScaledVector(Ex,i):Tx.addScaledVector(Ex.sub(t),i))}t.add(Tx)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),yx.copy(n.boundingSphere),yx.applyMatrix4(r),_x.copy(e.ray).recast(e.near),!1===yx.containsPoint(_x.origin)){if(null===_x.intersectSphere(yx,bx))return;if(_x.origin.distanceToSquared(bx)>(e.far-e.near)**2)return}xx.copy(r).invert(),_x.copy(e.ray).applyMatrix4(xx),null!==n.boundingBox&&!1===_x.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,_x)}}_computeIntersections(e,t,n){let i;const r=this.geometry,a=this.material,s=r.index,o=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,d=r.groups,h=r.drawRange;if(null!==s)if(Array.isArray(a))for(let f=0,p=d.length;f<p;f++){const r=d[f],o=a[r.materialIndex];for(let a=Math.max(r.start,h.start),d=Math.min(s.count,Math.min(r.start+r.count,h.start+h.count));a<d;a+=3){i=Dx(this,o,e,n,l,c,u,s.getX(a),s.getX(a+1),s.getX(a+2)),i&&(i.faceIndex=Math.floor(a/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);r<o;r+=3){i=Dx(this,a,e,n,l,c,u,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}else if(void 0!==o)if(Array.isArray(a))for(let f=0,p=d.length;f<p;f++){const r=d[f],s=a[r.materialIndex];for(let a=Math.max(r.start,h.start),d=Math.min(o.count,Math.min(r.start+r.count,h.start+h.count));a<d;a+=3){i=Dx(this,s,e,n,l,c,u,a,a+1,a+2),i&&(i.faceIndex=Math.floor(a/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);r<s;r+=3){i=Dx(this,a,e,n,l,c,u,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}}}function Dx(e,t,n,i,r,a,s,o,l,c){e.getVertexPosition(o,Sx),e.getVertexPosition(l,Mx),e.getVertexPosition(c,wx);const u=function(e,t,n,i,r,a,s,o){let l;if(l=1===t.side?i.intersectTriangle(s,a,r,!0,o):i.intersectTriangle(r,a,s,0===t.side,o),null===l)return null;Ux.copy(o),Ux.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Ux);return c<n.near||c>n.far?null:{distance:c,point:Ux.clone(),object:e}}(e,t,n,i,Sx,Mx,wx,kx);if(u){r&&(Ax.fromBufferAttribute(r,o),Cx.fromBufferAttribute(r,l),Nx.fromBufferAttribute(r,c),u.uv=Yv.getInterpolation(kx,Sx,Mx,wx,Ax,Cx,Nx,new og)),a&&(Ax.fromBufferAttribute(a,o),Cx.fromBufferAttribute(a,l),Nx.fromBufferAttribute(a,c),u.uv1=Yv.getInterpolation(kx,Sx,Mx,wx,Ax,Cx,Nx,new og),u.uv2=u.uv1),s&&(Rx.fromBufferAttribute(s,o),Lx.fromBufferAttribute(s,l),Px.fromBufferAttribute(s,c),u.normal=Yv.getInterpolation(kx,Sx,Mx,wx,Rx,Lx,Px,new Ig),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const e={a:o,b:l,c:c,normal:new Ig,materialIndex:0};Yv.getNormal(Sx,Mx,wx,e.normal),u.face=e}return u}class Ox extends vx{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const s=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const o=[],l=[],c=[],u=[];let d=0,h=0;function f(e,t,n,i,r,a,f,p,m,g,v){const x=a/m,_=f/g,y=a/2,b=f/2,S=p/2,M=m+1,w=g+1;let E=0,T=0;const A=new Ig;for(let s=0;s<w;s++){const a=s*_-b;for(let o=0;o<M;o++){const d=o*x-y;A[e]=d*i,A[t]=a*r,A[n]=S,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=p>0?1:-1,c.push(A.x,A.y,A.z),u.push(o/m),u.push(1-s/g),E+=1}}for(let s=0;s<g;s++)for(let e=0;e<m;e++){const t=d+e+M*s,n=d+e+M*(s+1),i=d+(e+1)+M*(s+1),r=d+(e+1)+M*s;o.push(t,n,r),o.push(n,i,r),T+=6}s.addGroup(h,T,v),h+=T,d+=E}f("z","y","x",-1,-1,n,t,e,a,r,0),f("z","y","x",1,-1,n,t,-e,a,r,1),f("x","z","y",1,1,e,n,t,i,a,2),f("x","z","y",1,-1,e,n,-t,i,a,3),f("x","y","z",1,-1,e,t,n,i,r,4),f("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new cx(l,3)),this.setAttribute("normal",new cx(c,3)),this.setAttribute("uv",new cx(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ox(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zx(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?t[n][i]=null:t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function Fx(e){const t={};for(let n=0;n<e.length;n++){const i=zx(e[n]);for(const e in i)t[e]=i[e]}return t}function jx(e){return null===e.getRenderTarget()?e.outputColorSpace:_g.workingColorSpace}const Bx={clone:zx,merge:Fx};class Hx extends nx{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zx(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Vx extends Dv{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dv,this.projectionMatrix=new dv,this.projectionMatrixInverse=new dv,this.coordinateSystem=Ym}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Gx extends Vx{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Jm*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Qm*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Jm*Math.atan(Math.tan(.5*Qm*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Qm*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/e,t-=a.offsetY*n/s,i*=a.width/e,n*=a.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Wx=-90;class Xx extends Dv{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Gx(Wx,1,e,t);i.layers=this.layers,this.add(i);const r=new Gx(Wx,1,e,t);r.layers=this.layers,this.add(r);const a=new Gx(Wx,1,e,t);a.layers=this.layers,this.add(a);const s=new Gx(Wx,1,e,t);s.layers=this.layers,this.add(s);const o=new Gx(Wx,1,e,t);o.layers=this.layers,this.add(o);const l=new Gx(Wx,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,a,s,o]=t;for(const l of t)this.remove(l);if(e===Ym)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==$m)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,s,o,l,c]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.xr.enabled;e.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,s),e.setRenderTarget(n,3,i),e.render(t,o),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=p,e.setRenderTarget(n,5,i),e.render(t,c),e.setRenderTarget(u,d,h),e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class qx extends Cg{constructor(e,t,n,i,r,a,s,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:em,n,i,r,a,s,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Yx extends Lg{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];void 0!==t.encoding&&(pg("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Am?Nm:Cm),this.texture=new qx(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:cm}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new Ox(5,5,5),r=new Hx({name:"CubemapFromEquirect",uniforms:zx(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=t;const a=new Ix(i,r),s=t.minFilter;t.minFilter===dm&&(t.minFilter=cm);return new Xx(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(r)}}const $x=new Ig,Kx=new Ig,Zx=new lg;class Qx{constructor(e=new Ig(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=$x.subVectors(n,t).cross(Kx.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta($x),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Zx.getNormalMatrix(e),i=this.coplanarPoint($x).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Jx=new nv,e_=new Ig;class t_{constructor(e=new Qx,t=new Qx,n=new Qx,i=new Qx,r=new Qx,a=new Qx){this.planes=[e,t,n,i,r,a]}set(e,t,n,i,r,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=2e3){const n=this.planes,i=e.elements,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],f=i[9],p=i[10],m=i[11],g=i[12],v=i[13],x=i[14],_=i[15];if(n[0].setComponents(o-r,d-l,m-h,_-g).normalize(),n[1].setComponents(o+r,d+l,m+h,_+g).normalize(),n[2].setComponents(o+a,d+c,m+f,_+v).normalize(),n[3].setComponents(o-a,d-c,m-f,_-v).normalize(),n[4].setComponents(o-s,d-u,m-p,_-x).normalize(),t===Ym)n[5].setComponents(o+s,d+u,m+p,_+x).normalize();else{if(t!==$m)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,u,p,x).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Jx.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Jx.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Jx)}intersectsSprite(e){return Jx.center.set(0,0,0),Jx.radius=.7071067811865476,Jx.applyMatrix4(e.matrixWorld),this.intersectsSphere(Jx)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(e_.x=i.normal.x>0?e.max.x:e.min.x,e_.y=i.normal.y>0?e.max.y:e.min.y,e_.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(e_)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function n_(){let e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function i_(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=i.get(t);if(void 0===a)i.set(t,function(t,i){const r=t.array,a=t.usage,s=r.byteLength,o=e.createBuffer();let l;if(e.bindBuffer(i,o),e.bufferData(i,r,a),t.onUploadCallback(),r instanceof Float32Array)l=e.FLOAT;else if(r instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");l=e.HALF_FLOAT}else l=e.UNSIGNED_SHORT;else if(r instanceof Int16Array)l=e.SHORT;else if(r instanceof Uint32Array)l=e.UNSIGNED_INT;else if(r instanceof Int32Array)l=e.INT;else if(r instanceof Int8Array)l=e.BYTE;else if(r instanceof Uint8Array)l=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);l=e.UNSIGNED_BYTE}return{buffer:o,type:l,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:s}}(t,r));else if(a.version<t.version){if(a.size!==t.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,i,r){const a=i.array,s=i._updateRange,o=i.updateRanges;if(e.bindBuffer(r,t),-1===s.count&&0===o.length&&e.bufferSubData(r,0,a),0!==o.length){for(let t=0,i=o.length;t<i;t++){const i=o[t];n?e.bufferSubData(r,i.start*a.BYTES_PER_ELEMENT,a,i.start,i.count):e.bufferSubData(r,i.start*a.BYTES_PER_ELEMENT,a.subarray(i.start,i.start+i.count))}i.clearUpdateRanges()}-1!==s.count&&(n?e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),i.onUploadCallback()}(a.buffer,t,r),a.version=t.version}}}}class r_ extends vx{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,a=t/2,s=Math.floor(n),o=Math.floor(i),l=s+1,c=o+1,u=e/s,d=t/o,h=[],f=[],p=[],m=[];for(let g=0;g<c;g++){const e=g*d-a;for(let t=0;t<l;t++){const n=t*u-r;f.push(n,-e,0),p.push(0,0,1),m.push(t/s),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<s;e++){const t=e+l*g,n=e+l*(g+1),i=e+1+l*(g+1),r=e+1+l*g;h.push(t,n,r),h.push(n,i,r)}this.setIndex(h),this.setAttribute("position",new cx(f,3)),this.setAttribute("normal",new cx(p,3)),this.setAttribute("uv",new cx(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r_(e.width,e.height,e.widthSegments,e.heightSegments)}}const a_={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor *= toneMappingExposure;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\treturn color;\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},s_={common:{diffuse:{value:new Jv(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new lg},alphaMap:{value:null},alphaMapTransform:{value:new lg},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new lg}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new lg}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new lg}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new lg},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new lg},normalScale:{value:new og(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new lg},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new lg}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new lg}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new lg}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Jv(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Jv(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new lg},alphaTest:{value:0},uvTransform:{value:new lg}},sprite:{diffuse:{value:new Jv(16777215)},opacity:{value:1},center:{value:new og(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new lg},alphaMap:{value:null},alphaMapTransform:{value:new lg},alphaTest:{value:0}}},o_={basic:{uniforms:Fx([s_.common,s_.specularmap,s_.envmap,s_.aomap,s_.lightmap,s_.fog]),vertexShader:a_.meshbasic_vert,fragmentShader:a_.meshbasic_frag},lambert:{uniforms:Fx([s_.common,s_.specularmap,s_.envmap,s_.aomap,s_.lightmap,s_.emissivemap,s_.bumpmap,s_.normalmap,s_.displacementmap,s_.fog,s_.lights,{emissive:{value:new Jv(0)}}]),vertexShader:a_.meshlambert_vert,fragmentShader:a_.meshlambert_frag},phong:{uniforms:Fx([s_.common,s_.specularmap,s_.envmap,s_.aomap,s_.lightmap,s_.emissivemap,s_.bumpmap,s_.normalmap,s_.displacementmap,s_.fog,s_.lights,{emissive:{value:new Jv(0)},specular:{value:new Jv(1118481)},shininess:{value:30}}]),vertexShader:a_.meshphong_vert,fragmentShader:a_.meshphong_frag},standard:{uniforms:Fx([s_.common,s_.envmap,s_.aomap,s_.lightmap,s_.emissivemap,s_.bumpmap,s_.normalmap,s_.displacementmap,s_.roughnessmap,s_.metalnessmap,s_.fog,s_.lights,{emissive:{value:new Jv(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:a_.meshphysical_vert,fragmentShader:a_.meshphysical_frag},toon:{uniforms:Fx([s_.common,s_.aomap,s_.lightmap,s_.emissivemap,s_.bumpmap,s_.normalmap,s_.displacementmap,s_.gradientmap,s_.fog,s_.lights,{emissive:{value:new Jv(0)}}]),vertexShader:a_.meshtoon_vert,fragmentShader:a_.meshtoon_frag},matcap:{uniforms:Fx([s_.common,s_.bumpmap,s_.normalmap,s_.displacementmap,s_.fog,{matcap:{value:null}}]),vertexShader:a_.meshmatcap_vert,fragmentShader:a_.meshmatcap_frag},points:{uniforms:Fx([s_.points,s_.fog]),vertexShader:a_.points_vert,fragmentShader:a_.points_frag},dashed:{uniforms:Fx([s_.common,s_.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:a_.linedashed_vert,fragmentShader:a_.linedashed_frag},depth:{uniforms:Fx([s_.common,s_.displacementmap]),vertexShader:a_.depth_vert,fragmentShader:a_.depth_frag},normal:{uniforms:Fx([s_.common,s_.bumpmap,s_.normalmap,s_.displacementmap,{opacity:{value:1}}]),vertexShader:a_.meshnormal_vert,fragmentShader:a_.meshnormal_frag},sprite:{uniforms:Fx([s_.sprite,s_.fog]),vertexShader:a_.sprite_vert,fragmentShader:a_.sprite_frag},background:{uniforms:{uvTransform:{value:new lg},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:a_.background_vert,fragmentShader:a_.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:a_.backgroundCube_vert,fragmentShader:a_.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:a_.cube_vert,fragmentShader:a_.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:a_.equirect_vert,fragmentShader:a_.equirect_frag},distanceRGBA:{uniforms:Fx([s_.common,s_.displacementmap,{referencePosition:{value:new Ig},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:a_.distanceRGBA_vert,fragmentShader:a_.distanceRGBA_frag},shadow:{uniforms:Fx([s_.lights,s_.fog,{color:{value:new Jv(0)},opacity:{value:1}}]),vertexShader:a_.shadow_vert,fragmentShader:a_.shadow_frag}};o_.physical={uniforms:Fx([o_.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new lg},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new lg},clearcoatNormalScale:{value:new og(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new lg},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new lg},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new lg},sheen:{value:0},sheenColor:{value:new Jv(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new lg},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new lg},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new lg},transmissionSamplerSize:{value:new og},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new lg},attenuationDistance:{value:0},attenuationColor:{value:new Jv(0)},specularColor:{value:new Jv(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new lg},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new lg},anisotropyVector:{value:new og},anisotropyMap:{value:null},anisotropyMapTransform:{value:new lg}}]),vertexShader:a_.meshphysical_vert,fragmentShader:a_.meshphysical_frag};const l_={r:0,b:0,g:0};function c_(e,t,n,i,r,a,s){const o=new Jv(0);let l,c,u=!0===a?0:1,d=null,h=0,f=null;function p(t,n){t.getRGB(l_,jx(e)),i.buffers.color.setClear(l_.r,l_.g,l_.b,n,s)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),u=t,p(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,p(o,u)},render:function(a,m){let g=!1,v=!0===m.isScene?m.background:null;if(v&&v.isTexture){v=(m.backgroundBlurriness>0?n:t).get(v)}null===v?p(o,u):v&&v.isColor&&(p(v,1),g=!0);const x=e.xr.getEnvironmentBlendMode();"additive"===x?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===x&&i.buffers.color.setClear(0,0,0,0,s),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===nm)?(void 0===c&&(c=new Ix(new Ox(1,1,1),new Hx({name:"BackgroundCubeMaterial",uniforms:zx(o_.backgroundCube.uniforms),vertexShader:o_.backgroundCube.vertexShader,fragmentShader:o_.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=_g.getTransfer(v.colorSpace)!==Um,d===v&&h===v.version&&f===e.toneMapping||(c.material.needsUpdate=!0,d=v,h=v.version,f=e.toneMapping),c.layers.enableAll(),a.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new Ix(new r_(2,2),new Hx({name:"BackgroundMaterial",uniforms:zx(o_.background.uniforms),vertexShader:o_.background.vertexShader,fragmentShader:o_.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=_g.getTransfer(v.colorSpace)!==Um,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),d===v&&h===v.version&&f===e.toneMapping||(l.material.needsUpdate=!0,d=v,h=v.version,f=e.toneMapping),l.layers.enableAll(),a.unshift(l,l.geometry,l.material,0,0,null))}}}function u_(e,t,n,i){const r=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||null!==a,o={},l=f(null);let c=l,u=!1;function d(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){const t=[],n=[],i=[];for(let a=0;a<r;a++)t[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,r){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;if(a[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),o[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function x(t,n,i,r,a,s,o){!0===o?e.vertexAttribIPointer(t,n,i,a,s):e.vertexAttribPointer(t,n,i,r,a,s)}function _(){y(),u=!0,c!==l&&(c=l,d(c.object))}function y(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,h,_,y){let b=!1;if(s){const t=function(t,n,r){const s=!0===r.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[s];void 0===u&&(u=f(i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[s]=u);return u}(_,h,l);c!==t&&(c=t,d(c.object)),b=function(e,t,n,i){const r=c.attributes,a=t.attributes;let s=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){const t=r[l];let n=a[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return c.attributesNum!==s||c.index!==i}(r,_,h,y),b&&function(e,t,n,i){const r={},a=t.attributes;let s=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){let t=a[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),r[l]=n,s++}}c.attributes=r,c.attributesNum=s,c.index=i}(r,_,h,y)}else{const e=!0===l.wireframe;c.geometry===_.id&&c.program===h.id&&c.wireframe===e||(c.geometry=_.id,c.program=h.id,c.wireframe=e,b=!0)}null!==y&&n.update(y,e.ELEMENT_ARRAY_BUFFER),(b||u)&&(u=!1,function(r,a,s,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=o.attributes,c=s.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const a=c[t];if(a.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const t=s.normalized,l=s.itemSize,c=n.get(s);if(void 0===c)continue;const u=c.buffer,d=c.type,h=c.bytesPerElement,f=!0===i.isWebGL2&&(d===e.INT||d===e.UNSIGNED_INT||s.gpuType===pm);if(s.isInterleavedBufferAttribute){const n=s.data,i=n.stride,c=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<a.locationSize;e++)g(a.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<a.locationSize;e++)m(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<a.locationSize;e++)x(a.location+e,l/a.locationSize,d,t,i*h,(c+l/a.locationSize*e)*h,f)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<a.locationSize;e++)g(a.location+e,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<a.locationSize;e++)m(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<a.locationSize;e++)x(a.location+e,l/a.locationSize,d,t,l*h,l/a.locationSize*e*h,f)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(a.location,n);break;case 3:e.vertexAttrib3fv(a.location,n);break;case 4:e.vertexAttrib4fv(a.location,n);break;default:e.vertexAttrib1fv(a.location,n)}}}}v()}(r,l,h,_),null!==y&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(y).buffer))},reset:_,resetDefaultState:y,dispose:function(){_();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)h(i[e].object),delete i[e];delete n[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function d_(e,t,n,i){const r=i.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,i){e.drawArrays(a,t,i),n.update(i,a,1)},this.renderInstances=function(i,s,o){if(0===o)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return;l[c](a,i,s,o),n.update(s,a,o)},this.renderMultiDraw=function(e,i,r){if(0===r)return;const s=t.get("WEBGL_multi_draw");if(null===s)for(let t=0;t<r;t++)this.render(e[t],i[t]);else{s.multiDrawArraysWEBGL(a,e,0,i,0,r);let t=0;for(let e=0;e<r;e++)t+=i[e];n.update(t,a,1)}}}function h_(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let s=void 0!==n.precision?n.precision:"highp";const o=r(s);o!==s&&(s=o);const l=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),x=d>0,_=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:x,floatFragmentTextures:_,floatVertexTextures:x&&_,maxSamples:a?e.getParameter(e.MAX_SAMPLES):0}}function f_(e){const t=this;let n=null,i=0,r=!1,a=!1;const s=new Qx,o=new lg,l={value:null,needsUpdate:!1};function c(e,n,i,r){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==r||null===c){const t=i+4*a,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=i;n!==a;++n,l+=4)s.copy(e[n]).applyMatrix4(r,o),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(s,o,u){const d=s.clippingPlanes,h=s.clipIntersection,f=s.clipShadows,p=e.get(s);if(!r||null===d||0===d.length||a&&!f)a?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=a?0:i,t=4*e;let r=p.clippingState||null;l.value=r,r=c(d,o,t,u);for(let i=0;i!==t;++i)r[i]=n[i];p.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function p_(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=em:304===t&&(e.mapping=tm),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping;if(303===a||304===a){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const a=r.image;if(a&&a.height>0){const s=new Yx(a.height/2);return s.fromEquirectangularTexture(e,r),t.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}class m_ extends Vx{constructor(e=-1,t=1,n=1,i=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,a=n+e,s=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const g_=[.125,.215,.35,.446,.526,.582],v_=20,x_=new m_,__=new Jv;let y_=null,b_=0,S_=0;const M_=(1+Math.sqrt(5))/2,w_=1/M_,E_=[new Ig(1,1,1),new Ig(-1,1,1),new Ig(1,1,-1),new Ig(-1,1,-1),new Ig(0,M_,w_),new Ig(0,M_,-w_),new Ig(w_,0,M_),new Ig(-w_,0,M_),new Ig(M_,w_,0),new Ig(-M_,w_,0)];class T_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){y_=this._renderer.getRenderTarget(),b_=this._renderer.getActiveCubeFace(),S_=this._renderer.getActiveMipmapLevel(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=R_(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=N_(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(y_,b_,S_),e.scissorTest=!1,C_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===em||e.mapping===tm?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),y_=this._renderer.getRenderTarget(),b_=this._renderer.getActiveCubeFace(),S_=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:cm,minFilter:cm,generateMipmaps:!1,type:vm,format:_m,colorSpace:Rm,depthBuffer:!1},i=A_(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=A_(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const a=e-4+1+g_.length;for(let s=0;s<a;s++){const a=Math.pow(2,r);n.push(a);let o=1/a;s>e-4?o=g_[s-e+4-1]:0===s&&(o=0),i.push(o);const l=1/(a-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*h),x=new Float32Array(m*f*h),_=new Float32Array(g*f*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(i,p*f*e),x.set(d,m*f*e);const r=[e,e,e,e,e,e];_.set(r,g*f*e)}const y=new vx;y.setAttribute("position",new sx(v,p)),y.setAttribute("uv",new sx(x,m)),y.setAttribute("faceIndex",new sx(_,g)),t.push(y),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(v_),r=new Ig(0,1,0),a=new Hx({name:"SphericalGaussianBlur",defines:{n:v_,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:L_(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return a}(i,e,t)}return i}_compileMaterial(e){const t=new Ix(this._lodPlanes[0],e);this._renderer.compile(t,x_)}_sceneToCubeUV(e,t,n,i){const r=new Gx(90,1,t,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(__),o.toneMapping=0,o.autoClear=!1;const u=new ix({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new Ix(new Ox,u);let h=!1;const f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,h=!0):(u.color.copy(__),h=!0);for(let p=0;p<6;p++){const t=p%3;0===t?(r.up.set(0,a[p],0),r.lookAt(s[p],0,0)):1===t?(r.up.set(0,0,a[p]),r.lookAt(0,s[p],0)):(r.up.set(0,a[p],0),r.lookAt(0,0,s[p]));const n=this._cubeSize;C_(i,t*n,p>2?n:0,n,n),o.setRenderTarget(i),h&&o.render(d,r),o.render(e,r)}d.geometry.dispose(),d.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===em||e.mapping===tm;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=R_()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=N_());const r=i?this._cubemapMaterial:this._equirectMaterial,a=new Ix(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const s=this._cubeSize;C_(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,x_)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=E_[(i-1)%E_.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,a,s){const o=this._renderer,l=this._blurMaterial,c=new Ix(this._lodPlanes[i],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(r)?Math.PI/(2*d):2*Math.PI/39,f=r/h,p=isFinite(r)?1+Math.floor(3*f):v_,m=[];let g=0;for(let _=0;_<v_;++_){const e=_/f,t=Math.exp(-e*e/2);m.push(t),0===_?g+=t:_<p&&(g+=2*t)}for(let _=0;_<m.length;_++)m[_]=m[_]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===a,s&&(u.poleAxis.value=s);const{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;const x=this._sizeLods[i];C_(t,3*x*(i>v-4?i-v+4:0),4*(this._cubeSize-x),3*x,2*x),o.setRenderTarget(t),o.render(c,x_)}}function A_(e,t,n){const i=new Lg(e,t,n);return i.texture.mapping=nm,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function C_(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function N_(){return new Hx({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:L_(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function R_(){return new Hx({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:L_(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function L_(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function P_(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping,s=303===a||304===a,o=a===em||a===tm;if(s||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=t.get(r);return null===n&&(n=new T_(e)),i=s?n.fromEquirectangular(r,i):n.fromCubemap(r,i),t.set(r,i),i.texture}if(t.has(r))return t.get(r).texture;{const a=r.image;if(s&&a&&a.height>0||o&&a&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(a)){null===n&&(n=new T_(e));const a=s?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,a),r.addEventListener("dispose",i),a.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function k_(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return t}}}function U_(e,t,n,i){const r={},a=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);for(const n in o.morphAttributes){const e=o.morphAttributes[n];for(let n=0,i=e.length;n<i;n++)t.remove(e[n])}o.removeEventListener("dispose",s),delete r[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],i=e.index,r=e.attributes.position;let s=0;if(null!==i){const e=i.array;s=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],a=e[t+2];n.push(i,r,r,a,a,i)}}else{if(void 0===r)return;{const e=r.array;s=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const o=new(ug(n)?lx:ox)(n,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const a in i)t.update(i[a],e.ARRAY_BUFFER);const r=n.morphAttributes;for(const a in r){const n=r[a];for(let i=0,r=n.length;i<r;i++)t.update(n[i],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return a.get(e)}}}function I_(e,t,n,i){const r=i.isWebGL2;let a,s,o;this.setMode=function(e){a=e},this.setIndex=function(e){s=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(a,i,s,t*o),n.update(i,a,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,d;if(r)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return;u[d](a,l,s,i*o,c),n.update(l,a,c)},this.renderMultiDraw=function(e,i,r){if(0===r)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<r;t++)this.render(e[t]/o,i[t]);else{l.multiDrawElementsWEBGL(a,i,0,s,e,0,r);let t=0;for(let e=0;e<r;e++)t+=i[e];n.update(t,a,1)}}}function D_(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n}}}}function O_(e,t){return e[0]-t[0]}function z_(e,t){return Math.abs(t[1])-Math.abs(e[1])}function F_(e,t,n){const i={},r=new Float32Array(8),a=new WeakMap,s=new Ng,o=[];for(let l=0;l<8;l++)o[l]=[l,0];return{update:function(l,c,u){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const i=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,r=void 0!==i?i.length:0;let o=a.get(c);if(void 0===o||o.count!==r){let e=function(){v.dispose(),a.delete(c),c.removeEventListener("dispose",e)};void 0!==o&&o.texture.dispose();const n=void 0!==c.morphAttributes.position,i=void 0!==c.morphAttributes.normal,l=void 0!==c.morphAttributes.color,u=c.morphAttributes.position||[],d=c.morphAttributes.normal||[],h=c.morphAttributes.color||[];let f=0;!0===n&&(f=1),!0===i&&(f=2),!0===l&&(f=3);let p=c.attributes.position.count*f,m=1;p>t.maxTextureSize&&(m=Math.ceil(p/t.maxTextureSize),p=t.maxTextureSize);const g=new Float32Array(p*m*4*r),v=new Pg(g,p,m,r);v.type=gm,v.needsUpdate=!0;const x=4*f;for(let t=0;t<r;t++){const e=u[t],r=d[t],a=h[t],o=p*m*4*t;for(let t=0;t<e.count;t++){const c=t*x;!0===n&&(s.fromBufferAttribute(e,t),g[o+c+0]=s.x,g[o+c+1]=s.y,g[o+c+2]=s.z,g[o+c+3]=0),!0===i&&(s.fromBufferAttribute(r,t),g[o+c+4]=s.x,g[o+c+5]=s.y,g[o+c+6]=s.z,g[o+c+7]=0),!0===l&&(s.fromBufferAttribute(a,t),g[o+c+8]=s.x,g[o+c+9]=s.y,g[o+c+10]=s.z,g[o+c+11]=4===a.itemSize?s.w:1)}}o={count:r,texture:v,size:new og(p,m)},a.set(c,o),c.addEventListener("dispose",e)}let l=0;for(let e=0;e<d.length;e++)l+=d[e];const h=c.morphTargetsRelative?1:1-l;u.getUniforms().setValue(e,"morphTargetBaseInfluence",h),u.getUniforms().setValue(e,"morphTargetInfluences",d),u.getUniforms().setValue(e,"morphTargetsTexture",o.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",o.size)}else{const t=void 0===d?0:d.length;let n=i[c.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];i[c.id]=n}for(let e=0;e<t;e++){const t=n[e];t[0]=e,t[1]=d[e]}n.sort(z_);for(let e=0;e<8;e++)e<t&&n[e][1]?(o[e][0]=n[e][0],o[e][1]=n[e][1]):(o[e][0]=Number.MAX_SAFE_INTEGER,o[e][1]=0);o.sort(O_);const a=c.morphAttributes.position,s=c.morphAttributes.normal;let l=0;for(let e=0;e<8;e++){const t=o[e],n=t[0],i=t[1];n!==Number.MAX_SAFE_INTEGER&&i?(a&&c.getAttribute("morphTarget"+e)!==a[n]&&c.setAttribute("morphTarget"+e,a[n]),s&&c.getAttribute("morphNormal"+e)!==s[n]&&c.setAttribute("morphNormal"+e,s[n]),r[e]=i,l+=i):(a&&!0===c.hasAttribute("morphTarget"+e)&&c.deleteAttribute("morphTarget"+e),s&&!0===c.hasAttribute("morphNormal"+e)&&c.deleteAttribute("morphNormal"+e),r[e]=0)}const h=c.morphTargetsRelative?1:1-l;u.getUniforms().setValue(e,"morphTargetBaseInfluence",h),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function j_(e,t,n,i){let r=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){const o=i.render.frame,l=s.geometry,c=t.get(s,l);if(r.get(c)!==o&&(t.update(c),r.set(c,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),r.get(s)!==o&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),r.set(s,o))),s.isSkinnedMesh){const e=s.skeleton;r.get(e)!==o&&(e.update(),r.set(e,o))}return c},dispose:function(){r=new WeakMap}}}class B_ extends Cg{constructor(e,t,n,i,r,a,s,o,l,c){if((c=void 0!==c?c:ym)!==ym&&c!==bm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===ym&&(n=mm),void 0===n&&c===bm&&(n=xm),super(null,i,r,a,s,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:sm,this.minFilter=void 0!==o?o:sm,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const H_=new Cg,V_=new B_(1,1);V_.compareFunction=515;const G_=new Pg,W_=new kg,X_=new qx,q_=[],Y_=[],$_=new Float32Array(16),K_=new Float32Array(9),Z_=new Float32Array(4);function Q_(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let a=q_[r];if(void 0===a&&(a=new Float32Array(r),q_[r]=a),0!==t){i.toArray(a,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(a,r)}return a}function J_(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function ey(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function ty(e,t){let n=Y_[t];void 0===n&&(n=new Int32Array(t),Y_[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function ny(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function iy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(J_(n,t))return;e.uniform2fv(this.addr,t),ey(n,t)}}function ry(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(J_(n,t))return;e.uniform3fv(this.addr,t),ey(n,t)}}function ay(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(J_(n,t))return;e.uniform4fv(this.addr,t),ey(n,t)}}function sy(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(J_(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ey(n,t)}else{if(J_(n,i))return;Z_.set(i),e.uniformMatrix2fv(this.addr,!1,Z_),ey(n,i)}}function oy(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(J_(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ey(n,t)}else{if(J_(n,i))return;K_.set(i),e.uniformMatrix3fv(this.addr,!1,K_),ey(n,i)}}function ly(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(J_(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ey(n,t)}else{if(J_(n,i))return;$_.set(i),e.uniformMatrix4fv(this.addr,!1,$_),ey(n,i)}}function cy(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function uy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(J_(n,t))return;e.uniform2iv(this.addr,t),ey(n,t)}}function dy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(J_(n,t))return;e.uniform3iv(this.addr,t),ey(n,t)}}function hy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(J_(n,t))return;e.uniform4iv(this.addr,t),ey(n,t)}}function fy(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function py(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(J_(n,t))return;e.uniform2uiv(this.addr,t),ey(n,t)}}function my(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(J_(n,t))return;e.uniform3uiv(this.addr,t),ey(n,t)}}function gy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(J_(n,t))return;e.uniform4uiv(this.addr,t),ey(n,t)}}function vy(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r);const a=this.type===e.SAMPLER_2D_SHADOW?V_:H_;n.setTexture2D(t||a,r)}function xy(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||W_,r)}function _y(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||X_,r)}function yy(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||G_,r)}function by(e,t){e.uniform1fv(this.addr,t)}function Sy(e,t){const n=Q_(t,this.size,2);e.uniform2fv(this.addr,n)}function My(e,t){const n=Q_(t,this.size,3);e.uniform3fv(this.addr,n)}function wy(e,t){const n=Q_(t,this.size,4);e.uniform4fv(this.addr,n)}function Ey(e,t){const n=Q_(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Ty(e,t){const n=Q_(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ay(e,t){const n=Q_(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Cy(e,t){e.uniform1iv(this.addr,t)}function Ny(e,t){e.uniform2iv(this.addr,t)}function Ry(e,t){e.uniform3iv(this.addr,t)}function Ly(e,t){e.uniform4iv(this.addr,t)}function Py(e,t){e.uniform1uiv(this.addr,t)}function ky(e,t){e.uniform2uiv(this.addr,t)}function Uy(e,t){e.uniform3uiv(this.addr,t)}function Iy(e,t){e.uniform4uiv(this.addr,t)}function Dy(e,t,n){const i=this.cache,r=t.length,a=ty(n,r);J_(i,a)||(e.uniform1iv(this.addr,a),ey(i,a));for(let s=0;s!==r;++s)n.setTexture2D(t[s]||H_,a[s])}function Oy(e,t,n){const i=this.cache,r=t.length,a=ty(n,r);J_(i,a)||(e.uniform1iv(this.addr,a),ey(i,a));for(let s=0;s!==r;++s)n.setTexture3D(t[s]||W_,a[s])}function zy(e,t,n){const i=this.cache,r=t.length,a=ty(n,r);J_(i,a)||(e.uniform1iv(this.addr,a),ey(i,a));for(let s=0;s!==r;++s)n.setTextureCube(t[s]||X_,a[s])}function Fy(e,t,n){const i=this.cache,r=t.length,a=ty(n,r);J_(i,a)||(e.uniform1iv(this.addr,a),ey(i,a));for(let s=0;s!==r;++s)n.setTexture2DArray(t[s]||G_,a[s])}class jy{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return ny;case 35664:return iy;case 35665:return ry;case 35666:return ay;case 35674:return sy;case 35675:return oy;case 35676:return ly;case 5124:case 35670:return cy;case 35667:case 35671:return uy;case 35668:case 35672:return dy;case 35669:case 35673:return hy;case 5125:return fy;case 36294:return py;case 36295:return my;case 36296:return gy;case 35678:case 36198:case 36298:case 36306:case 35682:return vy;case 35679:case 36299:case 36307:return xy;case 35680:case 36300:case 36308:case 36293:return _y;case 36289:case 36303:case 36311:case 36292:return yy}}(t.type)}}class By{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return by;case 35664:return Sy;case 35665:return My;case 35666:return wy;case 35674:return Ey;case 35675:return Ty;case 35676:return Ay;case 5124:case 35670:return Cy;case 35667:case 35671:return Ny;case 35668:case 35672:return Ry;case 35669:case 35673:return Ly;case 5125:return Py;case 36294:return ky;case 36295:return Uy;case 36296:return Iy;case 35678:case 36198:case 36298:case 36306:case 35682:return Dy;case 35679:case 36299:case 36307:return Oy;case 35680:case 36300:case 36308:case 36293:return zy;case 36289:case 36303:case 36311:case 36292:return Fy}}(t.type)}}class Hy{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(e,t[a.id],n)}}}const Vy=/(\w+)(\])?(\[|\.)?/g;function Gy(e,t){e.seq.push(t),e.map[t.id]=t}function Wy(e,t,n){const i=e.name,r=i.length;for(Vy.lastIndex=0;;){const a=Vy.exec(i),s=Vy.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===r){Gy(n,void 0===c?new jy(o,e,t):new By(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new Hy(o),Gy(n,e)),n=e}}}class Xy{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);Wy(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const a=t[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function qy(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let Yy=0;function $y(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const i=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let s=r;s<a;s++){const e=s+1;i.push(`${e===t?">":" "} ${e}: ${n[s]}`)}return i.join("\n")}(e.getShaderSource(t),i)}return r}function Ky(e,t){const n=function(e){const t=_g.getPrimaries(_g.workingColorSpace),n=_g.getPrimaries(e);let i;switch(t===n?i="":t===Dm&&n===Im?i="LinearDisplayP3ToLinearSRGB":t===Im&&n===Dm&&(i="LinearSRGBToLinearDisplayP3"),e){case Rm:case Pm:return[i,"LinearTransferOETF"];case Nm:case Lm:return[i,"sRGBTransferOETF"];default:return[i,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Zy(e,t){let n;switch(t){case 1:default:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 6:n="AgX";break;case 5:n="Custom"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Qy(e){return""!==e}function Jy(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function eb(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const tb=/^[ \t]*#include +<([\w\d./]+)>/gm;function nb(e){return e.replace(tb,rb)}const ib=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function rb(e,t){let n=a_[t];if(void 0===n){const e=ib.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=a_[e]}return nb(n)}const ab=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function sb(e){return e.replace(ab,ob)}function ob(e,t,n,i){let r="";for(let a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function lb(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function cb(e,t,n,i){const r=e.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case em:case tm:t="ENVMAP_TYPE_CUBE";break;case nm:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===tm&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),f=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qy).join("\n")}(n),p=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Qy).join("\n")}(n),m=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(a),g=r.createProgram();let v,x,_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Qy).join("\n"),v.length>0&&(v+="\n"),x=[f,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Qy).join("\n"),x.length>0&&(x+="\n")):(v=[lb(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qy).join("\n"),x=[f,lb(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?a_.tonemapping_pars_fragment:"",0!==n.toneMapping?Zy("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",a_.colorspace_pars_fragment,Ky("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Qy).join("\n")),s=nb(s),s=Jy(s,n),s=eb(s,n),o=nb(o),o=Jy(o,n),o=eb(o,n),s=sb(s),o=sb(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",v=[p,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,x=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===Xm?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Xm?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const y=_+v+s,b=_+x+o,S=qy(r,r.VERTEX_SHADER,y),M=qy(r,r.FRAGMENT_SHADER,b);function w(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(g).trim(),i=r.getShaderInfoLog(S).trim(),a=r.getShaderInfoLog(M).trim();let s=!0,o=!0;if(!1===r.getProgramParameter(g,r.LINK_STATUS))if(s=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(r,g,S,M);else{$y(r,S,"vertex"),$y(r,M,"fragment")}else""!==n||""!==i&&""!==a||(o=!1);o&&(t.diagnostics={runnable:s,programLog:n,vertexShader:{log:i,prefix:v},fragmentShader:{log:a,prefix:x}})}r.deleteShader(S),r.deleteShader(M),E=new Xy(r,g),T=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),a=i.name;let s=1;i.type===e.FLOAT_MAT2&&(s=2),i.type===e.FLOAT_MAT3&&(s=3),i.type===e.FLOAT_MAT4&&(s=4),n[a]={type:i.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}(r,g)}let E,T;r.attachShader(g,S),r.attachShader(g,M),void 0!==n.index0AttributeName?r.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),this.getUniforms=function(){return void 0===E&&w(this),E},this.getAttributes=function(){return void 0===T&&w(this),T};let A=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===A&&(A=r.getProgramParameter(g,37297)),A},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Yy++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=S,this.fragmentShader=M,this}let ub=0;class db{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new hb(e),t.set(e,n)),n}}class hb{constructor(e){this.id=ub++,this.code=e,this.usedTimes=0}}function fb(e,t,n,i,r,a,s){const o=new Sv,l=new db,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return 0===e?"uv":`uv${e}`}return{getParameters:function(a,o,c,g,v){const x=g.fog,_=v.geometry,y=a.isMeshStandardMaterial?g.environment:null,b=(a.isMeshStandardMaterial?n:t).get(a.envMap||y),S=b&&b.mapping===nm?b.image.height:null,M=p[a.type];null!==a.precision&&(f=r.getMaxPrecision(a.precision),a.precision);const w=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,E=void 0!==w?w.length:0;let T,A,C,N,R=0;if(void 0!==_.morphAttributes.position&&(R=1),void 0!==_.morphAttributes.normal&&(R=2),void 0!==_.morphAttributes.color&&(R=3),M){const e=o_[M];T=e.vertexShader,A=e.fragmentShader}else T=a.vertexShader,A=a.fragmentShader,l.update(a),C=l.getVertexShaderID(a),N=l.getFragmentShaderID(a);const L=e.getRenderTarget(),P=!0===v.isInstancedMesh,k=!0===v.isBatchedMesh,U=!!a.map,I=!!a.matcap,D=!!b,O=!!a.aoMap,z=!!a.lightMap,F=!!a.bumpMap,j=!!a.normalMap,B=!!a.displacementMap,H=!!a.emissiveMap,V=!!a.metalnessMap,G=!!a.roughnessMap,W=a.anisotropy>0,X=a.clearcoat>0,q=a.iridescence>0,Y=a.sheen>0,$=a.transmission>0,K=W&&!!a.anisotropyMap,Z=X&&!!a.clearcoatMap,Q=X&&!!a.clearcoatNormalMap,J=X&&!!a.clearcoatRoughnessMap,ee=q&&!!a.iridescenceMap,te=q&&!!a.iridescenceThicknessMap,ne=Y&&!!a.sheenColorMap,ie=Y&&!!a.sheenRoughnessMap,re=!!a.specularMap,ae=!!a.specularColorMap,se=!!a.specularIntensityMap,oe=$&&!!a.transmissionMap,le=$&&!!a.thicknessMap,ce=!!a.gradientMap,ue=!!a.alphaMap,de=a.alphaTest>0,he=!!a.alphaHash,fe=!!a.extensions,pe=!!_.attributes.uv1,me=!!_.attributes.uv2,ge=!!_.attributes.uv3;let ve=0;return a.toneMapped&&(null!==L&&!0!==L.isXRRenderTarget||(ve=e.toneMapping)),{isWebGL2:u,shaderID:M,shaderType:a.type,shaderName:a.name,vertexShader:T,fragmentShader:A,defines:a.defines,customVertexShaderID:C,customFragmentShaderID:N,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:f,batching:k,instancing:P,instancingColor:P&&null!==v.instanceColor,supportsVertexTextures:h,outputColorSpace:null===L?e.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:Rm,map:U,matcap:I,envMap:D,envMapMode:D&&b.mapping,envMapCubeUVHeight:S,aoMap:O,lightMap:z,bumpMap:F,normalMap:j,displacementMap:h&&B,emissiveMap:H,normalMapObjectSpace:j&&1===a.normalMapType,normalMapTangentSpace:j&&0===a.normalMapType,metalnessMap:V,roughnessMap:G,anisotropy:W,anisotropyMap:K,clearcoat:X,clearcoatMap:Z,clearcoatNormalMap:Q,clearcoatRoughnessMap:J,iridescence:q,iridescenceMap:ee,iridescenceThicknessMap:te,sheen:Y,sheenColorMap:ne,sheenRoughnessMap:ie,specularMap:re,specularColorMap:ae,specularIntensityMap:se,transmission:$,transmissionMap:oe,thicknessMap:le,gradientMap:ce,opaque:!1===a.transparent&&1===a.blending,alphaMap:ue,alphaTest:de,alphaHash:he,combine:a.combine,mapUv:U&&m(a.map.channel),aoMapUv:O&&m(a.aoMap.channel),lightMapUv:z&&m(a.lightMap.channel),bumpMapUv:F&&m(a.bumpMap.channel),normalMapUv:j&&m(a.normalMap.channel),displacementMapUv:B&&m(a.displacementMap.channel),emissiveMapUv:H&&m(a.emissiveMap.channel),metalnessMapUv:V&&m(a.metalnessMap.channel),roughnessMapUv:G&&m(a.roughnessMap.channel),anisotropyMapUv:K&&m(a.anisotropyMap.channel),clearcoatMapUv:Z&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:Q&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:J&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:ee&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:te&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:ne&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:ie&&m(a.sheenRoughnessMap.channel),specularMapUv:re&&m(a.specularMap.channel),specularColorMapUv:ae&&m(a.specularColorMap.channel),specularIntensityMapUv:se&&m(a.specularIntensityMap.channel),transmissionMapUv:oe&&m(a.transmissionMap.channel),thicknessMapUv:le&&m(a.thicknessMap.channel),alphaMapUv:ue&&m(a.alphaMap.channel),vertexTangents:!!_.attributes.tangent&&(j||W),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,vertexUv1s:pe,vertexUv2s:me,vertexUv3s:ge,pointsUvs:!0===v.isPoints&&!!_.attributes.uv&&(U||ue),fog:!!x,useFog:!0===a.fog,fogExp2:x&&x.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:E,morphTextureStride:R,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:ve,useLegacyLights:e._useLegacyLights,decodeVideoTexture:U&&!0===a.map.isVideoTexture&&_g.getTransfer(a.map.colorSpace)===Um,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:fe&&!0===a.extensions.derivatives,extensionFragDepth:fe&&!0===a.extensions.fragDepth,extensionDrawBuffers:fe&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:fe&&!0===a.extensions.shaderTextureLOD,extensionClipCullDistance:fe&&a.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0);t.supportsVertexTextures&&o.enable(1);t.instancing&&o.enable(2);t.instancingColor&&o.enable(3);t.matcap&&o.enable(4);t.envMap&&o.enable(5);t.normalMapObjectSpace&&o.enable(6);t.normalMapTangentSpace&&o.enable(7);t.clearcoat&&o.enable(8);t.iridescence&&o.enable(9);t.alphaTest&&o.enable(10);t.vertexColors&&o.enable(11);t.vertexAlphas&&o.enable(12);t.vertexUv1s&&o.enable(13);t.vertexUv2s&&o.enable(14);t.vertexUv3s&&o.enable(15);t.vertexTangents&&o.enable(16);t.anisotropy&&o.enable(17);t.alphaHash&&o.enable(18);t.batching&&o.enable(19);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.skinning&&o.enable(4);t.morphTargets&&o.enable(5);t.morphNormals&&o.enable(6);t.morphColors&&o.enable(7);t.premultipliedAlpha&&o.enable(8);t.shadowMapEnabled&&o.enable(9);t.useLegacyLights&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.transmission&&o.enable(15);t.sheen&&o.enable(16);t.opaque&&o.enable(17);t.pointsUvs&&o.enable(18);t.decodeVideoTexture&&o.enable(19);e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=o_[t];n=Bx.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,r=c.length;e<r;e++){const t=c[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new cb(e,n,t,a),c.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function pb(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function mb(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function gb(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function vb(){const e=[];let t=0;const n=[],i=[],r=[];function a(n,i,r,a,s,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,s,o,l,c){const u=a(e,t,s,o,l,c);s.transmission>0?i.push(u):!0===s.transparent?r.push(u):n.push(u)},unshift:function(e,t,s,o,l,c){const u=a(e,t,s,o,l,c);s.transmission>0?i.unshift(u):!0===s.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||mb),i.length>1&&i.sort(t||gb),r.length>1&&r.sort(t||gb)}}}function xb(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new vb,e.set(t,[r])):n>=i.length?(r=new vb,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function _b(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Ig,color:new Jv};break;case"SpotLight":n={position:new Ig,direction:new Ig,color:new Jv,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ig,color:new Jv,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ig,skyColor:new Jv,groundColor:new Jv};break;case"RectAreaLight":n={color:new Jv,position:new Ig,halfWidth:new Ig,halfHeight:new Ig}}return e[t.id]=n,n}}}let yb=0;function bb(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Sb(e,t){const n=new _b,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new og};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new og,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)r.probe.push(new Ig);const a=new Ig,s=new dv,o=new dv;return{setup:function(a,s){let o=0,l=0,c=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let u=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0,x=0,_=0,y=0;a.sort(bb);const b=!0===s?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],s=t.color,S=t.intensity,M=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=s.r*S*b,l+=s.g*S*b,c+=s.b*S*b;else if(t.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],S);y++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=w,r.directionalShadowMatrix[u]=t.shadow.matrix,m++}r.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(S*b),e.distance=M,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[h]=e;const a=t.shadow;if(t.map&&(r.spotLightMap[x]=t.map,x++,a.updateMatrices(t),t.castShadow&&_++),r.spotLightMatrix[h]=a.matrix,t.castShadow){const e=i.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,r.spotShadow[h]=e,r.spotShadowMap[h]=w,v++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(S),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[d]=n,r.pointShadowMap[d]=w,r.pointShadowMatrix[d]=t.shadow.matrix,g++}r.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(S*b),e.groundColor.copy(t.groundColor).multiplyScalar(S*b),r.hemi[p]=e,p++}}f>0&&(t.isWebGL2?!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=s_.LTC_FLOAT_1,r.rectAreaLTC2=s_.LTC_FLOAT_2):(r.rectAreaLTC1=s_.LTC_HALF_1,r.rectAreaLTC2=s_.LTC_HALF_2):!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=s_.LTC_FLOAT_1,r.rectAreaLTC2=s_.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")&&(r.rectAreaLTC1=s_.LTC_HALF_1,r.rectAreaLTC2=s_.LTC_HALF_2)),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const S=r.hash;S.directionalLength===u&&S.pointLength===d&&S.spotLength===h&&S.rectAreaLength===f&&S.hemiLength===p&&S.numDirectionalShadows===m&&S.numPointShadows===g&&S.numSpotShadows===v&&S.numSpotMaps===x&&S.numLightProbes===y||(r.directional.length=u,r.spot.length=h,r.rectArea.length=f,r.point.length=d,r.hemi.length=p,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=v+x-_,r.spotLightMap.length=x,r.numSpotLightShadowsWithMaps=_,r.numLightProbes=y,S.directionalLength=u,S.pointLength=d,S.spotLength=h,S.rectAreaLength=f,S.hemiLength=p,S.numDirectionalShadows=m,S.numPointShadows=g,S.numSpotShadows=v,S.numSpotMaps=x,S.numLightProbes=y,r.version=yb++)},setupView:function(e,t){let n=0,i=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let h=0,f=e.length;h<f;h++){const t=e[h];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),o.identity(),s.copy(t.matrixWorld),s.premultiply(d),o.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(t.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),i++}else if(t.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}},state:r}}function Mb(e,t){const n=new Sb(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function wb(e,t){let n=new WeakMap;return{get:function(i,r=0){const a=n.get(i);let s;return void 0===a?(s=new Mb(e,t),n.set(i,[s])):r>=a.length?(s=new Mb(e,t),a.push(s)):s=a[r],s},dispose:function(){n=new WeakMap}}}class Eb extends nx{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Tb extends nx{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Ab(e,t,n){let i=new t_;const r=new og,a=new og,s=new Ng,o=new Eb({depthPacking:3201}),l=new Tb,c={},u=n.maxTextureSize,d={[kp]:1,[Up]:0,[Ip]:2},h=new Hx({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new og},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new vx;p.setAttribute("position",new sx(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Ix(p,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let v=this.type;function x(n,i){const a=t.update(m);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Lg(r.x,r.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,a,h,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,a,f,m,null)}function _(t,n,i,r){let a=null;const s=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)a=s;else if(a=!0===i.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=a.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=a.clone(),i[t]=r,n.addEventListener("dispose",b)),a=r}if(a.visible=n.visible,a.wireframe=n.wireframe,a.side=3===r?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===i.isPointLight&&!0===a.isMeshDistanceMaterial){e.properties.get(a).light=i}return a}function y(n,r,a,s,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const i=t.update(n),l=n.material;if(Array.isArray(l)){const t=i.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],d=l[u.materialIndex];if(d&&d.visible){const t=_(n,d,s,o);n.onBeforeShadow(e,n,r,a,i,t,u),e.renderBufferDirect(a,null,i,t,n,u),n.onAfterShadow(e,n,r,a,i,t,u)}}}else if(l.visible){const t=_(n,l,s,o);n.onBeforeShadow(e,n,r,a,i,t,null),e.renderBufferDirect(a,null,i,t,n,null),n.onAfterShadow(e,n,r,a,i,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)y(l[e],r,a,s,o)}function b(e){e.target.removeEventListener("dispose",b);for(const t in c){const n=c[t],i=e.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const f=3!==v&&3===this.type,p=3===v&&3!==this.type;for(let m=0,g=t.length;m<g;m++){const l=t[m],c=l.shadow;if(void 0===c)continue;if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const d=c.getFrameExtents();if(r.multiply(d),a.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(a.x=Math.floor(u/d.x),r.x=a.x*d.x,c.mapSize.x=a.x),r.y>u&&(a.y=Math.floor(u/d.y),r.y=a.y*d.y,c.mapSize.y=a.y)),null===c.map||!0===f||!0===p){const e=3!==this.type?{minFilter:sm,magFilter:sm}:{};null!==c.map&&c.map.dispose(),c.map=new Lg(r.x,r.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),h.viewport(s),c.updateMatrices(l,e),i=c.getFrustum(),y(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&3===this.type&&x(c,o),c.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function Cb(e,t,n){const i=n.isWebGL2;const r=new function(){let t=!1;const n=new Ng;let i=null;const r=new Ng(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,s,o){!0===o&&(t*=s,i*=s,a*=s),n.set(t,i,a,s),!1===r.equals(n)&&(e.clearColor(t,i,a,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(t){t?H(e.DEPTH_TEST):V(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},s=new function(){let t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):V(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&a===s||(e.stencilFunc(t,n,s),i=t,r=n,a=s)},setOp:function(t,n,i){s===t&&o===n&&l===i||(e.stencilOp(t,n,i),s=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null}}},o=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,h=[],f=null,p=!1,m=null,g=null,v=null,x=null,_=null,y=null,b=null,S=new Jv(0,0,0),M=0,w=!1,E=null,T=null,A=null,C=null,N=null;const R=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,P=0;const k=e.getParameter(e.VERSION);-1!==k.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(k)[1]),L=P>=1):-1!==k.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),L=P>=2);let U=null,I={};const D=e.getParameter(e.SCISSOR_BOX),O=e.getParameter(e.VIEWPORT),z=(new Ng).fromArray(D),F=(new Ng).fromArray(O);function j(t,n,r,a){const s=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let l=0;l<r;l++)!i||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+l,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage3D(n,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,s);return o}const B={};function H(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function V(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}B[e.TEXTURE_2D]=j(e.TEXTURE_2D,e.TEXTURE_2D,1),B[e.TEXTURE_CUBE_MAP]=j(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(B[e.TEXTURE_2D_ARRAY]=j(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),B[e.TEXTURE_3D]=j(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),r.setClear(0,0,0,1),a.setClear(1),s.setClear(0),H(e.DEPTH_TEST),a.setFunc(3),q(!1),Y(1),H(e.CULL_FACE),X(0);const G={[Dp]:e.FUNC_ADD,[Op]:e.FUNC_SUBTRACT,[zp]:e.FUNC_REVERSE_SUBTRACT};if(i)G[103]=e.MIN,G[104]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(G[103]=e.MIN_EXT,G[104]=e.MAX_EXT)}const W={[Fp]:e.ZERO,[jp]:e.ONE,[Bp]:e.SRC_COLOR,[Vp]:e.SRC_ALPHA,[$p]:e.SRC_ALPHA_SATURATE,[qp]:e.DST_COLOR,[Wp]:e.DST_ALPHA,[Hp]:e.ONE_MINUS_SRC_COLOR,[Gp]:e.ONE_MINUS_SRC_ALPHA,[Yp]:e.ONE_MINUS_DST_COLOR,[Xp]:e.ONE_MINUS_DST_ALPHA,[Kp]:e.CONSTANT_COLOR,[Zp]:e.ONE_MINUS_CONSTANT_COLOR,[Qp]:e.CONSTANT_ALPHA,[Jp]:e.ONE_MINUS_CONSTANT_ALPHA};function X(t,n,i,r,a,s,o,l,c,u){if(0!==t){if(!1===p&&(H(e.BLEND),p=!0),5===t)a=a||n,s=s||i,o=o||r,n===g&&a===_||(e.blendEquationSeparate(G[n],G[a]),g=n,_=a),i===v&&r===x&&s===y&&o===b||(e.blendFuncSeparate(W[i],W[r],W[s],W[o]),v=i,x=r,y=s,b=o),!1!==l.equals(S)&&c===M||(e.blendColor(l.r,l.g,l.b,c),S.copy(l),M=c),m=t,w=!1;else if(t!==m||u!==w){if(g===Dp&&_===Dp||(e.blendEquation(e.FUNC_ADD),g=Dp,_=Dp),u)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR)}v=null,x=null,y=null,b=null,S.set(0,0,0),M=0,m=t,w=u}}else!0===p&&(V(e.BLEND),p=!1)}function q(t){E!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),E=t)}function Y(t){0!==t?(H(e.CULL_FACE),t!==T&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):V(e.CULL_FACE),T=t}function $(t,n,i){t?(H(e.POLYGON_OFFSET_FILL),C===n&&N===i||(e.polygonOffset(n,i),C=n,N=i)):V(e.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:a,stencil:s},enable:H,disable:V,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,i&&(t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(i,r){let a=h,s=!1;if(i)if(a=d.get(r),void 0===a&&(a=[],d.set(r,a)),i.isWebGLMultipleRenderTargets){const t=i.texture;if(a.length!==t.length||a[0]!==e.COLOR_ATTACHMENT0){for(let n=0,i=t.length;n<i;n++)a[n]=e.COLOR_ATTACHMENT0+n;a.length=t.length,s=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,s=!0);else a[0]!==e.BACK&&(a[0]=e.BACK,s=!0);s&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:X,setMaterial:function(t,n){2===t.side?V(e.CULL_FACE):H(e.CULL_FACE);let i=1===t.side;n&&(i=!i),q(i),1===t.blending&&!1===t.transparent?X(0):X(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),r.setMask(t.colorWrite);const o=t.stencilWrite;s.setTest(o),o&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),$(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):V(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:q,setCullFace:Y,setLineWidth:function(t){t!==A&&(L&&e.lineWidth(t),A=t)},setPolygonOffset:$,setScissorTest:function(t){t?H(e.SCISSOR_TEST):V(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+R-1),U!==t&&(e.activeTexture(t),U=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===U?e.TEXTURE0+R-1:U);let r=I[i];void 0===r&&(r={type:void 0,texture:void 0},I[i]=r),r.type===t&&r.texture===n||(U!==i&&(e.activeTexture(i),U=i),e.bindTexture(t,n||B[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=I[U];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){}},updateUBOMapping:function(t,n){let i=l.get(n);void 0===i&&(i=new WeakMap,l.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=l.get(n).get(t);o.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),o.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){}},scissor:function(t){!1===z.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),z.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===i&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},U=null,I={},u={},d=new WeakMap,h=[],f=null,p=!1,m=null,g=null,v=null,x=null,_=null,y=null,b=null,S=new Jv(0,0,0),M=0,w=!1,E=null,T=null,A=null,C=null,N=null,z.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),r.reset(),a.reset(),s.reset()}}}function Nb(e,t,n,i,r,a,s){const o=r.isWebGL2,l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let d;const h=new WeakMap;let f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ES){}function p(e,t){return f?new OffscreenCanvas(e,t):dg("canvas")}function m(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?rg:Math.floor,a=i(r*e.width),s=i(r*e.height);void 0===d&&(d=p(a,s));const o=n?p(a,s):d;o.width=a,o.height=s;return o.getContext("2d").drawImage(e,0,0,a,s),o}return e}return e}function g(e){return ig(e.width)&&ig(e.height)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==sm&&e.minFilter!==cm}function x(t){e.generateMipmap(t)}function _(n,i,r,a,s=!1){if(!1===o)return i;if(null!==n&&void 0!==e[n])return e[n];let l=i;if(i===e.RED&&(r===e.FLOAT&&(l=e.R32F),r===e.HALF_FLOAT&&(l=e.R16F),r===e.UNSIGNED_BYTE&&(l=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(l=e.R8UI),r===e.UNSIGNED_SHORT&&(l=e.R16UI),r===e.UNSIGNED_INT&&(l=e.R32UI),r===e.BYTE&&(l=e.R8I),r===e.SHORT&&(l=e.R16I),r===e.INT&&(l=e.R32I)),i===e.RG&&(r===e.FLOAT&&(l=e.RG32F),r===e.HALF_FLOAT&&(l=e.RG16F),r===e.UNSIGNED_BYTE&&(l=e.RG8)),i===e.RGBA){const t=s?km:_g.getTransfer(a);r===e.FLOAT&&(l=e.RGBA32F),r===e.HALF_FLOAT&&(l=e.RGBA16F),r===e.UNSIGNED_BYTE&&(l=t===Um?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function y(e,t,n){return!0===v(e,n)||e.isFramebufferTexture&&e.minFilter!==sm&&e.minFilter!==cm?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function b(t){return t===sm||1004===t||t===lm?e.NEAREST:e.LINEAR}function S(e){const t=e.target;t.removeEventListener("dispose",S),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=h.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&w(e),0===Object.keys(r).length&&h.delete(n)}i.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function M(t){const n=t.target;n.removeEventListener("dispose",M),function(t){const n=t.texture,r=i.get(t),a=i.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(r.__webglFramebuffer[i]))for(let t=0;t<r.__webglFramebuffer[i].length;t++)e.deleteFramebuffer(r.__webglFramebuffer[i][t]);else e.deleteFramebuffer(r.__webglFramebuffer[i]);r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[i])}else{if(Array.isArray(r.__webglFramebuffer))for(let t=0;t<r.__webglFramebuffer.length;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer);if(r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let o=0,l=n.length;o<l;o++){const t=i.get(n[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),i.remove(n[o])}i.remove(n),i.remove(t)}(n)}function w(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete h.get(r)[n.__cacheKey],s.memory.textures--}let E=0;function T(t,r){const a=i.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e);else if(!1!==e.complete)return void P(a,t,r)}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+r)}const A={[im]:e.REPEAT,[rm]:e.CLAMP_TO_EDGE,[am]:e.MIRRORED_REPEAT},C={[sm]:e.NEAREST,[om]:e.NEAREST_MIPMAP_NEAREST,[lm]:e.NEAREST_MIPMAP_LINEAR,[cm]:e.LINEAR,[um]:e.LINEAR_MIPMAP_NEAREST,[dm]:e.LINEAR_MIPMAP_LINEAR},N={[zm]:e.NEVER,[Wm]:e.ALWAYS,[Fm]:e.LESS,[Bm]:e.LEQUAL,[jm]:e.EQUAL,[Gm]:e.GEQUAL,[Hm]:e.GREATER,[Vm]:e.NOTEQUAL};function R(n,a,s){if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,A[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,A[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,A[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,C[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,C[a.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),a.wrapS!==rm||a.wrapT,e.texParameteri(n,e.TEXTURE_MAG_FILTER,b(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,b(a.minFilter)),a.minFilter!==sm&&a.minFilter),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,N[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===sm)return;if(a.minFilter!==lm&&a.minFilter!==dm)return;if(a.type===gm&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&a.type===vm&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function L(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S));const r=n.source;let a=h.get(r);void 0===a&&(a={},h.set(r,a));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,i=!0),a[o].usedTimes++;const r=a[t.__cacheKey];void 0!==r&&(a[t.__cacheKey].usedTimes--,0===r.usedTimes&&w(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return i}function P(t,s,l){let c=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(c=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(c=e.TEXTURE_3D);const u=L(t,s),d=s.source;n.bindTexture(c,t.__webglTexture,e.TEXTURE0+l);const h=i.get(d);if(d.version!==h.__version||!0===u){n.activeTexture(e.TEXTURE0+l);const t=_g.getPrimaries(_g.workingColorSpace),i=s.colorSpace===Cm?null:_g.getPrimaries(s.colorSpace),f=s.colorSpace===Cm||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,f);const p=function(e){return!o&&(e.wrapS!==rm||e.wrapT!==rm||e.minFilter!==sm&&e.minFilter!==cm)}(s)&&!1===g(s.image);let b=m(s.image,p,!1,r.maxTextureSize);b=z(s,b);const S=g(b)||o,M=a.convert(s.format,s.colorSpace);let w,E=a.convert(s.type),T=_(s.internalFormat,M,E,s.colorSpace,s.isVideoTexture);R(c,s,S);const A=s.mipmaps,C=o&&!0!==s.isVideoTexture&&36196!==T,N=void 0===h.__version||!0===u,L=y(s,b,S);if(s.isDepthTexture)T=e.DEPTH_COMPONENT,o?T=s.type===gm?e.DEPTH_COMPONENT32F:s.type===mm?e.DEPTH_COMPONENT24:s.type===xm?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:s.type,s.format===ym&&T===e.DEPTH_COMPONENT&&s.type!==fm&&s.type!==mm&&(s.type=mm,E=a.convert(s.type)),s.format===bm&&T===e.DEPTH_COMPONENT&&(T=e.DEPTH_STENCIL,s.type!==xm&&(s.type=xm,E=a.convert(s.type))),N&&(C?n.texStorage2D(e.TEXTURE_2D,1,T,b.width,b.height):n.texImage2D(e.TEXTURE_2D,0,T,b.width,b.height,0,M,E,null));else if(s.isDataTexture)if(A.length>0&&S){C&&N&&n.texStorage2D(e.TEXTURE_2D,L,T,A[0].width,A[0].height);for(let t=0,i=A.length;t<i;t++)w=A[t],C?n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,M,E,w.data):n.texImage2D(e.TEXTURE_2D,t,T,w.width,w.height,0,M,E,w.data);s.generateMipmaps=!1}else C?(N&&n.texStorage2D(e.TEXTURE_2D,L,T,b.width,b.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,b.width,b.height,M,E,b.data)):n.texImage2D(e.TEXTURE_2D,0,T,b.width,b.height,0,M,E,b.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){C&&N&&n.texStorage3D(e.TEXTURE_2D_ARRAY,L,T,A[0].width,A[0].height,b.depth);for(let t=0,i=A.length;t<i;t++)w=A[t],s.format!==_m?null!==M&&(C?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,b.depth,M,w.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,T,w.width,w.height,b.depth,0,w.data,0,0)):C?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,b.depth,M,E,w.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,T,w.width,w.height,b.depth,0,M,E,w.data)}else{C&&N&&n.texStorage2D(e.TEXTURE_2D,L,T,A[0].width,A[0].height);for(let t=0,i=A.length;t<i;t++)w=A[t],s.format!==_m?null!==M&&(C?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,M,w.data):n.compressedTexImage2D(e.TEXTURE_2D,t,T,w.width,w.height,0,w.data)):C?n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,M,E,w.data):n.texImage2D(e.TEXTURE_2D,t,T,w.width,w.height,0,M,E,w.data)}else if(s.isDataArrayTexture)C?(N&&n.texStorage3D(e.TEXTURE_2D_ARRAY,L,T,b.width,b.height,b.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,b.width,b.height,b.depth,M,E,b.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,T,b.width,b.height,b.depth,0,M,E,b.data);else if(s.isData3DTexture)C?(N&&n.texStorage3D(e.TEXTURE_3D,L,T,b.width,b.height,b.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,b.width,b.height,b.depth,M,E,b.data)):n.texImage3D(e.TEXTURE_3D,0,T,b.width,b.height,b.depth,0,M,E,b.data);else if(s.isFramebufferTexture){if(N)if(C)n.texStorage2D(e.TEXTURE_2D,L,T,b.width,b.height);else{let t=b.width,i=b.height;for(let r=0;r<L;r++)n.texImage2D(e.TEXTURE_2D,r,T,t,i,0,M,E,null),t>>=1,i>>=1}}else if(A.length>0&&S){C&&N&&n.texStorage2D(e.TEXTURE_2D,L,T,A[0].width,A[0].height);for(let t=0,i=A.length;t<i;t++)w=A[t],C?n.texSubImage2D(e.TEXTURE_2D,t,0,0,M,E,w):n.texImage2D(e.TEXTURE_2D,t,T,M,E,w);s.generateMipmaps=!1}else C?(N&&n.texStorage2D(e.TEXTURE_2D,L,T,b.width,b.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,M,E,b)):n.texImage2D(e.TEXTURE_2D,0,T,M,E,b);v(s,S)&&x(c),h.__version=d.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function k(t,r,s,o,c,u){const d=a.convert(s.format,s.colorSpace),h=a.convert(s.type),f=_(s.internalFormat,d,h,s.colorSpace);if(!i.get(r).__hasExternalTextures){const t=Math.max(1,r.width>>u),i=Math.max(1,r.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,f,t,i,r.depth,0,d,h,null):n.texImage2D(c,u,f,t,i,0,d,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),O(r)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,c,i.get(s).__webglTexture,0,D(r)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,c,i.get(s).__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function U(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let r=!0===o?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(i||O(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===gm?r=e.DEPTH_COMPONENT32F:t.type===mm&&(r=e.DEPTH_COMPONENT24));const i=D(n);O(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,r,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,i,r,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,r,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const r=D(n);i&&!1===O(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):O(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<t.length;r++){const s=t[r],o=a.convert(s.format,s.colorSpace),c=a.convert(s.type),u=_(s.internalFormat,o,c,s.colorSpace),d=D(n);i&&!1===O(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,u,n.width,n.height):O(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function I(t){const r=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),T(r.depthTexture,0);const a=i.get(r.depthTexture).__webglTexture,s=D(r);if(r.depthTexture.format===ym)O(r)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(r.depthTexture.format!==bm)throw new Error("Unknown depthTexture format");O(r)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),U(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),U(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function D(e){return Math.min(r.maxSamples,e.samples)}function O(e){const n=i.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function z(e,n){const i=e.colorSpace,r=e.format;e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===qm||i!==Rm&&i!==Cm&&_g.getTransfer(i)===Um&&!1===o&&(!0===t.has("EXT_sRGB")&&r===_m?(e.format=qm,e.minFilter=cm,e.generateMipmaps=!1):n=Mg.sRGBToLinear(n)),n}this.allocateTextureUnit=function(){const e=E;return r.maxTextures,E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=T,this.setTexture2DArray=function(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?P(a,t,r):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?P(a,t,r):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,s){const l=i.get(t);t.version>0&&l.__version!==t.version?function(t,s,l){if(6!==s.image.length)return;const c=L(t,s),u=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+l);const d=i.get(u);if(u.version!==d.__version||!0===c){n.activeTexture(e.TEXTURE0+l);const t=_g.getPrimaries(_g.workingColorSpace),i=s.colorSpace===Cm?null:_g.getPrimaries(s.colorSpace),h=s.colorSpace===Cm||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const f=s.isCompressedTexture||s.image[0].isCompressedTexture,p=s.image[0]&&s.image[0].isDataTexture,b=[];for(let e=0;e<6;e++)b[e]=f||p?p?s.image[e].image:s.image[e]:m(s.image[e],!1,!0,r.maxCubemapSize),b[e]=z(s,b[e]);const S=b[0],M=g(S)||o,w=a.convert(s.format,s.colorSpace),E=a.convert(s.type),T=_(s.internalFormat,w,E,s.colorSpace),A=o&&!0!==s.isVideoTexture,C=void 0===d.__version||!0===c;let N,L=y(s,S,M);if(R(e.TEXTURE_CUBE_MAP,s,M),f){A&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,L,T,S.width,S.height);for(let t=0;t<6;t++){N=b[t].mipmaps;for(let i=0;i<N.length;i++){const r=N[i];s.format!==_m?null!==w&&(A?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,w,r.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,T,r.width,r.height,0,r.data)):A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,w,E,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,T,r.width,r.height,0,w,E,r.data)}}}else{N=s.mipmaps,A&&C&&(N.length>0&&L++,n.texStorage2D(e.TEXTURE_CUBE_MAP,L,T,b[0].width,b[0].height));for(let t=0;t<6;t++)if(p){A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,b[t].width,b[t].height,w,E,b[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,T,b[t].width,b[t].height,0,w,E,b[t].data);for(let i=0;i<N.length;i++){const r=N[i].image[t].image;A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,r.width,r.height,w,E,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,T,r.width,r.height,0,w,E,r.data)}}else{A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,w,E,b[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,T,w,E,b[t]);for(let i=0;i<N.length;i++){const r=N[i];A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,w,E,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,T,w,E,r.image[t])}}}v(s,M)&&x(e.TEXTURE_CUBE_MAP),d.__version=u.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(l,t,s):n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,r){const a=i.get(t);void 0!==n&&k(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&I(t)},this.setupRenderTarget=function(t){const l=t.texture,c=i.get(t),u=i.get(l);t.addEventListener("dispose",M),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,s.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,f=g(t)||o;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer[t]=[];for(let n=0;n<l.mipmaps.length;n++)c.__webglFramebuffer[t][n]=e.createFramebuffer()}else c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer=[];for(let t=0;t<l.mipmaps.length;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else c.__webglFramebuffer=e.createFramebuffer();if(h&&r.drawBuffers){const n=t.texture;for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),s.memory.textures++)}}if(o&&t.samples>0&&!1===O(t)){const i=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const s=a.convert(r.format,r.colorSpace),o=a.convert(r.type),l=_(r.internalFormat,s,o,r.colorSpace,!0===t.isXRRenderTarget),u=D(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),U(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),R(e.TEXTURE_CUBE_MAP,l,f);for(let n=0;n<6;n++)if(o&&l.mipmaps&&l.mipmaps.length>0)for(let i=0;i<l.mipmaps.length;i++)k(c.__webglFramebuffer[n][i],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else k(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);v(l,f)&&x(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const r=t.texture;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i.get(s);n.bindTexture(e.TEXTURE_2D,o.__webglTexture),R(e.TEXTURE_2D,s,f),k(c.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D,0),v(s,f)&&x(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&o&&(i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(i,u.__webglTexture),R(i,l,f),o&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)k(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,i,n);else k(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,i,0);v(l,f)&&x(i),n.unbindTexture()}t.depthBuffer&&I(t)},this.updateRenderTargetMipmap=function(t){const r=g(t)||o,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=a.length;s<o;s++){const o=a[s];if(v(o,r)){const r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=i.get(o).__webglTexture;n.bindTexture(r,a),x(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===O(t)){const r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,s=t.height;let o=e.COLOR_BUFFER_BIT;const l=[],u=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,d=i.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,d.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(u);const f=void 0!==d.__ignoreDepthValues&&d.__ignoreDepthValues;if(!1===f&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),h&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,d.__webglColorRenderbuffer[n]),!0===f&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[u]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[u])),h){const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),c&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,d.__webglColorRenderbuffer[t]);const a=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=I,this.setupFrameBufferTexture=k,this.useMultisampledRTT=O}function Rb(e,t,n){const i=n.isWebGL2;return{convert:function(n,r=""){let a;const s=_g.getTransfer(r);if(n===hm)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(n===fm)return e.UNSIGNED_SHORT;if(n===pm)return e.INT;if(n===mm)return e.UNSIGNED_INT;if(n===gm)return e.FLOAT;if(n===vm)return i?e.HALF_FLOAT:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===n)return e.ALPHA;if(n===_m)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===ym)return e.DEPTH_COMPONENT;if(n===bm)return e.DEPTH_STENCIL;if(n===qm)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===n)return e.RED;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(n===Sm||n===Mm||n===wm||n===Em)if(s===Um){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(n===Sm)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Mm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===wm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Em)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(n===Sm)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Mm)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===wm)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Em)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===n)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===n)return s===Um?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return s===Um?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Tm||36494===n||36495===n){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(n===Tm)return s===Um?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===n)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===n)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||36284===n||36285===n||36286===n){if(a=t.get("EXT_texture_compression_rgtc"),null===a)return null;if(n===Tm)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===xm?i?e.UNSIGNED_INT_24_8:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class Lb extends Gx{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Pb extends Dv{constructor(){super(),this.isGroup=!0,this.type="Group"}}const kb={type:"move"};class Ub{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Pb,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Pb,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ig,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ig),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Pb,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ig,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ig),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const a of e.hand.values()){const e=t.getJointPose(a,n),i=this._getHandJoint(l,a);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(kb)))}return null!==s&&(s.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Pb;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Ib extends Km{constructor(e,t){super();const n=this;let i=null,r=1,a=null,s="local-floor",o=1,l=null,c=null,u=null,d=null,h=null,f=null;const p=t.getContextAttributes();let m=null,g=null;const v=[],x=[],_=new og;let y=null;const b=new Gx;b.layers.enable(1),b.viewport=new Ng;const S=new Gx;S.layers.enable(2),S.viewport=new Ng;const M=[b,S],w=new Lb;w.layers.enable(1),w.layers.enable(2);let E=null,T=null;function A(e){const t=x.indexOf(e.inputSource);if(-1===t)return;const n=v[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function C(){i.removeEventListener("select",A),i.removeEventListener("selectstart",A),i.removeEventListener("selectend",A),i.removeEventListener("squeeze",A),i.removeEventListener("squeezestart",A),i.removeEventListener("squeezeend",A),i.removeEventListener("end",C),i.removeEventListener("inputsourceschange",N);for(let e=0;e<v.length;e++){const t=x[e];null!==t&&(x[e]=null,v[e].disconnect(t))}E=null,T=null,e.setRenderTarget(m),h=null,d=null,u=null,i=null,g=null,U.stop(),n.isPresenting=!1,e.setPixelRatio(y),e.setSize(_.width,_.height,!1),n.dispatchEvent({type:"sessionend"})}function N(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=x.indexOf(n);i>=0&&(x[i]=null,v[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=x.indexOf(n);if(-1===i){for(let e=0;e<v.length;e++){if(e>=x.length){x.push(n),i=e;break}if(null===x[e]){x[e]=n,i=e;break}}if(-1===i)break}const r=v[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new Ub,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new Ub,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new Ub,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,n.isPresenting},this.setReferenceSpaceType=function(e){s=e,n.isPresenting},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){if(m=e.getRenderTarget(),i.addEventListener("select",A),i.addEventListener("selectstart",A),i.addEventListener("selectend",A),i.addEventListener("squeeze",A),i.addEventListener("squeezestart",A),i.addEventListener("squeezeend",A),i.addEventListener("end",C),i.addEventListener("inputsourceschange",N),!0!==p.xrCompatible&&await t.makeXRCompatible(),y=e.getPixelRatio(),e.getSize(_),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:r};h=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),g=new Lg(h.framebufferWidth,h.framebufferHeight,{format:_m,type:hm,colorSpace:e.outputColorSpace,stencilBuffer:p.stencil})}else{let n=null,a=null,s=null;p.depth&&(s=p.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=p.stencil?bm:ym,a=p.stencil?xm:mm);const o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:r};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(o),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),g=new Lg(d.textureWidth,d.textureHeight,{format:_m,type:hm,depthTexture:new B_(d.textureWidth,d.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,colorSpace:e.outputColorSpace,samples:p.antialias?4:0});e.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await i.requestReferenceSpace(s),U.setContext(i),U.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const R=new Ig,L=new Ig;function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;w.near=S.near=b.near=e.near,w.far=S.far=b.far=e.far,E===w.near&&T===w.far||(i.updateRenderState({depthNear:w.near,depthFar:w.far}),E=w.near,T=w.far);const t=e.parent,n=w.cameras;P(w,t);for(let i=0;i<n.length;i++)P(n[i],t);2===n.length?function(e,t,n){R.setFromMatrixPosition(t.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);const i=R.distanceTo(L),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],d=(a[8]+1)/a[0],h=s*u,f=s*d,p=i/(-u+d),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+p,v=o+p,x=h-m,_=f+(i-m),y=l*o/v*g,b=c*o/v*g;e.projectionMatrix.makePerspective(x,_,y,b,g,v),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(w,b,S):w.projectionMatrix.copy(b.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Jm*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,w,t)},this.getCamera=function(){return w},this.getFoveation=function(){if(null!==d||null!==h)return o},this.setFoveation=function(e){o=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let k=null;const U=new n_;U.setAnimationLoop(function(t,i){if(c=i.getViewerPose(l||a),f=i,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==w.cameras.length&&(w.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const r=t[i];let a=null;if(null!==h)a=h.getViewport(r);else{const t=u.getViewSubImage(d,r);a=t.viewport,0===i&&(e.setRenderTargetTextures(g,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let s=M[i];void 0===s&&(s=new Gx,s.layers.enable(i),s.viewport=new Ng,M[i]=s),s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(r.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===i&&(w.matrix.copy(s.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),!0===n&&w.cameras.push(s)}}for(let e=0;e<v.length;e++){const t=x[e],n=v[e];null!==t&&void 0!==n&&n.update(t,i,l||a)}k&&k(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),f=null}),this.setAnimationLoop=function(e){k=e},this.dispose=function(){}}}function Db(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,1===r.side&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),1===r.side&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const a=t.get(r).envMap;if(a&&(i.envMap.value=a,i.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*t,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,jx(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,a,s,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,i){e.metalness.value=i.metalness,i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,e.metalnessMapTransform));e.roughness.value=i.roughness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,e.roughnessMapTransform));const r=t.get(i).envMap;r&&(e.envMapIntensity.value=i.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),1===t.side&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,o)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,a,s):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Ob(e,t,n,i){let r={},a={},s=[];const o=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n,i){const r=e.value,a=t+"_"+n;if(void 0===i[a])return i[a]="number"==typeof r||"boolean"==typeof r?r:r.clone(),!0;{const e=i[a];if("number"==typeof r||"boolean"==typeof r){if(e!==r)return i[a]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture,t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const i=s.indexOf(n.__bindingPointIndex);s.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,d){let h=r[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const i=16;for(let a=0,s=t.length;a<s;a++){const e=Array.isArray(t[a])?t[a]:[t[a]];for(let t=0,r=e.length;t<r;t++){const r=e[t],a=Array.isArray(r.value)?r.value:[r.value];for(let e=0,t=a.length;e<t;e++){const t=c(a[e]),s=n%i;0!==s&&i-s<t.boundary&&(n+=i-s),r.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,n+=t.storage}}}const r=n%i;r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return 0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=h,n.addEventListener("dispose",u));const f=d.program;i.updateUBOMapping(n,f);const p=t.render.frame;a[n.id]!==p&&(!function(t){const n=r[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let r=0,s=i.length;r<s;r++){const t=Array.isArray(i[r])?i[r]:[i[r]];for(let n=0,i=t.length;n<i;n++){const i=t[n];if(!0===l(i,r,n,a)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let a=0;a<n.length;a++){const s=n[a],o=c(s);"number"==typeof s||"boolean"==typeof s?(i.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):s.isMatrix3?(i.__data[0]=s.elements[0],i.__data[1]=s.elements[1],i.__data[2]=s.elements[2],i.__data[3]=0,i.__data[4]=s.elements[3],i.__data[5]=s.elements[4],i.__data[6]=s.elements[5],i.__data[7]=0,i.__data[8]=s.elements[6],i.__data[9]=s.elements[7],i.__data[10]=s.elements[8],i.__data[11]=0):(s.toArray(i.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=p)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);s=[],r={},a={}}}}class zb{constructor(e={}){const{canvas:t=hg(),context:n=null,depth:i=!0,stencil:r=!0,alpha:a=!1,antialias:s=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1}=e;let d;this.isWebGLRenderer=!0,d=null!==n?n.getContextAttributes().alpha:a;const h=new Uint32Array(4),f=new Int32Array(4);let p=null,m=null;const g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Nm,this._useLegacyLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const x=this;let _=!1,y=0,b=0,S=null,M=-1,w=null;const E=new Ng,T=new Ng;let A=null;const C=new Jv(0);let N=0,R=t.width,L=t.height,P=1,k=null,U=null;const I=new Ng(0,0,R,L),D=new Ng(0,0,R,L);let O=!1;const z=new t_;let F=!1,j=!1,B=null;const H=new dv,V=new og,G=new Ig,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function X(){return null===S?P:1}let q,Y,$,K,Z,Q,J,ee,te,ne,ie,re,ae,se,oe,le,ce,ue,de,he,fe,pe,me,ge,ve=n;function xe(e,n){for(let i=0;i<e.length;i++){const r=e[i],a=t.getContext(r,n);if(null!==a)return a}return null}try{const e={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Pp}`),t.addEventListener("webglcontextlost",be,!1),t.addEventListener("webglcontextrestored",Se,!1),t.addEventListener("webglcontextcreationerror",Me,!1),null===ve){const t=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&t.shift(),ve=xe(t,e),null===ve)throw xe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&WebGLRenderingContext,void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Oe){throw Oe}function _e(){q=new k_(ve),Y=new h_(ve,q,e),q.init(Y),pe=new Rb(ve,q,Y),$=new Cb(ve,q,Y),K=new D_(ve),Z=new pb,Q=new Nb(ve,q,$,Z,Y,pe,K),J=new p_(x),ee=new P_(x),te=new i_(ve,Y),me=new u_(ve,q,te,Y),ne=new U_(ve,te,K,me),ie=new j_(ve,ne,te,K),de=new F_(ve,Y,Q),le=new f_(Z),re=new fb(x,J,ee,q,Y,me,le),ae=new Db(x,Z),se=new xb,oe=new wb(q,Y),ue=new c_(x,J,ee,$,ie,d,o),ce=new Ab(x,ie,Y),ge=new Ob(ve,K,Y,$),he=new d_(ve,q,K,Y),fe=new I_(ve,q,K,Y),K.programs=re.programs,x.capabilities=Y,x.extensions=q,x.properties=Z,x.renderLists=se,x.shadowMap=ce,x.state=$,x.info=K}_e();const ye=new Ib(x,ve);function be(e){e.preventDefault(),_=!0}function Se(){_=!1;const e=K.autoReset,t=ce.enabled,n=ce.autoUpdate,i=ce.needsUpdate,r=ce.type;_e(),K.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=i,ce.type=r}function Me(e){}function we(e){const t=e.target;t.removeEventListener("dispose",we),function(e){(function(e){const t=Z.get(e).programs;void 0!==t&&(t.forEach(function(e){re.releaseProgram(e)}),e.isShaderMaterial&&re.releaseShaderCache(e))})(e),Z.remove(e)}(t)}function Ee(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,Ue(e,t,n),e.side=0,e.needsUpdate=!0,Ue(e,t,n),e.side=2):Ue(e,t,n)}this.xr=ye,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=q.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=q.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(e){void 0!==e&&(P=e,this.setSize(R,L,!1))},this.getSize=function(e){return e.set(R,L)},this.setSize=function(e,n,i=!0){ye.isPresenting||(R=e,L=n,t.width=Math.floor(e*P),t.height=Math.floor(n*P),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(R*P,L*P).floor()},this.setDrawingBufferSize=function(e,n,i){R=e,L=n,P=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(E)},this.getViewport=function(e){return e.copy(I)},this.setViewport=function(e,t,n,i){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,i),$.viewport(E.copy(I).multiplyScalar(P).floor())},this.getScissor=function(e){return e.copy(D)},this.setScissor=function(e,t,n,i){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,i),$.scissor(T.copy(D).multiplyScalar(P).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){$.setScissorTest(O=e)},this.setOpaqueSort=function(e){k=e},this.setTransparentSort=function(e){U=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(e=!0,t=!0,n=!0){let i=0;if(e){let e=!1;if(null!==S){const t=S.texture.format;e=1033===t||1031===t||1029===t}if(e){const e=S.texture.type,t=e===hm||e===mm||e===fm||e===xm||1017===e||1018===e,n=ue.getClearColor(),i=ue.getClearAlpha(),r=n.r,a=n.g,s=n.b;t?(h[0]=r,h[1]=a,h[2]=s,h[3]=i,ve.clearBufferuiv(ve.COLOR,0,h)):(f[0]=r,f[1]=a,f[2]=s,f[3]=i,ve.clearBufferiv(ve.COLOR,0,f))}else i|=ve.COLOR_BUFFER_BIT}t&&(i|=ve.DEPTH_BUFFER_BIT),n&&(i|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",be,!1),t.removeEventListener("webglcontextrestored",Se,!1),t.removeEventListener("webglcontextcreationerror",Me,!1),se.dispose(),oe.dispose(),Z.dispose(),J.dispose(),ee.dispose(),ie.dispose(),me.dispose(),ge.dispose(),re.dispose(),ye.dispose(),ye.removeEventListener("sessionstart",Ae),ye.removeEventListener("sessionend",Ce),B&&(B.dispose(),B=null),Ne.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=W);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=function(e,t,n,i,r){!0!==t.isScene&&(t=W);Q.resetTextureUnits();const a=t.fog,s=i.isMeshStandardMaterial?t.environment:null,o=null===S?x.outputColorSpace:!0===S.isXRRenderTarget?S.texture.colorSpace:Rm,l=(i.isMeshStandardMaterial?ee:J).get(i.envMap||s),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,f=!!n.morphAttributes.color;let p=0;i.toneMapped&&(null!==S&&!0!==S.isXRRenderTarget||(p=x.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,_=Z.get(i),y=m.state.lights;if(!0===F&&(!0===j||e!==w)){const t=e===w&&i.id===M;le.setState(i,e,t)}let b=!1;i.version===_.__version?_.needsLights&&_.lightsStateVersion!==y.state.version||_.outputColorSpace!==o||r.isBatchedMesh&&!1===_.batching?b=!0:r.isBatchedMesh||!0!==_.batching?r.isInstancedMesh&&!1===_.instancing?b=!0:r.isInstancedMesh||!0!==_.instancing?r.isSkinnedMesh&&!1===_.skinning?b=!0:r.isSkinnedMesh||!0!==_.skinning?r.isInstancedMesh&&!0===_.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===_.instancingColor&&null!==r.instanceColor||_.envMap!==l||!0===i.fog&&_.fog!==a?b=!0:void 0===_.numClippingPlanes||_.numClippingPlanes===le.numPlanes&&_.numIntersection===le.numIntersection?(_.vertexAlphas!==c||_.vertexTangents!==u||_.morphTargets!==d||_.morphNormals!==h||_.morphColors!==f||_.toneMapping!==p||!0===Y.isWebGL2&&_.morphTargetsCount!==v)&&(b=!0):b=!0:b=!0:b=!0:b=!0:(b=!0,_.__version=i.version);let E=_.currentProgram;!0===b&&(E=Ue(i,t,r));let T=!1,A=!1,C=!1;const N=E.getUniforms(),R=_.uniforms;$.useProgram(E.program)&&(T=!0,A=!0,C=!0);i.id!==M&&(M=i.id,A=!0);if(T||w!==e){N.setValue(ve,"projectionMatrix",e.projectionMatrix),N.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=N.map.cameraPosition;void 0!==t&&t.setValue(ve,G.setFromMatrixPosition(e.matrixWorld)),Y.logarithmicDepthBuffer&&N.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&N.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),w!==e&&(w=e,A=!0,C=!0)}if(r.isSkinnedMesh){N.setOptional(ve,r,"bindMatrix"),N.setOptional(ve,r,"bindMatrixInverse");const e=r.skeleton;e&&Y.floatVertexTextures&&(null===e.boneTexture&&e.computeBoneTexture(),N.setValue(ve,"boneTexture",e.boneTexture,Q))}r.isBatchedMesh&&(N.setOptional(ve,r,"batchingTexture"),N.setValue(ve,"batchingTexture",r._matricesTexture,Q));const k=n.morphAttributes;(void 0!==k.position||void 0!==k.normal||void 0!==k.color&&!0===Y.isWebGL2)&&de.update(r,n,E);(A||_.receiveShadow!==r.receiveShadow)&&(_.receiveShadow=r.receiveShadow,N.setValue(ve,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);A&&(N.setValue(ve,"toneMappingExposure",x.toneMappingExposure),_.needsLights&&(I=C,(U=R).ambientLightColor.needsUpdate=I,U.lightProbe.needsUpdate=I,U.directionalLights.needsUpdate=I,U.directionalLightShadows.needsUpdate=I,U.pointLights.needsUpdate=I,U.pointLightShadows.needsUpdate=I,U.spotLights.needsUpdate=I,U.spotLightShadows.needsUpdate=I,U.rectAreaLights.needsUpdate=I,U.hemisphereLights.needsUpdate=I),a&&!0===i.fog&&ae.refreshFogUniforms(R,a),ae.refreshMaterialUniforms(R,i,P,L,B),Xy.upload(ve,Ie(_),R,Q));var U,I;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Xy.upload(ve,Ie(_),R,Q),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&N.setValue(ve,"center",r.center);if(N.setValue(ve,"modelViewMatrix",r.modelViewMatrix),N.setValue(ve,"normalMatrix",r.normalMatrix),N.setValue(ve,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(Y.isWebGL2){const n=e[t];ge.update(n,E),ge.bind(n,E)}}return E}(e,t,n,i,r);$.setMaterial(i,s);let l=n.index,c=1;if(!0===i.wireframe){if(l=ne.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*c,f=(u.start+u.count)*c;null!==a&&(h=Math.max(h,a.start*c),f=Math.min(f,(a.start+a.count)*c)),null!==l?(h=Math.max(h,0),f=Math.min(f,l.count)):null!=d&&(h=Math.max(h,0),f=Math.min(f,d.count));const p=f-h;if(p<0||p===1/0)return;let g;me.setup(r,i,o,n,l);let v=he;if(null!==l&&(g=te.get(l),v=fe,v.setIndex(g)),r.isMesh)!0===i.wireframe?($.setLineWidth(i.wireframeLinewidth*X()),v.setMode(ve.LINES)):v.setMode(ve.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),$.setLineWidth(e*X()),r.isLineSegments?v.setMode(ve.LINES):r.isLineLoop?v.setMode(ve.LINE_LOOP):v.setMode(ve.LINE_STRIP)}else r.isPoints?v.setMode(ve.POINTS):r.isSprite&&v.setMode(ve.TRIANGLES);if(r.isBatchedMesh)v.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else if(r.isInstancedMesh)v.renderInstances(h,p,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(h,p,t)}else v.render(h,p)},this.compile=function(e,t,n=null){null===n&&(n=e),m=oe.get(n),m.init(),v.push(m),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))}),m.setupLights(x._useLegacyLights);const i=new Set;return e.traverse(function(e){const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const a=t[r];Ee(a,n,e),i.add(a)}else Ee(t,n,e),i.add(t)}),v.pop(),m=null,i},this.compileAsync=function(e,t,n=null){const i=this.compile(e,t,n);return new Promise(t=>{function n(){i.forEach(function(e){Z.get(e).currentProgram.isReady()&&i.delete(e)}),0!==i.size?setTimeout(n,10):t(e)}null!==q.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Te=null;function Ae(){Ne.stop()}function Ce(){Ne.start()}const Ne=new n_;function Re(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||z.intersectsSprite(e)){i&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=ie.update(e),r=e.material;r.visible&&p.push(e,t,r,n,G.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||z.intersectsObject(e))){const t=ie.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),G.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),G.copy(t.boundingSphere.center)),G.applyMatrix4(e.matrixWorld).applyMatrix4(H)),Array.isArray(r)){const i=t.groups;for(let a=0,s=i.length;a<s;a++){const s=i[a],o=r[s.materialIndex];o&&o.visible&&p.push(e,t,o,n,G.z,s)}}else r.visible&&p.push(e,t,r,n,G.z,null)}const r=e.children;for(let a=0,s=r.length;a<s;a++)Re(r[a],t,n,i)}function Le(e,t,n,i){const r=e.opaque,a=e.transmissive,s=e.transparent;m.setupLightsView(n),!0===F&&le.setGlobalState(x.clippingPlanes,n),a.length>0&&function(e,t,n,i){const r=!0===n.isScene?n.overrideMaterial:null;if(null!==r)return;const a=Y.isWebGL2;null===B&&(B=new Lg(1,1,{generateMipmaps:!0,type:q.has("EXT_color_buffer_half_float")?vm:hm,minFilter:dm,samples:a?4:0}));x.getDrawingBufferSize(V),a?B.setSize(V.x,V.y):B.setSize(rg(V.x),rg(V.y));const s=x.getRenderTarget();x.setRenderTarget(B),x.getClearColor(C),N=x.getClearAlpha(),N<1&&x.setClearColor(16777215,.5);x.clear();const o=x.toneMapping;x.toneMapping=0,Pe(e,n,i),Q.updateMultisampleRenderTarget(B),Q.updateRenderTargetMipmap(B);let l=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c],r=e.object,a=e.geometry,s=e.material,o=e.group;if(2===s.side&&r.layers.test(i.layers)){const e=s.side;s.side=1,s.needsUpdate=!0,ke(r,n,i,a,s,o),s.side=e,s.needsUpdate=!0,l=!0}}!0===l&&(Q.updateMultisampleRenderTarget(B),Q.updateRenderTargetMipmap(B));x.setRenderTarget(s),x.setClearColor(C,N),x.toneMapping=o}(r,a,t,n),i&&$.viewport(E.copy(i)),r.length>0&&Pe(r,t,n),a.length>0&&Pe(a,t,n),s.length>0&&Pe(s,t,n),$.buffers.depth.setTest(!0),$.buffers.depth.setMask(!0),$.buffers.color.setMask(!0),$.setPolygonOffset(!1)}function Pe(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],s=a.object,o=a.geometry,l=null===i?a.material:i,c=a.group;s.layers.test(n.layers)&&ke(s,t,n,o,l,c)}}function ke(e,t,n,i,r,a){e.onBeforeRender(x,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(x,t,n,i,e,a),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=1,r.needsUpdate=!0,x.renderBufferDirect(n,t,i,r,e,a),r.side=0,r.needsUpdate=!0,x.renderBufferDirect(n,t,i,r,e,a),r.side=2):x.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(x,t,n,i,r,a)}function Ue(e,t,n){!0!==t.isScene&&(t=W);const i=Z.get(e),r=m.state.lights,a=m.state.shadowsArray,s=r.state.version,o=re.getParameters(e,r.state,a,t,n),l=re.getProgramCacheKey(o);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?ee:J).get(e.envMap||i.environment),void 0===c&&(e.addEventListener("dispose",we),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===s)return De(e,o),u}else o.uniforms=re.getUniforms(e),e.onBuild(n,o,x),e.onBeforeCompile(o,x),u=re.acquireProgram(o,l),c.set(l,u),i.uniforms=o.uniforms;const d=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=le.uniform),De(e,o),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=s,i.needsLights&&(d.ambientLightColor.value=r.state.ambient,d.lightProbe.value=r.state.probe,d.directionalLights.value=r.state.directional,d.directionalLightShadows.value=r.state.directionalShadow,d.spotLights.value=r.state.spot,d.spotLightShadows.value=r.state.spotShadow,d.rectAreaLights.value=r.state.rectArea,d.ltc_1.value=r.state.rectAreaLTC1,d.ltc_2.value=r.state.rectAreaLTC2,d.pointLights.value=r.state.point,d.pointLightShadows.value=r.state.pointShadow,d.hemisphereLights.value=r.state.hemi,d.directionalShadowMap.value=r.state.directionalShadowMap,d.directionalShadowMatrix.value=r.state.directionalShadowMatrix,d.spotShadowMap.value=r.state.spotShadowMap,d.spotLightMatrix.value=r.state.spotLightMatrix,d.spotLightMap.value=r.state.spotLightMap,d.pointShadowMap.value=r.state.pointShadowMap,d.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=u,i.uniformsList=null,u}function Ie(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=Xy.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function De(e,t){const n=Z.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ne.setAnimationLoop(function(e){Te&&Te(e)}),"undefined"!=typeof self&&Ne.setContext(self),this.setAnimationLoop=function(e){Te=e,ye.setAnimationLoop(e),null===e?Ne.stop():Ne.start()},ye.addEventListener("sessionstart",Ae),ye.addEventListener("sessionend",Ce),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return;if(!0===_)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===ye.enabled&&!0===ye.isPresenting&&(!0===ye.cameraAutoUpdate&&ye.updateCamera(t),t=ye.getCamera()),!0===e.isScene&&e.onBeforeRender(x,e,t,S),m=oe.get(e,v.length),m.init(),v.push(m),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),z.setFromProjectionMatrix(H),j=this.localClippingEnabled,F=le.init(this.clippingPlanes,j),p=se.get(e,g.length),p.init(),g.push(p),Re(e,t,0,x.sortObjects),p.finish(),!0===x.sortObjects&&p.sort(k,U),this.info.render.frame++,!0===F&&le.beginShadows();const n=m.state.shadowsArray;if(ce.render(n,e,t),!0===F&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(p,e),m.setupLights(x._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];Le(p,e,i,i.viewport)}}else Le(p,e,t);null!==S&&(Q.updateMultisampleRenderTarget(S),Q.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(x,e,t),me.resetDefaultState(),M=-1,w=null,v.pop(),m=v.length>0?v[v.length-1]:null,g.pop(),p=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,n){Z.get(e.texture).__webglTexture=t,Z.get(e.depthTexture).__webglTexture=n;const i=Z.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===q.has("WEBGL_multisampled_render_to_texture")&&(i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=Z.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){S=e,y=t,b=n;let i=!0,r=null,a=!1,s=!1;if(e){const o=Z.get(e);void 0!==o.__useDefaultFramebuffer?($.bindFramebuffer(ve.FRAMEBUFFER,null),i=!1):void 0===o.__webglFramebuffer?Q.setupRenderTarget(e):o.__hasExternalTextures&&Q.rebindTextures(e,Z.get(e.texture).__webglTexture,Z.get(e.depthTexture).__webglTexture);const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const c=Z.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][n]:c[t],a=!0):r=Y.isWebGL2&&e.samples>0&&!1===Q.useMultisampledRTT(e)?Z.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,E.copy(e.viewport),T.copy(e.scissor),A=e.scissorTest}else E.copy(I).multiplyScalar(P).floor(),T.copy(D).multiplyScalar(P).floor(),A=O;if($.bindFramebuffer(ve.FRAMEBUFFER,r)&&Y.drawBuffers&&i&&$.drawBuffers(e,r),$.viewport(E),$.scissor(T),$.setScissorTest(A),a){const i=Z.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(s){const i=Z.get(e.texture),r=t||0;ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}M=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,s){if(!e||!e.isWebGLRenderTarget)return;let o=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){$.bindFramebuffer(ve.FRAMEBUFFER,o);try{const s=e.texture,o=s.format,l=s.type;if(o!==_m&&pe.convert(o)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_FORMAT))return;const c=l===vm&&(q.has("EXT_color_buffer_half_float")||Y.isWebGL2&&q.has("EXT_color_buffer_float"));if(!(l===hm||pe.convert(l)===ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_TYPE)||l===gm&&(Y.isWebGL2||q.has("OES_texture_float")||q.has("WEBGL_color_buffer_float"))||c))return;t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&ve.readPixels(t,n,i,r,pe.convert(o),pe.convert(l),a)}finally{const e=null!==S?Z.get(S).__webglFramebuffer:null;$.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i);Q.setTexture2D(t,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,n,0,0,e.x,e.y,r,a),$.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i=0){const r=t.image.width,a=t.image.height,s=pe.convert(n.format),o=pe.convert(n.type);Q.setTexture2D(n,0),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,n.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,i,e.x,e.y,r,a,s,o,t.image.data):t.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):ve.texSubImage2D(ve.TEXTURE_2D,i,e.x,e.y,s,o,t.image),0===i&&n.generateMipmaps&&ve.generateMipmap(ve.TEXTURE_2D),$.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i,r=0){if(x.isWebGL1Renderer)return;const a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=pe.convert(i.format),c=pe.convert(i.type);let u;if(i.isData3DTexture)Q.setTexture3D(i,0),u=ve.TEXTURE_3D;else{if(!i.isDataArrayTexture&&!i.isCompressedArrayTexture)return;Q.setTexture2DArray(i,0),u=ve.TEXTURE_2D_ARRAY}ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,i.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,i.unpackAlignment);const d=ve.getParameter(ve.UNPACK_ROW_LENGTH),h=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),f=ve.getParameter(ve.UNPACK_SKIP_PIXELS),p=ve.getParameter(ve.UNPACK_SKIP_ROWS),m=ve.getParameter(ve.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[r]:n.image;ve.pixelStorei(ve.UNPACK_ROW_LENGTH,g.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,g.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,e.min.x),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,e.min.y),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?ve.texSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,c,g.data):n.isCompressedArrayTexture?ve.compressedTexSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,g.data):ve.texSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,c,g),ve.pixelStorei(ve.UNPACK_ROW_LENGTH,d),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,h),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,f),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,p),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,m),0===r&&i.generateMipmaps&&ve.generateMipmap(u),$.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?Q.setTextureCube(e,0):e.isData3DTexture?Q.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Q.setTexture2DArray(e,0):Q.setTexture2D(e,0),$.unbindTexture()},this.resetState=function(){y=0,b=0,S=null,$.reset(),me.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ym}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Lm?"display-p3":"srgb",t.unpackColorSpace=_g.workingColorSpace===Pm?"display-p3":"srgb"}get outputEncoding(){return this.outputColorSpace===Nm?Am:3e3}set outputEncoding(e){this.outputColorSpace=e===Am?Nm:Rm}get useLegacyLights(){return this._useLegacyLights}set useLegacyLights(e){this._useLegacyLights=e}}(class extends zb{}).prototype.isWebGL1Renderer=!0;class Fb extends Dv{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class jb extends nx{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Jv(16777215),this.specular=new Jv(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jv(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new og(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Bb extends Dv{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Jv(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const Hb=new dv,Vb=new Ig,Gb=new Ig;class Wb{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new og(512,512),this.map=null,this.mapPass=null,this.matrix=new dv,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new t_,this._frameExtents=new og(1,1),this._viewportCount=1,this._viewports=[new Ng(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Vb.setFromMatrixPosition(e.matrixWorld),t.position.copy(Vb),Gb.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Gb),t.updateMatrixWorld(),Hb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Hb),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Hb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const Xb=new dv,qb=new Ig,Yb=new Ig;class $b extends Wb{constructor(){super(new Gx(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new og(4,2),this._viewportCount=6,this._viewports=[new Ng(2,1,1,1),new Ng(0,1,1,1),new Ng(3,1,1,1),new Ng(1,1,1,1),new Ng(3,0,1,1),new Ng(1,0,1,1)],this._cubeDirections=[new Ig(1,0,0),new Ig(-1,0,0),new Ig(0,0,1),new Ig(0,0,-1),new Ig(0,1,0),new Ig(0,-1,0)],this._cubeUps=[new Ig(0,1,0),new Ig(0,1,0),new Ig(0,1,0),new Ig(0,1,0),new Ig(0,0,1),new Ig(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),qb.setFromMatrixPosition(e.matrixWorld),n.position.copy(qb),Yb.copy(n.position),Yb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Yb),n.updateMatrixWorld(),i.makeTranslation(-qb.x,-qb.y,-qb.z),Xb.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Xb)}}class Kb extends Bb{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new $b}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Zb extends Wb{constructor(){super(new m_(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Qb extends Bb{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Dv.DEFAULT_UP),this.updateMatrix(),this.target=new Dv,this.shadow=new Zb}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Jb extends Bb{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}function eS({src:e,mimeType:t,fileExtension:n,maxHeight:i=400,showControls:r=!0}){const a=V.useRef(null),s=V.useRef(null),o=V.useRef(null),c=V.useRef(null),u=V.useRef(null),d=V.useRef(void 0),[h,f]=V.useState(null),[p,m]=V.useState(!0),[g,v]=V.useState(1),[x,_]=V.useState(!0),[y,b]=V.useState(!1),[S,M]=V.useState({x:0,y:0}),w=V.useRef({x:0,y:0}),E=G.useMemo(()=>["gltf","glb","obj"].some(e=>t.includes(e))||["gltf","glb","obj","stl"].includes((null==n?void 0:n.toLowerCase())||""),[t,n]),T=V.useCallback(()=>{if(!a.current)return;const e=a.current.clientWidth,t=a.current.clientHeight,n=new Fb;n.background=new Jv(16119285),s.current=n;const i=new Gx(75,e/t,.1,1e3);i.position.set(0,0,5),c.current=i;const r=new zb({antialias:!0});r.setSize(e,t),r.setPixelRatio(window.devicePixelRatio),r.shadowMap.enabled=!0,r.shadowMap.type=2,o.current=r;const l=new Jb(4210752,.4);n.add(l);const u=new Qb(16777215,.8);u.position.set(10,10,5),u.castShadow=!0,n.add(u);const d=new Kb(16777215,.5);d.position.set(-10,-10,-5),n.add(d),a.current.appendChild(r.domElement)},[]),A=V.useCallback(async()=>{if(s.current)try{m(!0),f(null);const t=await fetch(e);if(!t.ok)throw new Error("Failed to load model");const i=await t.arrayBuffer(),r=(null==n?void 0:n.toLowerCase())||"";let a=null;if("obj"===r){const e=(new TextDecoder).decode(i);a=C(e)}else if("stl"===r)a=N(i);else{const e=new Ox(2,2,2),t=new jb({color:65280});a=new Ix(e,t)}if(a){const e=(new zg).setFromObject(a),t=e.getCenter(new Ig),n=e.getSize(new Ig);a.position.sub(t);const i=3/Math.max(n.x,n.y,n.z);a.scale.setScalar(i),u.current&&s.current.remove(u.current),s.current.add(a),u.current=a}m(!1)}catch(ES){f("Failed to load 3D model"),m(!1)}},[e,n]),C=e=>{const t=e.split("\n"),n=[],i=[];for(const s of t){const e=s.trim().split(/\s+/);if("v"===e[0])n.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));else if("f"===e[0])for(let t=1;t<e.length;t++){const n=parseInt(e[t].split("/")[0])-1;i.push(n)}}const r=new vx;r.setAttribute("position",new cx(n,3)),r.setIndex(i),r.computeVertexNormals();const a=new jb({color:8947848});return new Ix(r,a)},N=e=>{const t=new DataView(e);if(e.byteLength<80||50*t.getUint32(80,!0)+84!==e.byteLength){const t=[],n=(new TextDecoder).decode(e).split("\n");for(const e of n)if(e.trim().startsWith("vertex")){const n=e.trim().split(/\s+/).slice(1);t.push(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]))}const i=new vx;i.setAttribute("position",new cx(t,3)),i.computeVertexNormals();const r=new jb({color:11184810});return new Ix(i,r)}{const e=t.getUint32(80,!0),n=[];for(let a=0;a<e;a++){const e=84+50*a;for(let i=0;i<3;i++){const r=e+12+12*i;n.push(t.getFloat32(r,!0),t.getFloat32(r+4,!0),t.getFloat32(r+8,!0))}}const i=new vx;i.setAttribute("position",new cx(n,3)),i.computeVertexNormals();const r=new jb({color:11184810});return new Ix(i,r)}},R=V.useCallback(()=>{o.current&&s.current&&c.current&&(u.current&&(x&&(u.current.rotation.y+=.01),u.current.rotation.x=w.current.x,u.current.rotation.y+=w.current.y),c.current&&c.current.position.setLength(5/g),o.current.render(s.current,c.current),d.current=requestAnimationFrame(R))},[x,g]),L=()=>{b(!1)},P=async()=>{try{const t=await fetch(e),i=await t.blob(),r=URL.createObjectURL(i),a=document.createElement("a");a.href=r,a.download=`model.${n||"3d"}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}catch(ES){}};return V.useEffect(()=>(E&&(T(),A(),R()),()=>{d.current&&cancelAnimationFrame(d.current),o.current&&a.current&&(a.current.removeChild(o.current.domElement),o.current.dispose())}),[E,T,A,R]),V.useEffect(()=>{const e=()=>{if(o.current&&c.current&&a.current){const e=a.current.clientWidth,t=a.current.clientHeight;c.current.aspect=e/t,c.current.updateProjectionMatrix(),o.current.setSize(e,t)}};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),E?l.jsxs("div",{className:"w-full h-full flex flex-col bg-white dark:bg-gray-900",children:[r&&l.jsxs("div",{className:"flex justify-between items-center p-2 border-b bg-gray-50 dark:bg-gray-800",children:[l.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[l.jsx("span",{className:"font-mono",children:"3D Model"}),l.jsx("span",{className:"ml-2",children:null==n?void 0:n.toUpperCase()}),p&&l.jsx("span",{className:"ml-2 text-blue-500",children:"Loading..."}),h&&l.jsx("span",{className:"ml-2 text-red-500",children:"Error"})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>v(e=>Math.max(e/1.2,.1)),className:"h-6 px-2 text-xs",disabled:p,children:l.jsx(bp,{className:"h-3 w-3"})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>v(e=>Math.min(1.2*e,5)),className:"h-6 px-2 text-xs",disabled:p,children:l.jsx(yp,{className:"h-3 w-3"})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>{v(1),w.current={x:0,y:0},_(!0)},className:"h-6 px-2 text-xs",disabled:p,children:l.jsx(up,{className:"h-3 w-3"})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>_(!x),className:"h-6 px-2 text-xs",disabled:p,children:l.jsx(ip,{className:"h-3 w-3"})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:P,className:"h-6 px-2 text-xs",children:l.jsx(qf,{className:"h-3 w-3"})})]})]}),l.jsxs("div",{ref:a,className:"flex-1 relative cursor-grab active:cursor-grabbing w-full h-full",style:{maxHeight:i-(r?60:0),minHeight:"200px"},onMouseDown:e=>{b(!0),_(!1),M({x:e.clientX,y:e.clientY})},onMouseMove:e=>{if(!y)return;const t=e.clientX-S.x,n=e.clientY-S.y;w.current.x+=.01*n,w.current.y+=.01*t,M({x:e.clientX,y:e.clientY})},onMouseUp:L,onMouseLeave:L,children:[p&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800 z-10",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin text-2xl mb-2",children:"⚙️"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Loading 3D model..."})]})}),h&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50 dark:bg-red-900/20 z-10",children:l.jsxs("div",{className:"text-center text-red-600 dark:text-red-400",children:[l.jsx("div",{className:"text-2xl mb-2",children:"⚠️"}),l.jsx("div",{className:"text-sm",children:h})]})})]})]}):l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx("div",{className:"text-2xl mb-2",children:"🎮"}),l.jsx("div",{className:"text-sm",children:"3D Model Viewer"}),l.jsxs("div",{className:"text-xs mt-1 text-gray-400",children:[(null==n?void 0:n.toUpperCase())||"Unknown"," format"]}),l.jsx("div",{className:"text-xs mt-2 text-red-500",children:"Format not yet supported"}),l.jsx("div",{className:"mt-3",children:l.jsxs(Sp,{variant:"outline",size:"sm",onClick:P,className:"text-xs",children:[l.jsx(qf,{className:"h-3 w-3 mr-1"}),"Download Model"]})})]})})}function tS({src:e,mimeType:t,fileExtension:n,maxHeight:i=400,showControls:r=!0}){const[a,s]=G.useState(!0),[o,c]=G.useState(null),[u,d]=G.useState(0),h=G.useRef(null),f=()=>{s(!0),c(null),d(e=>e+1),h.current&&(h.current.src=e+`?retry=${u}`)},p=()=>{window.open(e,"_blank")};return l.jsxs("div",{className:"w-full h-full flex flex-col bg-white dark:bg-gray-900",children:[r&&l.jsxs("div",{className:"flex justify-between items-center p-2 border-b bg-gray-50 dark:bg-gray-800",children:[l.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[l.jsx("span",{className:"font-mono",children:(null==n?void 0:n.toUpperCase())||t.split("/")[1].toUpperCase()}),l.jsx("span",{className:"ml-2 text-gray-500",children:"(iframe)"})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:f,className:"h-6 px-2 text-xs",children:[l.jsx(cp,{className:"h-3 w-3 mr-1"}),"Retry"]}),l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:p,className:"h-6 px-2 text-xs",children:[l.jsx($f,{className:"h-3 w-3 mr-1"}),"Open"]}),l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:async()=>{try{const t=await fetch(e),i=await t.blob(),r=URL.createObjectURL(i),a=document.createElement("a");a.href=r,a.download=`content.${n||"bin"}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}catch(ES){}},className:"h-6 px-2 text-xs",children:[l.jsx(qf,{className:"h-3 w-3 mr-1"}),"Download"]})]})]}),l.jsxs("div",{className:"flex-1 relative bg-white dark:bg-gray-900",children:[l.jsx("iframe",{ref:h,src:e,className:"w-full h-full border-0",style:{maxHeight:i},sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox",onLoad:()=>{s(!1),c(null)},onError:()=>{s(!1),c("Failed to load content in iframe")},title:`Content: ${n||t}`}),a&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),l.jsx("div",{className:"text-sm",children:"Loading content..."}),l.jsxs("div",{className:"text-xs mt-1 text-gray-400",children:[t," • ",n]})]})}),o&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx("div",{className:"text-2xl mb-2",children:"⚠️"}),l.jsx("div",{className:"text-sm mb-2",children:o}),l.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:[t," • ",n]}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsxs(Sp,{variant:"outline",size:"sm",onClick:f,className:"text-xs",children:[l.jsx(cp,{className:"h-3 w-3 mr-1"}),"Retry"]}),l.jsxs(Sp,{variant:"outline",size:"sm",onClick:p,className:"text-xs",children:[l.jsx($f,{className:"h-3 w-3 mr-1"}),"Open External"]})]})]})})]})]})}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Pp}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=Pp));const nS=G.memo(function({inscriptionId:e,inscriptionNumber:t,contentUrl:n,contentType:i,size:r=400,className:a="",showHeader:s=!0,showControls:o=!0,autoLoad:c=!0,apiEndpoint:u,onAnalysisComplete:d}){const[h,f]=V.useState(null),[p,m]=V.useState(!1),[g,v]=V.useState(null),[x,_]=V.useState(""),y=V.useRef(!0),b=V.useRef(!1);V.useEffect(()=>(y.current=!0,()=>{y.current=!1}),[]);const S=G.useMemo(()=>{if(null==n?void 0:n.startsWith("http"))return n;if(u){const n=u.endsWith("/")?u.slice(0,-1):u;if(e)return u.includes("/r/")||u.includes("recursive")?`${n}/r/inscription/${e}`:`${n}/content/${e}`;if(t)return`${n}/content/${t}`}return e?`https://ordinals.com/content/${e}`:t?`https://ordinals.com/content/${t}`:"https://ordinals.com/content/unknown"},[n,u,e,t]),M=V.useCallback(async()=>{if(y.current&&!b.current){b.current=!0,m(!0),v(null),_("Checking cache...");try{const i=wp.get(e);if(i&&i.contentType&&y.current){let t,n;if(_("Loading from cache..."),i.contentType.startsWith("text/")||i.contentType.includes("json")||i.contentType.includes("html"))n=i.content,t=new Blob([n||""],{type:i.contentType});else try{const e=atob(i.content),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);t=new Blob([n],{type:i.contentType})}catch(wS){wp.delete(e),t=void 0}if(t){const e=await Mp(S);if(!y.current)return;const i=URL.createObjectURL(t);return f({url:i,blob:t,text:n,analysis:e}),m(!1),_(""),void(null==d||d(e))}}_("Analyzing content...");const r=await Mp(S);if(!y.current)return;if(r.error)throw new Error(`Analysis failed: ${r.error}`);if(!r.contentInfo)throw new Error("Analysis completed but no content info available");null==d||d(r),_("Loading content...");const{contentInfo:a}=r;let s,o,l;try{if("text"===a.detectedType||"json"===a.detectedType||"html"===a.detectedType){const e=await fetch(S);if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);o=await e.text(),l=o,s=new Blob([o],{type:a.mimeType})}else{const e=await fetch(S);if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);s=await e.blob();const t=await s.arrayBuffer(),n=new Uint8Array(t);if(n.length>5e4){let e="";const t=8192;for(let i=0;i<n.length;i+=t){const r=n.slice(i,i+t);e+=String.fromCharCode.apply(null,Array.from(r))}l=btoa(e)}else l=btoa(String.fromCharCode.apply(null,Array.from(n)))}}catch(t){throw new Error(`Content loading failed: ${t.message}`)}if(!y.current)return;_("Caching content...");try{wp.set(e,l,a.mimeType)}catch(n){}const c=URL.createObjectURL(s);f({url:c,blob:s,text:o,analysis:r}),m(!1),_("")}catch(ES){y.current&&(v(ES.message||"Failed to load content"),m(!1),_(""))}finally{b.current=!1}}},[S,e,d]),w=V.useCallback(()=>{(null==h?void 0:h.url)&&URL.revokeObjectURL(h.url),f(null),v(null),b.current=!1,setTimeout(()=>{y.current&&M()},50)},[h]);V.useEffect(()=>{if(c&&!p&&!h&&y.current){const e=setTimeout(()=>{y.current&&M()},100);return()=>{clearTimeout(e)}}},[c,e,S,p,h]),V.useEffect(()=>()=>{y.current=!1,(null==h?void 0:h.url)&&URL.revokeObjectURL(h.url)},[]),V.useEffect(()=>()=>{(null==h?void 0:h.url)&&URL.revokeObjectURL(h.url)},[h]);const E=s?40:0;return l.jsxs("div",{className:`border rounded-lg shadow-sm bg-white dark:bg-gray-900 overflow-hidden ${a}`,style:{width:"100%",height:"100%",minWidth:r,minHeight:r,maxWidth:"100%",maxHeight:"100%",display:"flex",flexDirection:"column"},children:[s&&l.jsxs("div",{className:"px-3 py-2 bg-gray-100 dark:bg-gray-800 border-b text-xs flex justify-between items-center h-10 flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-gray-600 dark:text-gray-400 truncate",children:["#",t||"N/A"]}),h&&l.jsx("span",{className:"text-gray-500 dark:text-gray-500 truncate",title:h.analysis.contentInfo.mimeType,children:h.analysis.contentInfo.detectedType})]}),g&&l.jsxs(Sp,{variant:"ghost",size:"sm",onClick:w,className:"h-6 px-2 text-xs text-blue-500 hover:text-blue-700",children:[l.jsx(cp,{className:"h-3 w-3 mr-1"}),"Retry"]})]}),l.jsxs("div",{className:"relative flex-1 w-full h-full flex items-center justify-center overflow-hidden",style:{minHeight:r-E+"px"},children:[p&&l.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center z-10",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Jf,{className:"h-8 w-8 animate-spin text-blue-500 mx-auto mb-2"}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:x}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["#",t||"N/A"]})]})}),g&&!p&&l.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx(Wf,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),l.jsx("div",{className:"text-xs mb-2 max-w-48 px-2",children:g}),l.jsxs(Sp,{variant:"outline",size:"sm",onClick:w,className:"text-xs",children:[l.jsx(cp,{className:"h-3 w-3 mr-1"}),"Retry"]}),l.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["#",t||"N/A"]})]})}),h&&!p&&!g&&l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:(()=>{if(!h)return null;const{contentInfo:n}=h.analysis,i=r-(s?40:0)-(o?40:0);switch(n.detectedType){case"text":return l.jsx(Ep,{content:h.text||"",mimeType:n.mimeType,fileExtension:n.fileExtension,maxHeight:i,showControls:o});case"json":return l.jsx(Rp,{content:h.text||"",mimeType:n.mimeType,maxHeight:i,showControls:o});case"html":return l.jsx(Lp,{content:h.text||"",src:h.url,mimeType:n.mimeType,maxHeight:i,showControls:o});case"image":case"svg":return l.jsx(Tp,{src:h.url,alt:`Inscription ${t||e}`,mimeType:n.mimeType,fileExtension:n.fileExtension,maxHeight:i,showControls:o});case"video":return l.jsx(Cp,{src:h.url,mimeType:n.mimeType,fileExtension:n.fileExtension,maxHeight:i,showControls:o});case"audio":return l.jsx(Np,{src:h.url,mimeType:n.mimeType,fileExtension:n.fileExtension,maxHeight:i,showControls:o});case"3d":return l.jsx(eS,{src:h.url,mimeType:n.mimeType,fileExtension:n.fileExtension,maxHeight:i,showControls:o});default:return l.jsx(tS,{src:h.url,mimeType:n.mimeType,maxHeight:i,showControls:o})}})()}),!c&&!h&&!p&&!g&&l.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Sp,{variant:"outline",onClick:M,className:"text-sm",children:"Load Content"}),l.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["#",t||"N/A"]})]})})]})]})}),iS=({open:e,onOpenChange:t,children:n})=>{const i=V.useRef(null);V.useEffect(()=>{const t=i.current;t&&(e?t.showModal():t.close())},[e]);const r=()=>{t(!1)};return e?l.jsx("dialog",{ref:i,className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm p-4",onClick:e=>{e.target===e.currentTarget&&r()},onClose:r,children:l.jsx("div",{className:"relative bg-white rounded-lg shadow-lg max-w-lg w-full mx-auto mt-20 p-0",children:n})}):null},rS=({children:e,className:t="",hideCloseButton:n=!1})=>l.jsxs("div",{className:`p-6 ${t}`,children:[e,!n&&l.jsx("button",{className:"absolute top-2 right-2 p-2 text-gray-400 hover:text-gray-600",onClick:()=>window.dispatchEvent(new Event("dialog-close")),children:"×"})]}),aS=({children:e,className:t=""})=>l.jsx("div",{className:`mb-4 ${t}`,children:e}),sS=({children:e,className:t=""})=>l.jsx("h2",{className:`text-lg font-semibold text-gray-900 ${t}`,children:e}),oS=({children:e,asChild:t=!1,onClick:n})=>t?l.jsx("div",{onClick:n,children:e}):l.jsx("button",{onClick:n,children:e}),lS={sm:{size:400,className:"max-w-md"},md:{size:600,className:"max-w-2xl"},lg:{size:800,className:"max-w-4xl"},xl:{size:1e3,className:"max-w-6xl"},full:{size:1200,className:"max-w-[95vw] max-h-[95vh]"}};function cS({inscriptionId:e,inscriptionNumber:t,contentUrl:n,contentType:i,trigger:r,triggerClassName:a="",modalSize:s="lg",showTriggerButton:o=!0}){const[c,u]=G.useState(!1),[d,h]=G.useState(null),{size:f,className:p}=lS[s],m=r||(o?l.jsxs(Sp,{variant:"outline",size:"sm",className:a,children:[l.jsx(Zf,{className:"h-4 w-4 mr-2"}),"View Content"]}):null);return m?l.jsxs(iS,{open:c,onOpenChange:u,children:[l.jsx(oS,{asChild:!0,children:m}),l.jsxs(rS,{className:`${p} p-0 gap-0`,hideCloseButton:!1,children:[l.jsx(aS,{className:"px-6 py-4 border-b",children:l.jsx(sS,{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-lg font-semibold",children:["Inscription #",t||"N/A"]}),d&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[l.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs",children:d.contentInfo.detectedType}),l.jsx("span",{className:"text-xs font-mono",children:d.contentInfo.mimeType})]})]})})}),l.jsxs("div",{className:"flex-1 p-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx(nS,{inscriptionId:e,inscriptionNumber:t,contentUrl:n,contentType:i,size:f,showHeader:!1,showControls:!0,autoLoad:!0,onAnalysisComplete:e=>{h(e)}})}),d&&l.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-medium mb-2",children:"Content Details"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),l.jsx("span",{className:"ml-2 font-mono",children:d.contentInfo.detectedType})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"MIME:"}),l.jsx("span",{className:"ml-2 font-mono",children:d.contentInfo.mimeType})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Strategy:"}),l.jsx("span",{className:"ml-2 font-mono",children:d.contentInfo.renderStrategy})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Extension:"}),l.jsx("span",{className:"ml-2 font-mono",children:d.contentInfo.fileExtension||"unknown"})]}),d.contentInfo.encoding&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Encoding:"}),l.jsx("span",{className:"ml-2 font-mono",children:d.contentInfo.encoding})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Inline:"}),l.jsx("span",{className:"ml-2",children:d.contentInfo.isInlineable?"✅":"❌"})]})]}),d.preview&&l.jsxs("div",{className:"mt-3",children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Preview:"}),l.jsx("pre",{className:"mt-1 p-2 bg-white dark:bg-gray-900 rounded text-xs font-mono overflow-hidden",children:d.preview})]})]})]})]})]}):null}function uS({inscriptionId:e,contentUrl:t,className:n="",onLoad:i,onError:r,threshold:a=.1}){const[s,o]=V.useState(!1),[c,u]=V.useState(!1),d=V.useRef(null);return V.useEffect(()=>{const e=new IntersectionObserver(([e])=>{e.isIntersecting&&!c&&(o(!0),u(!0))},{threshold:a});return d.current&&e.observe(d.current),()=>{d.current&&e.unobserve(d.current)}},[a,c]),l.jsx("div",{ref:d,className:`lazy-inscription-card ${n}`,style:{minHeight:"200px"},children:s?l.jsx(nS,{inscriptionId:e,contentUrl:t}):l.jsx("div",{className:"flex items-center justify-center h-48 bg-gray-100 rounded-lg",children:l.jsx("div",{className:"text-gray-500",children:"Loading..."})})})}const dS=G.memo(function({inscriptions:e,cardSize:t=300,showHeaders:n=!0,showControls:i=!0,autoLoad:r=!0,gridCols:a=3,gap:s=16,lazy:o=!1,enableModal:c=!1,apiEndpoint:u,className:d=""}){const h=V.useMemo(()=>function(e){if(e&&"object"==typeof e&&!Array.isArray(e)){if("ids"in e&&Array.isArray(e.ids))return e.ids.map((e,t)=>({id:e,number:t+1}));if("children"in e&&Array.isArray(e.children))return e.children.map((e,t)=>({id:e.id,number:e.number||t+1,contentUrl:e.contentUrl,contentType:e.contentType}))}return Array.isArray(e)?e.map((e,t)=>"string"==typeof e?{id:e,number:t+1}:e):[]}(e),[e]),f=V.useMemo(()=>({display:"grid",gridTemplateColumns:`repeat(${a}, 1fr)`,gap:`${s}px`,width:"100%",height:"auto"}),[a,s]),p=V.useCallback((e,a)=>{const s=e.id||`inscription-${a}`,d={inscriptionId:e.id,inscriptionNumber:e.number,contentUrl:e.contentUrl,contentType:e.contentType,size:t,showHeader:n,showControls:i,autoLoad:r,apiEndpoint:u};return c?l.jsx(cS,{...d,modalSize:"lg",showTriggerButton:!0},s):o?l.jsx(uS,{...d,className:"inscription-card"},s):l.jsx("div",{className:"inscription-card border rounded-lg overflow-hidden shadow-sm w-full h-full min-w-0 min-h-0",children:l.jsx(nS,{...d,className:"w-full h-full"})},s)},[t,n,i,r,c,o]);return 0===h.length?l.jsx("div",{className:`inscription-viewer-empty ${d}`,children:l.jsx("div",{className:"text-center py-12 text-gray-500",children:l.jsx("p",{children:"No inscriptions to display"})})}):l.jsx("div",{className:`inscription-viewer ${d}`,children:l.jsx("div",{style:f,children:h.map(p)})})}),hS=[{id:"content",label:"Content",description:"Get inscription content directly",baseUrl:"https://ordinals.com/content/",example:"6fb976ab49dcec017f1e201e84395983204ae1a7c2abf7ced0a85d692e442799i0",requiresId:!0},{id:"r_inscription",label:"Inscription Info (Recursive)",description:"Get inscription information via recursive endpoint",baseUrl:"https://ordinals.com/r/inscription/",example:"6fb976ab49dcec017f1e201e84395983204ae1a7c2abf7ced0a85d692e442799i0",requiresId:!0},{id:"inscription",label:"Inscription Details (Node Required)",description:"Get detailed inscription metadata (requires full node)",baseUrl:"https://ordinals.com/inscription/",example:"6fb976ab49dcec017f1e201e84395983204ae1a7c2abf7ced0a85d692e442799i0",requiresId:!0},{id:"r_inscriptions",label:"Latest Inscriptions (Recursive)",description:"Get latest inscriptions via recursive endpoint",baseUrl:"https://ordinals.com/r/inscriptions",example:"No ID required - fetches latest",requiresId:!1,multipleResults:!0},{id:"inscriptions",label:"Latest Inscriptions (Node Required)",description:"Get list of latest inscriptions (requires full node)",baseUrl:"https://ordinals.com/inscriptions",example:"No ID required - fetches latest",requiresId:!1,multipleResults:!0},{id:"r_children",label:"Child Inscriptions (Recursive)",description:"Get child inscription IDs via recursive endpoint",baseUrl:"https://ordinals.com/r/children/",example:"e317a2a5d68bd1004ae15a06175a319272a10389ff125c98820389edef8b0a94i0",requiresId:!0,multipleResults:!0},{id:"r_children_inscriptions",label:"Child Details (Recursive)",description:"Get detailed child inscription info via recursive endpoint",baseUrl:"https://ordinals.com/r/children/",example:"e317a2a5d68bd1004ae15a06175a319272a10389ff125c98820389edef8b0a94i0/inscriptions",requiresId:!0,multipleResults:!0},{id:"r_parents",label:"Parent Inscriptions (Recursive)",description:"Get parent inscription IDs via recursive endpoint",baseUrl:"https://ordinals.com/r/parents/",example:"b1ef66c2d1a047cbaa6260b74daac43813924378fe08ef8545da4cb79e8fcf00i0",requiresId:!0,multipleResults:!0},{id:"r_parents_inscriptions",label:"Parent Details (Recursive)",description:"Get detailed parent inscription info via recursive endpoint",baseUrl:"https://ordinals.com/r/parents/",example:"b1ef66c2d1a047cbaa6260b74daac43813924378fe08ef8545da4cb79e8fcf00i0/inscriptions",requiresId:!0,multipleResults:!0},{id:"r_sat",label:"Sat Inscriptions (Recursive)",description:"Get inscription IDs on a sat via recursive endpoint",baseUrl:"https://ordinals.com/r/sat/",example:"153899938226999",requiresId:!0,multipleResults:!0},{id:"r_metadata",label:"Metadata (Recursive)",description:"Get hex-encoded CBOR metadata via recursive endpoint",baseUrl:"https://ordinals.com/r/metadata/",example:"b1ef66c2d1a047cbaa6260b74daac43813924378fe08ef8545da4cb79e8fcf00i0",requiresId:!0},{id:"r_tx",label:"Transaction (Recursive)",description:"Get hex-encoded transaction via recursive endpoint",baseUrl:"https://ordinals.com/r/tx/",example:"60bcf821240064a9c55225c4f01711b0ebbcab39aa3fafeefe4299ab158536fa",requiresId:!0},{id:"r_utxo",label:"UTXO Assets (Recursive)",description:"Get assets in UTXO via recursive endpoint",baseUrl:"https://ordinals.com/r/utxo/",example:"4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b:0",requiresId:!0},{id:"sat",label:"Sat Info (Node Required)",description:"Get satoshi information (requires full node)",baseUrl:"https://ordinals.com/sat/",example:"1023795949035695",requiresId:!0},{id:"address",label:"Address Assets (Node Required)",description:"Get all assets of an address (requires full node)",baseUrl:"https://ordinals.com/address/",example:"bc1pdrm7tcyk4k6c3cdcjwkp49jmfrwmtvt0dvqyy7y4qp79tgks4lmqdpj6rw",requiresId:!0},{id:"output",label:"Output Info (Node Required)",description:"Get UTXO information (requires full node)",baseUrl:"https://ordinals.com/output/",example:"bc4c30829a9564c0d58e6287195622b53ced54a25711d1b86be7cd3a70ef61ed:0",requiresId:!0}],fS=G.memo(()=>{const[e,t]=V.useState([{id:"1",value:"6fb976ab49dcec017f1e201e84395983204ae1a7c2abf7ced0a85d692e442799i0",endpoint:"r_inscription"}]),[n,i]=V.useState("grid"),[r,a]=V.useState(300),[s,o]=V.useState(3),[c,u]=V.useState(!0),[d,h]=V.useState(!0),[f,p]=V.useState(!0),[m,g]=V.useState(null),v=V.useCallback(()=>{const n=(e.length+1).toString();t(e=>[...e,{id:n,value:"",endpoint:"r_inscription"}])},[e.length]),x=V.useCallback(e=>{t(t=>t.filter(t=>t.id!==e))},[]),_=V.useCallback((e,n,i)=>{t(t=>t.map(t=>t.id===e?{...t,[n]:i}:t))},[]),y=V.useCallback(async e=>{try{await navigator.clipboard.writeText(e),g(e),setTimeout(()=>g(null),2e3)}catch(ES){}},[]),b=V.useMemo(()=>{const t=e.filter(e=>""!==e.value.trim());return 0===t.length?[]:t.map(e=>{const t=hS.find(t=>t.id===e.endpoint);if(!t)return{id:e.value,number:e.id,contentUrl:`https://ordinals.com/content/${e.value}`};if(t.requiresId){let n=`${t.baseUrl}${e.value}`;return"r_children_inscriptions"===t.id?n=`https://ordinals.com/r/children/${e.value}/inscriptions`:"r_parents_inscriptions"===t.id&&(n=`https://ordinals.com/r/parents/${e.value}/inscriptions`),{id:e.value,number:e.id,contentUrl:n}}return{id:`${t.id}-${e.id}`,number:e.id,contentUrl:t.baseUrl}})},[e]),S=V.useCallback(()=>{const t={inputs:e,settings:{displayMode:n,cardSize:r,gridCols:s,autoLoad:c,showHeaders:d,showControls:f},timestamp:(new Date).toISOString()},i=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(i),o=document.createElement("a");o.href=a,o.download="inscription-explorer-config.json",o.click(),URL.revokeObjectURL(a)},[e,n,r,s,c,d,f]);return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50",children:[l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"🔍 Bitcoin Inscription Explorer"}),l.jsx("p",{className:"text-lg text-gray-600",children:"Explore Bitcoin inscriptions using various API endpoints"})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[l.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[l.jsx(hp,{className:"mr-2",size:24}),"Inscription Inputs"]}),l.jsx("div",{className:"space-y-4 mb-6",children:e.map((t,n)=>{const i=hS.find(e=>e.id===t.endpoint);return l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Inscription ID / Value #",n+1]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:t.value,onChange:e=>_(t.id,"value",e.target.value),placeholder:(null==i?void 0:i.example)||"Enter inscription ID",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),l.jsxs(Sp,{onClick:()=>y(t.value),variant:"outline",size:"sm",disabled:!t.value,className:m===t.value?"bg-green-100 text-green-700":"",children:[l.jsx(Xf,{size:16}),m===t.value&&l.jsx("span",{className:"ml-1 text-xs",children:"✓"})]})]})]}),l.jsxs("div",{className:"lg:w-64",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Endpoint"}),l.jsx("select",{value:t.endpoint,onChange:e=>_(t.id,"endpoint",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:hS.map(e=>l.jsx("option",{value:e.id,children:e.label},e.id))})]}),l.jsx("div",{className:"flex items-end",children:l.jsx(Sp,{onClick:()=>x(t.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:1===e.length,children:l.jsx(gp,{size:16})})})]},t.id)})}),l.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[l.jsxs(Sp,{onClick:v,className:"flex items-center",children:[l.jsx(sp,{size:16,className:"mr-2"}),"Add Inscription"]}),l.jsxs(Sp,{onClick:S,variant:"outline",className:"flex items-center",children:[l.jsx(qf,{size:16,className:"mr-2"}),"Export Config"]})]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[l.jsxs("h3",{className:"font-medium text-blue-900 mb-2 flex items-center",children:[l.jsx(Qf,{size:16,className:"mr-2"}),"Available API Endpoints"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:hS.map(e=>l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:"font-medium text-blue-800",children:e.label}),l.jsx("div",{className:"text-blue-600",children:e.description}),l.jsxs("div",{className:"text-blue-500 text-xs mt-1",children:[e.baseUrl,e.requiresId&&"{id}"]})]},e.id))})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Display Settings"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Mode"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Sp,{onClick:()=>i("grid"),variant:"grid"===n?"default":"outline",size:"sm",children:"Grid"}),l.jsx(Sp,{onClick:()=>i("list"),variant:"list"===n?"default":"outline",size:"sm",children:"List"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Card Size: ",r,"px"]}),l.jsx("input",{type:"range",min:"200",max:"600",step:"50",value:r,onChange:e=>a(parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Grid Columns: ",s]}),l.jsx("input",{type:"range",min:"1",max:"6",step:"1",value:s,onChange:e=>o(parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"autoLoad",checked:c,onChange:e=>u(e.target.checked),className:"w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500 focus:ring-2"}),l.jsx("label",{htmlFor:"autoLoad",className:"text-sm font-medium text-gray-700",children:"Auto Load Content"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"showHeaders",checked:d,onChange:e=>h(e.target.checked),className:"w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500 focus:ring-2"}),l.jsx("label",{htmlFor:"showHeaders",className:"text-sm font-medium text-gray-700",children:"Show Headers"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"showControls",checked:f,onChange:e=>p(e.target.checked),className:"w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500 focus:ring-2"}),l.jsx("label",{htmlFor:"showControls",className:"text-sm font-medium text-gray-700",children:"Show Controls"})]})]})]}),b.length>0&&l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:["Inscription Results (",b.length,")"]}),l.jsx(dS,{inscriptions:b,cardSize:r,gridCols:"list"===n?1:s,showHeaders:d,showControls:f,autoLoad:c,className:"inscription-explorer-results"})]}),0===b.length&&l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[l.jsx("div",{className:"text-gray-400 mb-4",children:l.jsx(hp,{size:64,className:"mx-auto"})}),l.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"No Inscriptions to Display"}),l.jsx("p",{className:"text-gray-500",children:"Add some inscription IDs above to get started."})]})]}),l.jsx("style",{dangerouslySetInnerHTML:{__html:"\n          .slider::-webkit-slider-thumb {\n            appearance: none;\n            height: 20px;\n            width: 20px;\n            border-radius: 50%;\n            background: #f97316;\n            cursor: pointer;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n          }\n          \n          .slider::-moz-range-thumb {\n            height: 20px;\n            width: 20px;\n            border-radius: 50%;\n            background: #f97316;\n            cursor: pointer;\n            border: none;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n          }\n        "}})]})}),pS={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4",5:"grid-cols-1 md:grid-cols-3 lg:grid-cols-5",6:"grid-cols-1 md:grid-cols-3 lg:grid-cols-6"},mS=({inscriptionIds:e,apiEndpoint:t,columns:n=3,cardSize:i=200,showIndex:r=!1,enableModal:a=!1,loadingComponent:s,errorComponent:o,onInscriptionClick:c,className:u=""})=>e&&0!==e.length?a?l.jsx("div",{className:u,children:l.jsx(dS,{inscriptions:e,cardSize:i,gridCols:n,enableModal:!0,showHeaders:r,apiEndpoint:t,className:"inscription-gallery"})}):l.jsx("div",{className:`grid gap-4 ${pS[n]} ${u}`,style:{width:"100%"},children:e.map((e,n)=>l.jsx("div",{className:"flex justify-center",children:l.jsx(gS,{inscriptionId:e,index:r?n+1:void 0,size:i,apiEndpoint:t,onInscriptionClick:c})},e))}):l.jsx("div",{className:"text-center p-8 text-gray-500",children:l.jsx("p",{children:"No inscriptions to display"})}),gS=({inscriptionId:e,index:t,size:n,apiEndpoint:i,onInscriptionClick:r})=>{const[a,s]=V.useState(!0),[o,c]=V.useState(!1);return l.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden group",style:{width:n,height:n},children:[t&&l.jsxs("div",{className:"absolute top-2 left-2 z-20 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded",children:["#",t]}),a&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-10",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),l.jsx("div",{className:"text-xs text-gray-500",children:"Loading..."})]})}),o&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50 z-10",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-red-500 mb-2",children:"⚠️"}),l.jsx("div",{className:"text-xs text-red-600",children:"Failed to load"})]})}),l.jsxs("div",{className:"h-full flex flex-col relative",children:[l.jsx("div",{className:"flex-1 relative p-2",children:l.jsx(nS,{inscriptionId:e,size:n-8,showControls:!1,showHeader:!1,autoLoad:!0,apiEndpoint:i,className:"w-full h-full",onAnalysisComplete:e=>{s(!1),e.error&&c(!0)}})}),l.jsx("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-20",children:l.jsx(cS,{inscriptionId:e,trigger:l.jsx(Sp,{size:"sm",variant:"secondary",className:"bg-black bg-opacity-75 text-white border-none hover:bg-opacity-90 text-xs px-2 py-1",children:"ℹ️ Details"})})}),l.jsxs("div",{className:"absolute bottom-1 left-1 right-12 text-xs text-gray-400 truncate bg-white bg-opacity-75 px-1 rounded z-10",children:[e.slice(0,8),"...",e.slice(-4)]})]})]})},vS=({columns:e=3,cardSize:t=200,showIndex:n=!0,enableModal:i=!0,pageSize:r=20,className:a="",loadingComponent:s,errorComponent:o,onInscriptionClick:c,filterInscriptions:u})=>{const{getInscriptions:d,address:h}={getInscriptions:async(e,t)=>[],address:"bc1p..."},[f,p]=V.useState([]),[m,g]=V.useState(!0),[v,x]=V.useState(null),[_,y]=V.useState(0),[b,S]=V.useState(!0),M=async(e=0,t=!1)=>{try{g(!0),x(null);const n=await d(e,r);p(t||0===e?n:e=>[...e,...n]),S(n.length===r),y(e+n.length)}catch(ES){x(ES instanceof Error?ES.message:"Failed to fetch inscriptions")}finally{g(!1)}};V.useEffect(()=>{M(0,!0)},[h]);const w=()=>{y(0),M(0,!0)},E=u?u(f):f,T=E.map(e=>e.inscriptionId),A=l.jsxs("div",{className:"flex flex-col items-center justify-center p-12 space-y-4",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),l.jsx("p",{className:"text-lg text-gray-600",children:"Loading your inscriptions..."})]}),C=l.jsxs("div",{className:"text-center p-8 text-red-500 space-y-4",children:[l.jsx("p",{className:"text-lg",children:"⚠️ Error loading inscriptions"}),l.jsx("p",{className:"text-sm",children:v}),l.jsx("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Try Again"})]});return m&&0===f.length?s||A:v&&0===f.length?o||C:l.jsxs("div",{className:`space-y-6 ${a}`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Inscriptions"}),l.jsxs("p",{className:"text-gray-600",children:[E.length," inscription",1!==E.length?"s":"",u&&f.length!==E.length&&` (${f.length} total)`]})]}),l.jsx("button",{onClick:w,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:m?"Refreshing...":"Refresh"})]}),T.length>0?l.jsxs(l.Fragment,{children:[l.jsx(mS,{inscriptionIds:T,columns:e,cardSize:t,showIndex:n,enableModal:i,onInscriptionClick:e=>{const t=E.find(t=>t.inscriptionId===e.id);t&&c&&c(t)},className:"inscription-gallery"}),b&&l.jsx("div",{className:"text-center",children:l.jsx("button",{onClick:()=>{!m&&b&&M(_)},disabled:m,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50",children:m?"Loading...":"Load More"})})]}):l.jsxs("div",{className:"text-center p-12 text-gray-500",children:[l.jsx("p",{className:"text-lg",children:"No inscriptions found"}),l.jsx("p",{className:"text-sm",children:"This wallet doesn't have any inscriptions yet."})]})]})},xS=[{id:"dca3da701a2607de6c89dd0bfe6106532dcefe279d13b105301a2d85eb4ffaafi0",number:"1"},{id:"0e50a465fc0ca415f3cb8a4aac1555b12a4bf3f33bc039f2a4d39f809e83af7ai0",number:"2"},{id:"934905624f847731e7f173ba70bfa3a1389b0a7fe2a4ffce8793eef2730b9ab9i0",number:"3"},{id:"50a42e51e6ce0ef76699f017a1017d7b5b6203e67d283c625ba7d1567b2e43bai0",number:"4"},{id:"65a78bdbc1e01ac02cda181a71304a8d82305bc2a24bf01e62bea4cfff3e2dd8i0",number:"5"},{id:"05ab6d843099fb30a1da1bbfe31117cb56466b3ba40a4b3f389cc37174d339b8i0",number:"6"},{id:"47825a32dd6e3de5fd7d97488d755e6d1005e5c8552b9ede5bc67900b074d09bi0",number:"7"},{id:"737552653d4424a523f8c652710d0f9416561ea67ee25242f8606b49fb428d9ai0",number:"8"},{id:"1d7d15ab48fccf7011435584556ee9106be71f7073a857689594c143d7899333i0",number:"9"},{id:"321e4f598ae0f4841af04d1a84f3abafa44802c7d35315ead91b32ffed0f400di0",number:"10"}],_S=()=>{const[e,t]=V.useState("17fdb1b0d00718e78f1225bd3bab7f4fcf35db9dc810f820516e113ea9a827a1i0"),[n,i]=V.useState([]),[r,a]=V.useState(""),s=e=>{i(t=>[...t.slice(-15),`${(new Date).toLocaleTimeString()}: ${e}`])};return V.useEffect(()=>{s("DebugInscriptionTest component mounted")},[]),l.jsxs("div",{className:"p-4 bg-white rounded-lg border",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Debug Inscription Test"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Test Inscription ID:"}),l.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 border rounded-md text-sm font-mono mb-2"}),l.jsx("label",{className:"block text-sm font-medium mb-2",children:"API Endpoint (optional):"}),l.jsx("input",{type:"text",value:r,onChange:e=>a(e.target.value),placeholder:"https://ordinals.com",className:"w-full px-3 py-2 border rounded-md text-sm font-mono"})]}),l.jsx("div",{className:"mb-4",children:l.jsx(Sp,{onClick:()=>{s(`Testing with ID: ${e}`),t(e+"?t="+Date.now())},children:"Test Load"})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"InscriptionRenderer Test"}),l.jsx("div",{className:"border rounded",style:{width:200,height:200},children:l.jsx(nS,{inscriptionId:e.split("?")[0],size:200,showHeader:!0,showControls:!0,autoLoad:!0,apiEndpoint:r||void 0,onAnalysisComplete:e=>{var t,n;s(`Analysis complete: ${(null==(t=e.contentInfo)?void 0:t.detectedType)||"unknown"} (${(null==(n=e.contentInfo)?void 0:n.mimeType)||"unknown"})`),e.error&&s(`Analysis error: ${e.error}`)}},e)})]}),l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Debug Log"}),l.jsx("div",{className:"text-xs font-mono bg-gray-50 p-2 rounded max-h-48 overflow-y-auto",children:n.map((e,t)=>l.jsx("div",{className:"mb-1",children:e},t))}),l.jsx(Sp,{variant:"outline",size:"sm",onClick:()=>i([]),className:"mt-2",children:"Clear Log"})]})]})]})},yS=({className:e=""})=>{const[t,n]=V.useState(""),[i,r]=V.useState([]),[a,s]=V.useState(3),[o,c]=V.useState(200),[u,d]=V.useState(!0),[h,f]=V.useState(!1),[p,m]=V.useState(null),[g,v]=V.useState(!0),[x,_]=V.useState(""),[y,b]=V.useState("default"),[S,M]=V.useState(!1),w=V.useCallback(e=>{n(e.target.value)},[]),E=V.useCallback(()=>{const e=t.split(/[,\n\s]+/).map(e=>e.trim()).filter(e=>e.length>0&&e.includes("i0"));e.length>0&&(r(t=>{const n=[...t,...e];return Array.from(new Set(n))}),n(""))},[t]),T=V.useCallback(e=>{"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),E())},[E]),A=V.useCallback(()=>{const e=xS.slice(0,3).map(e=>e.id);r(t=>{const n=[...t,...e];return Array.from(new Set(n))})},[]),C=V.useCallback(()=>{r([])},[]),N=V.useCallback(e=>{r(t=>t.filter(t=>t!==e))},[]),R=V.useCallback(async e=>{try{await navigator.clipboard.writeText(e),m(e),setTimeout(()=>m(null),2e3)}catch(ES){}},[]),L=V.useCallback(async()=>{if(0!==i.length)try{await navigator.clipboard.writeText(i.join("\n")),m("all"),setTimeout(()=>m(null),2e3)}catch(ES){}},[i]),P=V.useMemo(()=>"undefined"!=typeof window&&window.innerWidth<640?Math.min(a,2):a,[a]);return l.jsxs("div",{className:`live-demo ${e}`,children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"🎮 Live Inscription Demo"}),l.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Add inscription IDs below and see them displayed in real time. Perfect for testing the viewer with your own inscriptions or exploring different layouts and configurations."})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[l.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[l.jsx(sp,{className:"mr-2",size:20}),"Add Inscription IDs"]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inscription IDs (one per line or comma-separated)"}),l.jsx("textarea",{value:t,onChange:w,onKeyPress:T,placeholder:"Paste inscription IDs here...\n6fb976ab49dcec017f1e201e84395983204ae1a7c2abf7ced0a85d692e442799i0\ne317a2a5d68bd1004ae15a06175a319272a10389ff125c98820389edef8b0a94i0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent h-32 text-sm font-mono resize-none"}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Tip: Press Ctrl+Enter (or Cmd+Enter) to add inscriptions quickly"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs(Sp,{onClick:E,disabled:!t.trim(),children:[l.jsx(sp,{size:16,className:"mr-1"}),"Add IDs"]}),l.jsxs(Sp,{variant:"outline",onClick:A,children:[l.jsx(cp,{size:16,className:"mr-1"}),"Load Sample"]}),l.jsxs(Sp,{variant:"outline",onClick:C,disabled:0===i.length,children:[l.jsx(gp,{size:16,className:"mr-1"}),"Clear All"]}),l.jsxs(Sp,{variant:"outline",onClick:L,disabled:0===i.length,className:"all"===p?"bg-green-100 text-green-700":"",children:[l.jsx(Xf,{size:16,className:"mr-1"}),"Copy All IDs","all"===p&&l.jsx("span",{className:"ml-1",children:"✓"})]})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Total Inscriptions:"})," ",i.length]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Grid Layout:"})," ",P," columns"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Card Size:"})," ",o,"px"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Modal:"})," ",h?"Enabled":"Disabled"]})]})})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[l.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:[l.jsx(hp,{className:"mr-2",size:20}),"Display Configuration"]}),l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Columns: ",a]}),l.jsx("input",{type:"range",min:"1",max:"6",value:a,onChange:e=>s(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsx("span",{children:"1"}),l.jsx("span",{children:"6"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Card Size: ",o,"px"]}),l.jsx("input",{type:"range",min:"100",max:"400",step:"50",value:o,onChange:e=>c(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsx("span",{children:"100px"}),l.jsx("span",{children:"400px"})]})]}),l.jsx("div",{className:"flex flex-col justify-center",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"showIndex",checked:u,onChange:e=>d(e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),l.jsx("label",{htmlFor:"showIndex",className:"text-sm font-medium text-gray-700",children:"Show Index Numbers"})]})}),l.jsx("div",{className:"flex flex-col justify-center",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"enableModal",checked:h,onChange:e=>f(e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),l.jsx("label",{htmlFor:"enableModal",className:"text-sm font-medium text-gray-700",children:"Enable Modal View"})]})})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[l.jsx("h3",{className:"text-xl font-semibold mb-4 flex items-center",children:"🌐 API Endpoint Configuration"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endpoint Type"}),l.jsxs("select",{value:y,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"default",children:"Default (ordinals.com/content)"}),l.jsx("option",{value:"recursive",children:"Recursive (ordinals.com/r/inscription)"}),l.jsx("option",{value:"custom",children:"Custom Endpoint"})]})]}),"custom"===y&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom API Endpoint"}),l.jsx("input",{type:"text",value:x,onChange:e=>_(e.target.value),placeholder:"https://your-api.com/content",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm"}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Your endpoint should accept inscription IDs and return the inscription content"})]}),l.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-sm",children:[l.jsx("strong",{children:"Current URL pattern:"}),l.jsx("code",{className:"ml-2 bg-white px-2 py-1 rounded text-xs",children:"custom"===y&&x?`${x}/[INSCRIPTION_ID]`:"recursive"===y?"https://ordinals.com/r/inscription/[INSCRIPTION_ID]":"https://ordinals.com/content/[INSCRIPTION_ID]"})]})]})]}),i.length>0&&l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"text-xl font-semibold flex items-center",children:[l.jsx(Zf,{className:"mr-2",size:20}),"Added Inscriptions (",i.length,")"]}),l.jsxs(Sp,{variant:"outline",size:"sm",onClick:()=>v(!g),children:[g?l.jsx(Kf,{size:16}):l.jsx(Zf,{size:16}),g?"Hide":"Show"," List"]})]}),g&&l.jsx("div",{className:"max-h-48 overflow-y-auto",children:l.jsx("div",{className:"space-y-2",children:i.map((e,t)=>l.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[l.jsxs("span",{className:"text-sm text-gray-500 w-8",children:["#",t+1]}),l.jsx("code",{className:"flex-1 text-sm font-mono bg-gray-100 px-2 py-1 rounded truncate",children:e}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>R(e),className:"h-8 w-8 p-0 "+(p===e?"bg-green-100 text-green-700":""),children:l.jsx(Xf,{size:12})}),l.jsx(Sp,{variant:"ghost",size:"sm",onClick:()=>N(e),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",children:l.jsx(_p,{size:12})})]})]},e))})})]}),i.length>0?l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"text-xl font-semibold flex items-center",children:[l.jsx(Zf,{className:"mr-2",size:20}),"Live Preview"]}),l.jsxs(Sp,{variant:"outline",size:"sm",onClick:()=>M(!S),children:[l.jsx(Gf,{size:16,className:"mr-1"}),S?"Hide Debug":"Show Debug"]})]}),S&&l.jsx("div",{className:"mb-6",children:l.jsx(_S,{})}),l.jsxs("p",{className:"text-gray-600 mb-6",children:[h?"Click on any inscription to view it in a modal":"Modal view is disabled",l.jsx("br",{}),l.jsxs("span",{className:"text-sm text-gray-500",children:["Loaded ",i.length," inscription(s) • Grid: ",P," columns • Size: ",o,"px"]})]}),l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:i.length>0?l.jsx(mS,{inscriptionIds:i,columns:P,cardSize:o,showIndex:u,enableModal:h,apiEndpoint:"custom"===y?x:"recursive"===y?"https://ordinals.com/r/inscription":void 0,onInscriptionClick:e=>{}}):l.jsx("div",{className:"text-center text-gray-500 py-8",children:"No inscriptions to display"})})]}):l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[l.jsx("div",{className:"text-gray-400 mb-4",children:l.jsx(hp,{size:64,className:"mx-auto"})}),l.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"No Inscriptions Added Yet"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"Add some inscription IDs above to see them displayed in real time"}),l.jsxs(Sp,{onClick:A,variant:"outline",children:[l.jsx(cp,{size:16,className:"mr-2"}),"Load Sample Inscriptions"]})]}),l.jsx("style",{dangerouslySetInnerHTML:{__html:"\n          .slider::-webkit-slider-thumb {\n            appearance: none;\n            height: 20px;\n            width: 20px;\n            border-radius: 50%;\n            background: #3b82f6;\n            cursor: pointer;\n          }\n          \n          .slider::-moz-range-thumb {\n            height: 20px;\n            width: 20px;\n            border-radius: 50%;\n            background: #3b82f6;\n            cursor: pointer;\n            border: none;\n          }\n        "}})]})},bS=({className:e=""})=>{const[t,n]=V.useState("square"),[i]=V.useState("6fb976ab49dcec017f1e201e84395983204ae1a7c2abf7ced0a85d692e442799i0"),r={square:{width:"300px",height:"300px"},wide:{width:"500px",height:"200px"},tall:{width:"200px",height:"500px"},small:{width:"150px",height:"150px"},large:{width:"600px",height:"600px"}},a=e=>{const t=r[e];return`${t.width} × ${t.height}`};return l.jsxs("div",{className:`p-6 space-y-6 ${e}`,children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Responsive Container Test"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Test how content adapts to different container sizes while maintaining aspect ratio and centering"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[l.jsxs(Sp,{variant:"square"===t?"default":"outline",size:"sm",onClick:()=>n("square"),className:"flex items-center gap-2",children:[l.jsx(mp,{className:"h-4 w-4"}),"Square ",a("square")]}),l.jsxs(Sp,{variant:"wide"===t?"default":"outline",size:"sm",onClick:()=>n("wide"),className:"flex items-center gap-2",children:[l.jsx(op,{className:"h-4 w-4"}),"Wide ",a("wide")]}),l.jsxs(Sp,{variant:"tall"===t?"default":"outline",size:"sm",onClick:()=>n("tall"),className:"flex items-center gap-2",children:[l.jsx(lp,{className:"h-4 w-4"}),"Tall ",a("tall")]}),l.jsxs(Sp,{variant:"small"===t?"default":"outline",size:"sm",onClick:()=>n("small"),className:"flex items-center gap-2",children:[l.jsx(tp,{className:"h-4 w-4"}),"Small ",a("small")]}),l.jsxs(Sp,{variant:"large"===t?"default":"outline",size:"sm",onClick:()=>n("large"),className:"flex items-center gap-2",children:[l.jsx(ep,{className:"h-4 w-4"}),"Large ",a("large")]})]}),l.jsx("div",{className:"flex justify-center",children:l.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 p-4 rounded-lg",children:[l.jsxs("div",{className:"text-xs text-gray-500 mb-2 text-center",children:["Container: ",a(t)]}),l.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",style:r[t],children:l.jsx(nS,{inscriptionId:i,inscriptionNumber:"Test",size:300,showHeader:!0,showControls:!0,autoLoad:!0,className:"w-full h-full"})})]})}),l.jsxs("div",{className:"max-w-2xl mx-auto bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-800 dark:text-blue-200",children:"What to Look For:"}),l.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[l.jsxs("li",{children:["• ",l.jsx("strong",{children:"Centering:"})," Content should be centered in the container"]}),l.jsxs("li",{children:["• ",l.jsx("strong",{children:"Aspect Ratio:"})," Content maintains its original proportions"]}),l.jsxs("li",{children:["• ",l.jsx("strong",{children:"Fluid Fill:"})," Content scales to fill available space optimally"]}),l.jsxs("li",{children:["• ",l.jsx("strong",{children:"No Overflow:"})," Content stays within container bounds"]}),l.jsxs("li",{children:["• ",l.jsx("strong",{children:"Responsive UI:"})," Controls and headers adapt to container size"]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-center",children:"Multiple Container Sizes"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(r).map(([e,t])=>l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[l.jsxs("div",{className:"text-sm font-medium capitalize",children:[e," (",a(e),")"]}),l.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",style:t,children:l.jsx(nS,{inscriptionId:i,inscriptionNumber:e,size:300,showHeader:!0,showControls:!1,autoLoad:!0,className:"w-full h-full"})})]},e))})]})]})};function SS(){const[e,t]=V.useState("home"),n=["6fb976ab49dcec017f1e201e84395983204ae1a7c2abf7ced0a85d692e442799i0","e317a2a5d68bd1004ae15a06175a319272a10389ff125c98820389edef8b0a94i0","b1ef66c2d1a047cbaa6260b74daac43813924378fe08ef8545da4cb79e8fcf00i0","9c4b3e7a8d2f1c5e6a7b9d8f3e4c5a2b1f8e7d6c9b4a5e3d2c1f9e8d7c6b5a4i0"],i=({icon:e,title:t,description:n})=>l.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"text-4xl mb-4",children:e}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:t}),l.jsx("p",{className:"text-gray-600",children:n})]}),r=({active:e,onClick:t,children:n})=>l.jsx(Sp,{variant:e?"default":"ghost",size:"sm",onClick:t,className:"text-sm",children:n}),a=()=>l.jsxs("div",{className:"space-y-16",children:[l.jsx("section",{className:"text-center py-16",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx("h1",{className:"text-5xl font-bold text-gray-900 mb-6",children:"🔍 Bitcoin Inscription Viewer"}),l.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:"A robust, production-ready React/TypeScript library for viewing Bitcoin Ordinals inscriptions. Features responsive design, multiple content type support, and flexible API endpoint configuration."}),l.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[l.jsx(Sp,{size:"lg",onClick:()=>t("live-demo"),className:"text-lg px-8 py-3",children:"🎮 Try Live Demo"}),l.jsx(Sp,{variant:"outline",size:"lg",onClick:()=>t("library-demo"),className:"text-lg px-8 py-3",children:"📚 View Library"})]})]})}),l.jsx("section",{className:"py-16 bg-white rounded-xl shadow-sm",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[l.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-12",children:"✨ Key Features"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[l.jsx(i,{icon:"🎨",title:"Responsive Design",description:"Content adapts fluidly to any container size while maintaining aspect ratio and perfect centering."}),l.jsx(i,{icon:"🔧",title:"Powerful API Integration",description:"Supports recursive endpoints, automatic fallback, and custom API server configuration."}),l.jsx(i,{icon:"🎯",title:"Universal Content Support",description:"Images, videos, audio, 3D models, JSON, text, and HTML with interactive controls."}),l.jsx(i,{icon:"🚀",title:"Developer Experience",description:"TypeScript-first with full type safety, flexible props, and comprehensive documentation."}),l.jsx(i,{icon:"💰",title:"Wallet Integration",description:"Ready-to-use LaserEyes wallet integration components for seamless Web3 experiences."}),l.jsx(i,{icon:"⚡",title:"Performance Optimized",description:"Lazy loading, intelligent caching, and tree-shakeable exports for optimal bundle size."})]})]})}),l.jsx("section",{className:"py-16",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-12",children:"🎬 Quick Preview"}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8",children:l.jsx(mS,{inscriptionIds:n.slice(0,3),columns:3,cardSize:250,showIndex:!0,enableModal:!0})})]})}),l.jsx("section",{className:"py-16 bg-gray-50 rounded-xl",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[l.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-8",children:"💻 Simple Integration"}),l.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 text-green-400 font-mono text-sm overflow-x-auto",children:[l.jsx("div",{className:"text-gray-500",children:"// Install the library"}),l.jsx("div",{className:"mb-4",children:"npm install bitcoin-inscription-viewer"}),l.jsx("div",{className:"text-gray-500",children:"// Use in your React app"}),l.jsx("div",{className:"text-blue-400",children:"import"})," ","{ InscriptionViewer }"," ",l.jsx("div",{className:"text-blue-400",children:"from"})," ",l.jsx("div",{className:"text-yellow-400",children:"'bitcoin-inscription-viewer'"}),";",l.jsx("br",{}),l.jsx("br",{}),l.jsx("div",{className:"text-blue-400",children:"function"})," ",l.jsx("div",{className:"text-green-300",children:"App"}),"() ","{",l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-blue-400",children:"return"})," (",l.jsxs("div",{className:"ml-4",children:["<",l.jsx("div",{className:"text-red-400",children:"InscriptionViewer"}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-green-300",children:"inscriptions"}),"=","{['6fb976ab...']}",l.jsx("br",{}),l.jsx("div",{className:"text-green-300",children:"cardSize"}),"=","{300}",l.jsx("br",{}),l.jsx("div",{className:"text-green-300",children:"gridCols"}),"=","{3}"]}),"/>"]}),");"]}),"}"]})]})}),l.jsx("section",{className:"text-center py-16",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Ready to Get Started?"}),l.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Explore our interactive demos and see how easy it is to integrate Bitcoin inscription viewing into your application."}),l.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[l.jsx(Sp,{size:"lg",onClick:()=>t("live-demo"),className:"text-lg px-8 py-3",children:"🎮 Live Demo"}),l.jsx(Sp,{variant:"outline",size:"lg",onClick:()=>t("responsive-test"),className:"text-lg px-8 py-3",children:"📐 Responsive Test"}),l.jsx(Sp,{variant:"outline",size:"lg",onClick:()=>t("explorer"),className:"text-lg px-8 py-3",children:"🔧 API Explorer"})]})]})})]});return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-100 to-gray-200",children:[l.jsx("nav",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex items-center justify-between h-16",children:[l.jsx("div",{className:"flex items-center cursor-pointer",onClick:()=>t("home"),children:l.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"🔍 Bitcoin Inscription Viewer"})}),l.jsxs("div",{className:"hidden md:flex gap-2",children:[l.jsx(r,{active:"home"===e,onClick:()=>t("home"),children:"🏠 Home"}),l.jsx(r,{active:"live-demo"===e,onClick:()=>t("live-demo"),children:"🎮 Live Demo"}),l.jsx(r,{active:"responsive-test"===e,onClick:()=>t("responsive-test"),children:"📐 Responsive"}),l.jsx(r,{active:"library-demo"===e,onClick:()=>t("library-demo"),children:"📚 Library"}),l.jsx(r,{active:"lasereyes-demo"===e,onClick:()=>t("lasereyes-demo"),children:"🔥 LaserEyes"}),l.jsx(r,{active:"explorer"===e,onClick:()=>t("explorer"),children:"🔧 Explorer"})]}),l.jsx("div",{className:"md:hidden",children:l.jsxs("select",{value:e,onChange:e=>t(e.target.value),className:"border rounded-md px-3 py-2 text-sm",children:[l.jsx("option",{value:"home",children:"🏠 Home"}),l.jsx("option",{value:"live-demo",children:"🎮 Live Demo"}),l.jsx("option",{value:"responsive-test",children:"📐 Responsive"}),l.jsx("option",{value:"library-demo",children:"📚 Library"}),l.jsx("option",{value:"lasereyes-demo",children:"🔥 LaserEyes"}),l.jsx("option",{value:"explorer",children:"🔧 Explorer"})]})})]})})}),l.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["home"===e&&l.jsx(a,{}),"live-demo"===e&&l.jsx(yS,{}),"responsive-test"===e&&l.jsx(bS,{}),"library-demo"===e&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"📦 Inscription Gallery Library"}),l.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"A simple, powerful React component for displaying Bitcoin inscriptions. Perfect for wallet integrations, marketplaces, and any app that needs to display inscription content."})]}),l.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-4",children:"💡 Basic Usage"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Code:"}),l.jsx("pre",{className:"bg-gray-900 text-green-400 p-4 rounded text-sm overflow-x-auto",children:"<InscriptionGallery\n  inscriptionIds={[\n    '6fb976ab...i0',\n    'e317a2a5...i0',\n    'b1ef66c2...i0'\n  ]}\n  columns={3}\n  cardSize={200}\n  showIndex={true}\n  enableModal={true}\n/>"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Result:"}),l.jsx("div",{className:"border rounded p-2 bg-gray-50",children:l.jsx(mS,{inscriptionIds:n.slice(0,3),columns:3,cardSize:120,showIndex:!0,enableModal:!0})})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-4",children:"🖼️ Gallery View (Modal Enabled)"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Click on any inscription to view details in a modal"}),l.jsx(mS,{inscriptionIds:n,columns:4,cardSize:180,showIndex:!0,enableModal:!0,className:"bg-gray-50 p-4 rounded"})]}),l.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-4",children:"📱 Compact Grid"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Perfect for displaying many inscriptions at once"}),l.jsx(mS,{inscriptionIds:n,columns:6,cardSize:100,showIndex:!1,enableModal:!0,className:"bg-gray-50 p-4 rounded"})]}),l.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-4",children:"🎨 Showcase View"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Large cards for featured inscriptions"}),l.jsx(mS,{inscriptionIds:n.slice(0,2),columns:2,cardSize:250,showIndex:!0,enableModal:!0,className:"bg-gray-50 p-4 rounded"})]})]}),l.jsxs("div",{className:"bg-gray-900 text-white rounded-lg p-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-4",children:"🚀 Getting Started"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"1. Install the package:"}),l.jsx("pre",{className:"bg-gray-800 p-3 rounded text-sm",children:"npm install bitcoin-inscription-viewer"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"2. Import and use:"}),l.jsx("pre",{className:"bg-gray-800 p-3 rounded text-sm",children:"import { InscriptionGallery } from 'bitcoin-inscription-viewer';\n\n// In your wallet component\nconst MyWalletInscriptions = ({ walletInscriptions }) => (\n  <InscriptionGallery\n    inscriptionIds={walletInscriptions}\n    columns={3}\n    cardSize={200}\n    enableModal={true}\n    onInscriptionClick={(inscription) => {\n      console.log('Clicked:', inscription.id);\n    }}\n  />\n);"})]})]})]})]}),"lasereyes-demo"===e&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"🔥 LaserEyes Integration"}),l.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Seamlessly display Bitcoin inscriptions from your LaserEyes wallet with automatic fetching, pagination, and beautiful UI components."})]}),l.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{icon:"🔗",title:"Auto-Connect",desc:"Automatically fetches inscriptions from connected wallet"},{icon:"🔄",title:"Real-time Updates",desc:"Refreshes when wallet contents change"},{icon:"📄",title:"Pagination",desc:"Handles large collections with smart pagination"}].map((e,t)=>l.jsxs("div",{className:"bg-white rounded-lg border p-6 text-center",children:[l.jsx("div",{className:"text-3xl mb-3",children:e.icon}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:e.title}),l.jsx("p",{className:"text-gray-600 text-sm",children:e.desc})]},t))}),l.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-4",children:"🚀 LaserEyes Gallery Demo"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Connect your LaserEyes wallet to see your inscriptions displayed automatically"}),l.jsx("div",{className:"bg-gray-50 p-4 rounded",children:l.jsx(vS,{columns:3,cardSize:200,showIndex:!0,enableModal:!0})})]}),l.jsxs("div",{className:"bg-gray-900 text-white rounded-lg p-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-4",children:"💻 Implementation"}),l.jsx("pre",{className:"bg-gray-800 p-4 rounded text-sm overflow-x-auto",children:"// 1. Install dependencies\nnpm install @omnisat/lasereyes-react bitcoin-inscription-viewer\n\n// 2. Wrap your app with LaserEyes provider\nimport { LaserEyesProvider } from '@omnisat/lasereyes-react'\n\nfunction App() {\n  return (\n    <LaserEyesProvider network=\"mainnet\">\n      <MyWalletApp />\n    </LaserEyesProvider>\n  )\n}\n\n// 3. Use the LaserEyes Inscription Gallery\nimport { LaserEyesInscriptionGallery } from 'bitcoin-inscription-viewer'\n\nfunction MyWalletApp() {\n  return (\n    <LaserEyesInscriptionGallery\n      columns={3}\n      cardSize={200}\n      enableModal={true}\n      onInscriptionClick={(inscription) => {\n        console.log('Selected:', inscription.inscriptionId)\n        // Send, list for sale, navigate, etc.\n      }}\n    />\n  )\n}"})]}),l.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-4",children:"🎯 Use Cases"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{title:"💼 Wallet Interfaces",desc:"Show user's inscription collection"},{title:"🏪 Marketplace Apps",desc:"List and manage inscriptions for sale"},{title:"🎮 Gaming Platforms",desc:"Display in-game assets and collectibles"},{title:"📊 Portfolio Trackers",desc:"Monitor inscription values and rarity"}].map((e,t)=>l.jsxs("div",{className:"p-4 border rounded-lg",children:[l.jsx("h4",{className:"font-medium mb-2",children:e.title}),l.jsx("p",{className:"text-sm text-gray-600",children:e.desc})]},t))})]})]}),"explorer"===e&&l.jsx(fS,{})]}),l.jsx("footer",{className:"bg-white border-t mt-16",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"text-center text-gray-600",children:[l.jsx("p",{className:"mb-2",children:"🔍 Bitcoin Inscription Viewer"}),l.jsxs("p",{className:"text-sm",children:["Built with ❤️ for the Bitcoin Ordinals community •",l.jsx("a",{href:"https://github.com",className:"ml-1 text-blue-600 hover:underline",children:"View on GitHub"})]})]})})})]})}const MS=document.getElementById("root");if(!MS)throw new Error("Failed to find the root element");Of.createRoot(MS).render(l.jsx(G.StrictMode,{children:l.jsx(SS,{})}));</script>
    <style rel="stylesheet" crossorigin>*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.\!container{width:100%!important}.container{width:100%}@media (min-width: 640px){.\!container{max-width:640px!important}.container{max-width:640px}}@media (min-width: 768px){.\!container{max-width:768px!important}.container{max-width:768px}}@media (min-width: 1024px){.\!container{max-width:1024px!important}.container{max-width:1024px}}@media (min-width: 1280px){.\!container{max-width:1280px!important}.container{max-width:1280px}}@media (min-width: 1536px){.\!container{max-width:1536px!important}.container{max-width:1536px}}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.bottom-1{bottom:.25rem}.bottom-2{bottom:.5rem}.left-1{left:.25rem}.left-2{left:.5rem}.right-12{right:3rem}.right-2{right:.5rem}.right-4{right:1rem}.top-0{top:0}.top-2{top:.5rem}.top-4{top:1rem}.z-10{z-index:10}.z-20{z-index:20}.z-50{z-index:50}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:.25rem}.mb-12{margin-bottom:3rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-4{margin-left:1rem}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mt-1{margin-top:.25rem}.mt-16{margin-top:4rem}.mt-2{margin-top:.5rem}.mt-20{margin-top:5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.contents{display:contents}.hidden{display:none}.h-10{height:2.5rem}.h-11{height:2.75rem}.h-12{height:3rem}.h-16{height:4rem}.h-2{height:.5rem}.h-3{height:.75rem}.h-32{height:8rem}.h-4{height:1rem}.h-48{height:12rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-full{height:100%}.max-h-48{max-height:12rem}.max-h-\[95vh\]{max-height:95vh}.min-h-0{min-height:0px}.min-h-32{min-height:8rem}.min-h-screen{min-height:100vh}.w-10{width:2.5rem}.w-12{width:3rem}.w-20{width:5rem}.w-3{width:.75rem}.w-4{width:1rem}.w-5{width:1.25rem}.w-8{width:2rem}.w-full{width:100%}.min-w-0{min-width:0px}.max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.max-w-48{max-width:12rem}.max-w-4xl{max-width:56rem}.max-w-6xl{max-width:72rem}.max-w-7xl{max-width:80rem}.max-w-\[95vw\]{max-width:95vw}.max-w-lg{max-width:32rem}.max-w-md{max-width:28rem}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-full{--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}.cursor-grab{cursor:grab}.cursor-pointer{cursor:pointer}.resize-none{resize:none}.resize{resize:both}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-0{gap:0px}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.gap-8{gap:2rem}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-16>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(4rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(4rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.break-words{overflow-wrap:break-word}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-xl{border-radius:.75rem}.rounded-t-lg{border-top-left-radius:.5rem;border-top-right-radius:.5rem}.border{border-width:1px}.border-0{border-width:0px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.border-none{border-style:none}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-blue-600{--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-red-400{--tw-border-opacity: 1;border-color:rgb(248 113 113 / var(--tw-border-opacity, 1))}.border-white{--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-black\/20{background-color:#0003}.bg-black\/50{background-color:#00000080}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-500{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity: 1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-yellow-500{--tw-bg-opacity: 1;background-color:rgb(234 179 8 / var(--tw-bg-opacity, 1))}.bg-opacity-75{--tw-bg-opacity: .75}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.from-blue-50{--tw-gradient-from: #eff6ff var(--tw-gradient-from-position);--tw-gradient-to: rgb(239 246 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-gray-100{--tw-gradient-from: #f3f4f6 var(--tw-gradient-from-position);--tw-gradient-to: rgb(243 244 246 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-50{--tw-gradient-from: #fff7ed var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 247 237 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-amber-50{--tw-gradient-to: #fffbeb var(--tw-gradient-to-position)}.to-gray-200{--tw-gradient-to: #e5e7eb var(--tw-gradient-to-position)}.to-purple-50{--tw-gradient-to: #faf5ff var(--tw-gradient-to-position)}.object-contain{-o-object-fit:contain;object-fit:contain}.p-0{padding:0}.p-12{padding:3rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-16{padding-top:4rem;padding-bottom:4rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-5xl{font-size:3rem;line-height:1}.text-6xl{font-size:3.75rem;line-height:1}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.capitalize{text-transform:capitalize}.leading-relaxed{line-height:1.625}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-current{color:currentColor}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-300{--tw-text-opacity: 1;color:rgb(134 239 172 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-orange-600{--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-400{--tw-text-opacity: 1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.underline-offset-4{text-underline-offset:4px}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-75{opacity:.75}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline{outline-style:solid}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-shadow{transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:10px}::-webkit-scrollbar-thumb:hover{background:#a8a8a8}*{transition:all .2s ease-in-out}button:hover{transform:translateY(-1px)}input:focus,select:focus,textarea:focus,button:focus{outline:none;ring:2px;ring-color:#f97316}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.bg-gradient-bitcoin{background:linear-gradient(135deg,#f97316,#fb923c,#fed7aa)}.inscription-card:hover{transform:translateY(-4px);box-shadow:0 10px 25px #00000026}.inscription-viewer{width:100%;height:auto}.inscription-card{width:100%;height:auto;min-width:0;min-height:0;aspect-ratio:1 / 1}.inscription-content{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.inscription-content img,.inscription-content video{max-width:100%;max-height:100%;width:auto;height:auto;-o-object-fit:contain;object-fit:contain}.inscription-content pre,.inscription-content .json-content{width:100%;height:100%;box-sizing:border-box}@media (max-width: 640px){.text-4xl{font-size:2rem}.text-2xl{font-size:1.5rem}.inscription-card{aspect-ratio:1 / 1}}@media (max-width: 768px){.inscription-viewer{grid-template-columns:repeat(auto-fit,minmax(250px,1fr))!important}}@media (max-width: 480px){.inscription-viewer{grid-template-columns:1fr!important}}.hover\:bg-black\/70:hover{background-color:#000000b3}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-600:hover{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hover\:bg-green-600:hover{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\:bg-red-50:hover{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\:bg-opacity-90:hover{--tw-bg-opacity: .9}.hover\:text-blue-700:hover{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.hover\:text-gray-600:hover{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.hover\:text-red-700:hover{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.hover\:underline:hover{text-decoration-line:underline}.hover\:opacity-100:hover{opacity:1}.hover\:opacity-70:hover{opacity:.7}.hover\:shadow-md:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\:shadow-xl:hover{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.focus\:border-transparent:focus{border-color:transparent}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.focus\:ring-orange-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(249 115 22 / var(--tw-ring-opacity, 1))}.focus-visible\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.active\:cursor-grabbing:active{cursor:grabbing}.disabled\:pointer-events-none:disabled{pointer-events:none}.disabled\:opacity-50:disabled{opacity:.5}.group:hover .group-hover\:opacity-100{opacity:1}@media (min-width: 640px){.sm\:px-6{padding-left:1.5rem;padding-right:1.5rem}}@media (min-width: 768px){.md\:flex{display:flex}.md\:hidden{display:none}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width: 1024px){.lg\:w-64{width:16rem}.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\:grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.lg\:grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.lg\:flex-row{flex-direction:row}.lg\:px-8{padding-left:2rem;padding-right:2rem}}@media (prefers-color-scheme: dark){.dark\:border-gray-600{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity, 1))}.dark\:border-gray-700{--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity, 1))}.dark\:bg-blue-900\/20{background-color:#1e3a8a33}.dark\:bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.dark\:bg-red-900\/20{background-color:#7f1d1d33}.dark\:from-gray-800{--tw-gradient-from: #1f2937 var(--tw-gradient-from-position);--tw-gradient-to: rgb(31 41 55 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.dark\:to-gray-900{--tw-gradient-to: #111827 var(--tw-gradient-to-position)}.dark\:text-blue-200{--tw-text-opacity: 1;color:rgb(191 219 254 / var(--tw-text-opacity, 1))}.dark\:text-blue-300{--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}.dark\:text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.dark\:text-gray-100{--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.dark\:text-gray-200{--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.dark\:text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.dark\:text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\:text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.dark\:text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.dark\:text-purple-400{--tw-text-opacity: 1;color:rgb(192 132 252 / var(--tw-text-opacity, 1))}.dark\:text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.dark\:hover\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
